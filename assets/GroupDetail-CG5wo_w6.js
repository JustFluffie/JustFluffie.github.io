import{_ as b,k as x,c as d,m as D,C as U,b as B,w as m,e as M,x as V,o as a,i as s,p as h,d as l,g as n,G as u,H as p,t as i,c5 as v,f as g,S as f}from"./index-D1qrJq6I.js";import{u as G}from"./doubanStore-DEGSFu6z.js";const N={class:"group-page"},H={class:"controls-bar"},L={class:"post-controls"},R={class:"control-group"},$=["value"],A={class:"control-group"},E=["value"],F={class:"group-header"},T={class:"group-info"},W={class:"post-list"},Z={key:0,class:"empty-state"},j={key:1,class:"empty-state"},q=["onClick"],z={class:"post-stats"},J={class:"comment-count"},K={class:"post-details"},O={class:"post-title"},Q={class:"post-summary"},X={class:"post-meta"},Y={class:"avatar"},ss={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},es=["fill"],ts=["fill"],os={class:"timestamp"},as={__name:"GroupDetail",setup(ns){const k=D(),C=V(),o=G(),_=x(),y=d(()=>_.characters),I=d(()=>_.userPersonas),P={校园热线:{description:"你的课表、我的吐槽，青春的回忆与回响。"},职场茶水间:{description:"摸鱼、八卦、生存指南，成年人的世界没有容易二字。"},自由吃瓜基地:{description:"内娱、外娱、网红圈，开帖拉踩请遵守版规。"},情感树洞:{description:"那些说不出口的话，在这里可以找到回声。"},深夜食堂:{description:"仅限成年人，探讨一些成熟的话题。"}},c=d(()=>{const r=k.params.groupName||"豆瓣小组",t=P[r]||{description:"欢迎来到这个小组。"};return{title:r,description:t.description}}),S=()=>{if(!o.selectedCharacterId||!o.selectedUserPersonaId){console.log("Waiting for character and persona selection...");return}o.setPosts([]),o.fetchAndSetPosts(c.value.title,o.selectedCharacterId,o.selectedUserPersonaId)},w=r=>{C.push({name:"douban-post-detail",params:{postId:r}})};return U(()=>{}),(r,t)=>(a(),B(M,{title:"","no-padding":"","no-header-border":""},{action:m(()=>[g(f,{name:"refresh",onClick:S,class:"icon-refresh"})]),default:m(()=>[s("div",N,[s("div",H,[s("div",L,[s("div",R,[h(s("select",{id:"character-select","onUpdate:modelValue":t[0]||(t[0]=e=>l(o).selectedCharacterId=e)},[t[2]||(t[2]=s("option",{value:null,disabled:""},"角色",-1)),(a(!0),n(u,null,p(y.value,e=>(a(),n("option",{key:e.id,value:e.id},i(e.name),9,$))),128))],512),[[v,l(o).selectedCharacterId]])]),s("div",A,[h(s("select",{id:"persona-select","onUpdate:modelValue":t[1]||(t[1]=e=>l(o).selectedUserPersonaId=e)},[t[3]||(t[3]=s("option",{value:null,disabled:""},"用户",-1)),(a(!0),n(u,null,p(I.value,e=>(a(),n("option",{key:e.id,value:e.id},i(e.name),9,E))),128))],512),[[v,l(o).selectedUserPersonaId]])])])]),s("header",F,[s("div",T,[s("h1",null,i(c.value.title),1),s("p",null,i(c.value.description),1)])]),s("main",W,[l(o).isLoading?(a(),n("div",Z,[...t[4]||(t[4]=[s("p",null,"正在刷新帖子...",-1)])])):l(o).posts.length===0?(a(),n("div",j,[...t[5]||(t[5]=[s("p",null,"选择角色和人设后，点击右上角刷新",-1)])])):(a(!0),n(u,{key:2},p(l(o).posts,e=>(a(),n("article",{key:e.id,class:"post-item",onClick:is=>w(e.id)},[s("div",z,[g(f,{name:"comment",class:"comment-icon"}),s("span",J,i(e.comments),1)]),s("div",K,[s("h2",O,i(e.title),1),s("p",Q,i(e.summary),1),s("div",X,[s("div",Y,[(a(),n("svg",ss,[s("circle",{cx:"12",cy:"8",r:"4",fill:e.avatarColor},null,8,es),s("path",{d:"M12 14C8.68629 14 6 16.6863 6 20H18C18 16.6863 15.3137 14 12 14Z",fill:e.avatarColor},null,8,ts)]))]),t[6]||(t[6]=s("span",{class:"username"},"匿名豆友",-1)),s("span",os,i(e.timestamp),1)])])],8,q))),128))])])]),_:1}))}},cs=b(as,[["__scopeId","data-v-07f08701"]]);export{cs as default};

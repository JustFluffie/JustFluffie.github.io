import{cc as ue,r as b,cd as z,_ as ve,k as be,H as he,N as me,m as ge,q as ke,E as fe,s as we,c as E,t as F,d as _e,w as N,y as o,a2 as ye,o as k,e,f as V,z as i,v as P,x as B,a as f,b as x,F as K,A as J,b$ as xe,n as C,M as q}from"./index-BUWpR_yD.js";import{C as W}from"./CustomSelect-DBHecv3D.js";const Pe=ue("backup",()=>{const I=b(""),s=b(""),p=b(!1),g=b(null);function h(l={chat:!0,characters:!0,settings:!0,appearance:!0,worldbook:!0}){const d={},r=localStorage.getItem("aiPhoneSingleChatData");if(r)try{const u=z.decompressFromUTF16(r),n=JSON.parse(u||r),c={};let m=!1;if(l.chat&&(c.messages=n.messages,m=!0),l.characters&&(c.characters=n.characters,c.userPersonas=n.userPersonas,c.favorites=n.favorites,m=!0),l.appearance&&(c.bubblePresets=n.bubblePresets,c.stickers=n.stickers,m=!0),m){const U=JSON.stringify(c),_=z.compressToUTF16(U);d.aiPhoneSingleChatData=_}}catch(u){console.error("Error processing single chat data for backup",u)}if(l.chat){const u=localStorage.getItem("aiPhoneMomentsData");u&&(d.aiPhoneMomentsData=u)}return l.settings&&["api_presets","api_activePresetName","api_imageHostProvider","api_imgbbApiKey","api_catboxUserHash","aiPhoneGlobalBackgroundActivity","aiPhoneGlobalProactiveScope","aiPhoneGlobalProactiveInterval","aiPhoneGlobalProactiveCooldown","aiPhoneGlobalProactiveDailyLimit","aiPhoneGlobalTriggerMode","aiPhoneGlobalProactiveIdleTime"].forEach(n=>{const c=localStorage.getItem(n);c!==null&&(d[n]=c)}),l.appearance&&["aiPhoneThemePresets","aiPhoneCurrentThemePreset","aiPhoneFontPresets","aiPhoneCurrentFontPreset","aiPhoneCssPresets","aiPhoneCurrentCssPreset"].forEach(n=>{const c=localStorage.getItem(n);c!==null&&(d[n]=c)}),l.worldbook&&["worldBooks","worldBookNextId"].forEach(n=>{const c=localStorage.getItem(n);c!==null&&(d[n]=c)}),JSON.stringify(d,null,2)}async function D(){if(!I.value){alert("请先设置 GitHub Token！");return}try{const l=await fetch("https://api.github.com/user/repos",{method:"POST",headers:{Authorization:`token ${I.value}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify({name:"phone-backup",private:!0,description:"Backup for Phone Vue App"})});if(l.ok){const d=await l.json();s.value=d.full_name,alert(`仓库 ${d.full_name} 创建成功！即将开始备份...`),await S()}else{const d=await l.json();if(d.errors&&d.errors[0].message==="name already exists on this account"){const r=await fetch("https://api.github.com/user",{headers:{Authorization:`token ${I.value}`}});if(r.ok){const u=await r.json();s.value=`${u.login}/phone-backup`,alert(`仓库已存在，已自动关联到 ${s.value}。即将开始备份...`),await S();return}}alert(`创建仓库失败: ${d.message}`)}}catch(l){console.error("Create repo failed:",l),alert(`创建仓库出错: ${l.message}`)}}async function S(){if(!I.value||!s.value){alert("请先设置 GitHub Token 和仓库地址！");return}if(p.value){alert("正在备份中，请稍候...");return}p.value=!0,alert("开始备份...");try{const l=h(),d="phone_backup.json",[r,u]=s.value.split("/"),n=`https://api.github.com/repos/${r}/${u}/contents/${d}`;let c;try{const w=await fetch(n,{headers:{Authorization:`token ${I.value}`,Accept:"application/vnd.github.v3+json"}});w.ok&&(c=(await w.json()).sha)}catch{}const U={message:`Backup from phone-vue-app: ${new Date().toISOString()}`,content:btoa(unescape(encodeURIComponent(l))),sha:c},_=await fetch(n,{method:"PUT",headers:{Authorization:`token ${I.value}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(U)});if(_.ok)g.value=new Date,alert("备份成功！");else{const w=await _.json();console.error("GitHub API Error:",w),alert(`备份失败: ${w.message}`)}}catch(l){console.error("Backup to GitHub failed:",l),alert(`备份过程中发生错误: ${l.message}`)}finally{p.value=!1}}async function $(){alert("从 GitHub 恢复的功能尚未实现。")}function A(l){try{const d=h(l),r=new Blob([d],{type:"application/json"}),u=URL.createObjectURL(r),n=document.createElement("a");n.href=u,n.download=`phone_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(u),alert("备份文件已开始下载！")}catch(d){console.error("Export backup failed:",d),alert(`导出备份文件时出错: ${d.message}`)}}function T(){const l=document.createElement("input");l.type="file",l.accept="application/json",l.onchange=d=>{const r=d.target.files[0];if(!r)return;const u=new FileReader;u.onload=n=>{try{const c=JSON.parse(n.target.result);if(confirm("这将覆盖所有当前数据，确定要导入吗？")){localStorage.clear();for(const m in c)Object.hasOwnProperty.call(c,m)&&localStorage.setItem(m,c[m]);alert("数据导入成功！请刷新页面以应用更改。")}}catch(c){console.error("Import backup failed:",c),alert(`导入失败，请确保文件格式正确: ${c.message}`)}},u.readAsText(r)},l.click()}return{githubToken:I,githubRepo:s,isBackingUp:p,lastBackupTime:g,backupToGitHub:S,restoreFromGitHub:$,exportBackupFile:A,importBackupFile:T,createBackupRepo:D}}),Ce={class:"card"},Se={class:"card-title"},Be={class:"card-content"},Ae={class:"api-item-row"},Te={style:{flex:"1","min-width":"0"}},Ue={class:"api-item-col"},Ie={class:"form-label",for:"api-url"},$e=["placeholder"],He={class:"api-item-col"},Ne={class:"form-label",for:"api-key"},De=["placeholder"],je={class:"api-item-row"},Ge={class:"list-item-title",style:{"font-weight":"normal","white-space":"nowrap"}},Me={style:{flex:"1",display:"flex",gap:"10px","align-items":"center","min-width":"0"}},Fe={style:{flex:"1","min-width":"0",position:"relative"}},Re={key:0,value:"",disabled:""},Oe=["value"],Ve={class:"card"},Ee={class:"card-title"},Ke={class:"card-title-note",style:{padding:"0 16px 10px","margin-top":"-10px",color:"var(--danger-color)"}},Le={class:"card-content"},ze={class:"api-item-row"},Je={class:"list-item-content"},qe={class:"list-item-title"},We={class:"list-item-subtitle"},Ze={class:"api-item-row"},Qe={class:"list-item-content"},Xe={class:"list-item-title"},Ye={class:"api-item-row"},et={class:"list-item-content"},tt={class:"list-item-title"},st={class:"api-item-row"},ot={class:"list-item-content"},at={class:"list-item-title"},it={class:"api-item-row"},lt={class:"list-item-content"},nt={class:"list-item-title"},ct={class:"api-item-row"},rt={class:"list-item-content"},dt={class:"list-item-title"},pt={class:"list-item-subtitle"},ut={class:"mode-selector"},vt={key:0,class:"api-item-row"},bt={class:"list-item-content"},ht={class:"list-item-title"},mt={class:"list-item-subtitle"},gt={class:"card"},kt={class:"card-title"},ft={class:"card-content"},wt={class:"api-item-row"},_t={class:"list-item-content"},yt={class:"list-item-title"},xt={class:"list-item-subtitle"},Pt={class:"card"},Ct={class:"card-title"},St={class:"card-content"},Bt={class:"api-item-col"},At={class:"form-label",for:"github-token"},Tt={class:"input-hint"},Ut={style:{display:"flex",gap:"10px"}},It=["placeholder"],$t={class:"api-item-col"},Ht={class:"form-label",for:"github-repo"},Nt={style:{display:"flex",gap:"10px"}},Dt=["placeholder"],jt=["disabled"],Gt={class:"api-item-row"},Mt=["disabled"],Ft={key:0,style:{"font-size":"12px",color:"var(--text-tertiary)","margin-top":"10px"}},Rt={class:"card"},Ot={class:"card-title"},Vt={class:"card-content"},Et={class:"api-item-row"},Kt={class:"list-item-content",style:{flex:"1","min-width":"0"}},Lt={class:"list-item-title"},zt={class:"list-item-subtitle"},Jt={style:{width:"120px","flex-shrink":"0"}},qt={class:"api-item-col"},Wt={class:"form-label",for:"imgbb-api-key"},Zt={class:"input-hint"},Qt={style:{display:"flex",gap:"10px"}},Xt=["placeholder"],Yt={class:"api-item-col"},es={class:"form-label",for:"catbox-hash"},ts={class:"input-hint"},ss={style:{display:"flex",gap:"10px"}},os=["placeholder"],as={class:"card"},is={class:"card-title"},ls={class:"card-content"},ns={style:{"font-size":"13px",color:"var(--text-tertiary)","margin-bottom":"15px"}},cs={class:"api-item-row",style:{"border-bottom":"none","padding-bottom":"0"}},rs={class:"scope-list"},ds={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},ps={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},us={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},vs={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},bs={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},hs={class:"scope-list",style:{"max-height":"300px","overflow-y":"auto"}},ms={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},gs={class:"scope-name"},ks=["onClick"],fs={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},ws={class:"scope-name"},_s={__name:"API",setup(I){const{t:s}=be(),p=he(),g=me(),h=Pe(),D=ge(),S=ke(),$=fe(),A=b(""),T=b(""),l=b(""),d=b(!1),r=b([]),u=b(5),n=b(30),c=b(10),m=b("always"),U=b(15),_=b(""),w=b(""),H=b("catbox"),j=b(""),G=b(""),Z=b([{value:"catbox",label:"Catbox"},{value:"imgbb",label:"ImgBB"}]);we(()=>{d.value=g.globalBackgroundActivity,r.value=[...g.globalProactiveScope||[]],u.value=g.globalProactiveInterval,n.value=g.globalProactiveCooldown,c.value=g.globalProactiveDailyLimit,m.value=g.globalTriggerMode,U.value=g.globalProactiveIdleTime,_.value=h.githubToken,w.value=h.githubRepo,H.value=p.imageHostProvider,j.value=p.imgbbApiKey,G.value=p.catboxUserHash});const Q=E(()=>p.presets.find(v=>v.name===p.activePresetName)||null);F(Q,v=>{v&&(A.value=v.apiKey,T.value=v.apiUrl,l.value=v.model)},{immediate:!0,deep:!0}),F([A,T,l],()=>{p.activePresetName&&p.addPreset(p.activePresetName,{apiKey:A.value,apiUrl:T.value,model:l.value})}),F([d,r,u,n,c,m,U],()=>{g.globalBackgroundActivity=d.value,g.globalProactiveScope=r.value,g.globalProactiveInterval=u.value,g.globalProactiveCooldown=n.value,g.globalProactiveDailyLimit=c.value,g.globalTriggerMode=m.value,g.globalProactiveIdleTime=U.value},{deep:!0}),F([_,w],()=>{h.githubToken=_.value,h.githubRepo=w.value}),F([H,j,G],()=>{p.imageHostProvider=H.value,p.imgbbApiKey=j.value,p.catboxUserHash=G.value},{deep:!0});function X(){S.showToast(s("api.toast.settingsSaved"))}function Y(){S.showInput(s("api.prompt.saveAsPreset"),"",v=>{v&&(p.addPreset(v,{apiKey:A.value,apiUrl:T.value,model:l.value}),S.showToast(s("api.toast.presetSaved",{name:v})))},s("api.prompt.enterPresetName"))}function ee(){S.showConfirm(s("api.confirm.deletePreset"),s("api.confirm.deletePresetMsg",{name:p.activePresetName}),()=>{p.deletePreset(p.activePresetName),S.showToast(s("api.toast.presetDeleted"))})}async function te(){const v={apiUrl:T.value,apiKey:A.value};await p.fetchModels(v)}const se=E(()=>{switch($.permission){case"granted":return s("api.notificationsGranted");case"denied":return s("api.notificationsDenied");default:return s("api.notificationsDefault")}}),oe=()=>{$.permission!=="granted"?$.requestPermission():$.desktopNotificationsEnabled=!$.desktopNotificationsEnabled},ae=async()=>{h.githubToken=_.value,await h.createBackupRepo(),w.value=h.githubRepo},ie=async()=>{h.githubToken=_.value,h.githubRepo=w.value,await h.backupToGitHub()};function le(){window.open("https://github.com/settings/tokens/new?scopes=repo&description=Phone%20App%20Backup","_blank")}function ne(){window.open("https://api.imgbb.com/","_blank")}function ce(){window.open("https://catbox.moe/user/","_blank")}function re(){S.showConfirm("确认清除所有数据？","此操作将永久删除所有本地存储的数据（包括聊天记录、API设置、背景图片等）。应用将重置为初始状态。请确保您已备份重要数据。",()=>{localStorage.clear(),window.location.reload()},{messageStyle:{color:"#FF3B30"},confirmText:"清除"})}const R=b(!1),y=b({chat:!0,characters:!0,settings:!0,appearance:!0,worldbook:!0});function M(v){y.value[v]=!y.value[v]}function de(){h.exportBackupFile(y.value),R.value=!1}const O=b(!1),pe=E(()=>{const v=r.value||[];return v.includes("all")?s("api.scopeAll"):v.length===0?s("api.scopeNone"):s("api.scopeSelected",{count:v.length})});function L(v){const t=r.value;if(v==="all")t.includes("all")?r.value=[]:r.value=["all"];else if(t.includes("all"))r.value=[v];else{const a=t.indexOf(v);a>-1?t.splice(a,1):t.push(v),D.characters.length>0&&t.length===D.characters.length&&(r.value=["all"])}}return(v,t)=>(k(),_e(ye,{title:o(s)("api.title")},{action:N(()=>[e("button",{class:"header-save-btn",onClick:X},i(o(s)("save")),1)]),default:N(()=>[e("div",Ce,[e("div",Se,i(o(s)("api.globalConfig")),1),e("div",Be,[e("div",Ae,[e("div",Te,[V(W,{"model-value":o(p).activePresetName,options:o(p).presets.map(a=>({value:a.name,label:a.name})),"onUpdate:modelValue":t[0]||(t[0]=a=>o(p).switchPreset(a)),textAlign:"left",style:{width:"100%"}},null,8,["model-value","options"])]),e("button",{class:"btn btn-secondary btn-sm",onClick:Y},i(o(s)("api.saveAs")),1),e("button",{class:"btn btn-danger-light btn-sm",onClick:ee},i(o(s)("delete")),1)]),e("div",Ue,[e("label",Ie,i(o(s)("api.apiUrl")),1),P(e("input",{type:"text",id:"api-url",class:"base-input","onUpdate:modelValue":t[1]||(t[1]=a=>T.value=a),placeholder:o(s)("api.apiUrlPlaceholder")},null,8,$e),[[B,T.value]])]),e("div",He,[e("label",Ne,i(o(s)("api.apiKey")),1),P(e("input",{type:"password",id:"api-key",class:"base-input","onUpdate:modelValue":t[2]||(t[2]=a=>A.value=a),placeholder:o(s)("api.apiKeyPlaceholder")},null,8,De),[[B,A.value]])]),e("div",je,[e("div",Ge,i(o(s)("api.model")),1),e("div",Me,[e("div",Fe,[P(e("select",{class:"native-select","onUpdate:modelValue":t[3]||(t[3]=a=>l.value=a)},[o(p).models.length===0?(k(),f("option",Re,i(o(s)("api.modelPlaceholder")),1)):x("",!0),(k(!0),f(K,null,J(o(p).models,a=>(k(),f("option",{key:a,value:a},i(a),9,Oe))),128))],512),[[xe,l.value]]),t[29]||(t[29]=e("div",{class:"select-arrow"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))]),e("button",{class:"btn btn-secondary btn-sm",onClick:te,style:{"white-space":"nowrap"}},i(o(s)("api.fetch")),1)])])])]),e("div",Ve,[e("div",Ee,i(o(s)("api.backgroundActivity")),1),e("div",Ke,i(o(s)("api.backgroundActivityWarning")),1),e("div",Le,[e("div",ze,[e("div",Je,[e("div",qe,i(o(s)("api.proactiveMessages")),1),e("div",We,i(o(s)("api.proactiveMessagesDesc")),1)]),e("div",{class:C(["toggle-switch",{active:d.value}]),onClick:t[4]||(t[4]=a=>d.value=!d.value)},null,2)]),d.value?(k(),f(K,{key:0},[e("div",Ze,[e("div",Qe,[e("div",Xe,i(o(s)("api.scope")),1)]),e("div",{class:"scope-selector",onClick:t[5]||(t[5]=a=>O.value=!0)},[e("span",null,i(pe.value),1),t[30]||(t[30]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"9 18 15 12 9 6"})],-1))])]),e("div",Ye,[e("div",et,[e("div",tt,i(o(s)("api.interval")),1)]),P(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=a=>u.value=a),class:"base-input base-input-short",placeholder:"5"},null,512),[[B,u.value,void 0,{number:!0}]])]),e("div",st,[e("div",ot,[e("div",at,i(o(s)("api.cooldown")),1)]),P(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=a=>n.value=a),class:"base-input base-input-short",placeholder:"30"},null,512),[[B,n.value,void 0,{number:!0}]])]),e("div",it,[e("div",lt,[e("div",nt,i(o(s)("api.dailyLimit")),1)]),P(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=a=>c.value=a),class:"base-input base-input-short",placeholder:"10"},null,512),[[B,c.value,void 0,{number:!0}]])]),e("div",ct,[e("div",rt,[e("div",dt,i(o(s)("api.triggerMode")),1),e("div",pt,i(o(s)("api.triggerModeIdleHint")),1)]),e("div",ut,[e("div",{class:C(["mode-option",{active:m.value==="idle"}]),onClick:t[9]||(t[9]=a=>m.value="idle")},i(o(s)("api.triggerModeIdle")),3),e("div",{class:C(["mode-option",{active:m.value==="always"}]),onClick:t[10]||(t[10]=a=>m.value="always")},i(o(s)("api.triggerModeAlways")),3)])]),m.value==="idle"?(k(),f("div",vt,[e("div",bt,[e("div",ht,i(o(s)("api.idleTime")),1),e("div",mt,i(o(s)("api.idleTimeDesc")),1)]),P(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=a=>U.value=a),class:"base-input base-input-short",placeholder:"15"},null,512),[[B,U.value,void 0,{number:!0}]])])):x("",!0)],64)):x("",!0)])]),e("div",gt,[e("div",kt,i(o(s)("api.notificationSettings")),1),e("div",ft,[e("div",wt,[e("div",_t,[e("div",yt,i(o(s)("api.desktopNotifications")),1),e("div",xt,i(se.value),1)]),e("div",{class:C(["toggle-switch",{active:o($).desktopNotificationsEnabled}]),onClick:oe},null,2)])])]),e("div",Pt,[e("div",Ct,i(o(s)("api.githubBackup")),1),e("div",St,[e("div",Bt,[e("label",At,i(o(s)("api.githubToken")),1),e("div",Tt,i(o(s)("api.githubTokenHint")),1),e("div",Ut,[P(e("input",{type:"password",id:"github-token",class:"base-input small-placeholder","onUpdate:modelValue":t[12]||(t[12]=a=>_.value=a),placeholder:o(s)("api.githubTokenPlaceholder"),style:{flex:"1"}},null,8,It),[[B,_.value]]),e("button",{class:"btn btn-secondary btn-sm",onClick:le},i(o(s)("api.getToken")),1)])]),e("div",$t,[e("label",Ht,i(o(s)("api.repoAddress")),1),e("div",Nt,[P(e("input",{type:"text",id:"github-repo",class:"base-input","onUpdate:modelValue":t[13]||(t[13]=a=>w.value=a),placeholder:o(s)("api.repoAddressPlaceholder"),style:{flex:"1"}},null,8,Dt),[[B,w.value]]),w.value?x("",!0):(k(),f("button",{key:0,class:"btn btn-secondary btn-sm",onClick:ae,disabled:!_.value},i(o(s)("api.createRepo")),9,jt))])]),e("div",Gt,[e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:ie,disabled:o(h).isBackingUp},i(o(h).isBackingUp?o(s)("api.backingUp"):o(s)("api.backupNow")),9,Mt),e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:t[14]||(t[14]=(...a)=>o(h).restoreFromGitHub&&o(h).restoreFromGitHub(...a))},i(o(s)("api.restoreBackup")),1)]),o(h).lastBackupTime?(k(),f("p",Ft,i(o(s)("api.lastBackup"))+" "+i(new Date(o(h).lastBackupTime).toLocaleString()),1)):x("",!0)])]),e("div",Rt,[e("div",Ot,i(o(s)("api.imageHost")),1),e("div",Vt,[e("div",Et,[e("div",Kt,[e("div",Lt,i(o(s)("api.defaultImageHost")),1),e("div",zt,i(o(s)("api.defaultImageHostDesc")),1)]),e("div",Jt,[V(W,{"model-value":H.value,options:Z.value,"onUpdate:modelValue":t[15]||(t[15]=a=>H.value=a),textAlign:"right"},null,8,["model-value","options"])])]),e("div",qt,[e("label",Wt,i(o(s)("api.imgbbApiKey")),1),e("div",Zt,i(o(s)("api.imgbbApiKeyHint")),1),e("div",Qt,[P(e("input",{type:"password",id:"imgbb-api-key",class:"base-input small-placeholder","onUpdate:modelValue":t[16]||(t[16]=a=>j.value=a),placeholder:o(s)("api.imgbbApiKeyPlaceholder"),style:{flex:"1"}},null,8,Xt),[[B,j.value]]),e("button",{class:"btn btn-secondary btn-sm",onClick:ne},i(o(s)("api.getImgbbApiKey")),1)])]),e("div",Yt,[e("label",es,i(o(s)("api.catboxUserHash")),1),e("div",ts,i(o(s)("api.catboxUserHashHint")),1),e("div",ss,[P(e("input",{type:"text",id:"catbox-hash",class:"base-input small-placeholder","onUpdate:modelValue":t[17]||(t[17]=a=>G.value=a),placeholder:o(s)("api.catboxUserHashPlaceholder"),style:{flex:"1"}},null,8,os),[[B,G.value]]),e("button",{class:"btn btn-secondary btn-sm",onClick:ce},i(o(s)("api.getCatboxUserHash")),1)])])])]),e("div",as,[e("div",is,i(o(s)("api.dataBackup")),1),e("div",ls,[e("p",ns,i(o(s)("api.dataBackupDesc")),1),e("div",cs,[e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:t[18]||(t[18]=a=>R.value=!0)},i(o(s)("api.exportBackupFile")),1),e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:t[19]||(t[19]=(...a)=>o(h).importBackupFile&&o(h).importBackupFile(...a))},i(o(s)("api.importBackupFile")),1)])])]),e("div",{class:"danger-zone"},[e("button",{class:"btn btn-danger big-btn",onClick:re},[...t[31]||(t[31]=[e("div",{class:"danger-btn-content"},[e("div",{class:"danger-btn-title"},"清除所有数据"),e("div",{class:"danger-btn-desc"},"此操作将清除所有聊天记录、设置和本地数据，且无法恢复")],-1)])])]),V(q,{visible:R.value,"onUpdate:visible":t[25]||(t[25]=a=>R.value=a),title:"导出选项",bodyClass:"no-padding"},{footer:N(()=>[e("button",{class:"modal-btn confirm",onClick:de},"确认导出")]),default:N(()=>[e("div",rs,[e("div",{class:"scope-item",onClick:t[20]||(t[20]=a=>M("chat"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.chat}])},[y.value.chat?(k(),f("svg",ds,[...t[32]||(t[32]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[33]||(t[33]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"聊天数据"),e("span",{class:"scope-desc"},"包含聊天记录和朋友圈")],-1))]),e("div",{class:"scope-item",onClick:t[21]||(t[21]=a=>M("characters"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.characters}])},[y.value.characters?(k(),f("svg",ps,[...t[34]||(t[34]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[35]||(t[35]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"角色数据"),e("span",{class:"scope-desc"},"包含角色卡片、用户人设和收藏")],-1))]),e("div",{class:"scope-item",onClick:t[22]||(t[22]=a=>M("settings"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.settings}])},[y.value.settings?(k(),f("svg",us,[...t[36]||(t[36]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[37]||(t[37]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"API设置"),e("span",{class:"scope-desc"},"包含API配置、图床、后台设置")],-1))]),e("div",{class:"scope-item",onClick:t[23]||(t[23]=a=>M("appearance"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.appearance}])},[y.value.appearance?(k(),f("svg",vs,[...t[38]||(t[38]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[39]||(t[39]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"外观主题"),e("span",{class:"scope-desc"},"包含主题、字体、气泡样式")],-1))]),e("div",{class:"scope-item",onClick:t[24]||(t[24]=a=>M("worldbook"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.worldbook}])},[y.value.worldbook?(k(),f("svg",bs,[...t[40]||(t[40]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[41]||(t[41]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"世界书"),e("span",{class:"scope-desc"},"包含世界书设定")],-1))])])]),_:1},8,["visible"]),V(q,{visible:O.value,"onUpdate:visible":t[28]||(t[28]=a=>O.value=a),title:o(s)("api.selectScope"),bodyClass:"no-padding"},{footer:N(()=>[e("button",{class:"modal-btn confirm",onClick:t[27]||(t[27]=a=>O.value=!1)},i(o(s)("confirm")),1)]),default:N(()=>[e("div",hs,[e("div",{class:"scope-item",onClick:t[26]||(t[26]=a=>L("all"))},[e("div",{class:C(["scope-checkbox",{checked:r.value&&r.value.includes("all")}])},[r.value&&r.value.includes("all")?(k(),f("svg",ms,[...t[42]||(t[42]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),e("span",gs,i(o(s)("api.scopeAll")),1)]),(k(!0),f(K,null,J(o(D).characters,a=>(k(),f("div",{key:a.id,class:"scope-item",onClick:ys=>L(a.id)},[e("div",{class:C(["scope-checkbox",{checked:r.value&&r.value.includes(a.id)}])},[r.value&&r.value.includes(a.id)?(k(),f("svg",fs,[...t[43]||(t[43]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),e("span",ws,i(a.name),1)],8,ks))),128))])]),_:1},8,["visible","title"])]),_:1},8,["title"]))}},Cs=ve(_s,[["__scopeId","data-v-21074d88"]]);export{Cs as default};

import{_ as I,u as M,r as h,c as u,b as V,x as N,k as U,i as g,aa as F,j as G,o,e as s,w as f,d as a,F as p,C as _,t as n,c5 as k,B as v,g as y,S as C}from"./index-D40z94-5.js";import{u as L}from"./doubanStore-CAB3Ikss.js";const R={class:"group-page"},$={class:"controls-bar"},j={class:"post-controls"},A={class:"control-group"},E=["value"],H={class:"control-group"},T=["value"],W={class:"group-header"},Z={class:"group-info"},q={class:"post-list"},z={key:0,class:"empty-state"},J={key:1,class:"empty-state"},K=["onClick"],O={class:"post-stats"},Q={class:"comment-count"},X={class:"post-details"},Y={class:"post-title"},ss={class:"post-summary"},ts={class:"post-meta"},es={class:"avatar"},os={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},as=["fill"],ns=["fill"],ls={class:"timestamp"},is={__name:"GroupDetail",setup(rs){const S=V(),w=G(),l=L(),m=M(),i=h(null),r=h(null),b=u(()=>m.characters),x=u(()=>m.userPersonas),P={校园热线:{description:"你的课表、我的吐槽，青春的回忆与回响。"},职场茶水间:{description:"摸鱼、八卦、生存指南，成年人的世界没有容易二字。"},自由吃瓜基地:{description:"内娱、外娱、网红圈，开帖拉踩请遵守版规。"},情感树洞:{description:"那些说不出口的话，在这里可以找到回声。"},深夜食堂:{description:"仅限成年人，探讨一些成熟的话题。"}},d=u(()=>{const c=S.params.groupName||"豆瓣小组",e=P[c]||{description:"欢迎来到这个小组。"};return{title:c,description:e.description}}),B=()=>{if(!i.value||!r.value){console.log("Waiting for character and persona selection...");return}l.fetchAndSetPosts(d.value.title,i.value,r.value)},D=c=>{w.push({name:"douban-post-detail",params:{postId:c}})};return N(()=>{l.setPosts([]),i.value=null,r.value=null}),(c,e)=>(o(),U(F,{title:"","no-padding":"","no-header-border":""},{action:g(()=>[y(C,{name:"refresh",onClick:B,class:"icon-refresh"})]),default:g(()=>[s("div",R,[s("div",$,[s("div",j,[s("div",A,[f(s("select",{id:"character-select","onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t)},[e[2]||(e[2]=s("option",{value:null,disabled:""},"角色",-1)),(o(!0),a(p,null,_(b.value,t=>(o(),a("option",{key:t.id,value:t.id},n(t.name),9,E))),128))],512),[[k,i.value]])]),s("div",H,[f(s("select",{id:"persona-select","onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t)},[e[3]||(e[3]=s("option",{value:null,disabled:""},"用户",-1)),(o(!0),a(p,null,_(x.value,t=>(o(),a("option",{key:t.id,value:t.id},n(t.name),9,T))),128))],512),[[k,r.value]])])])]),s("header",W,[s("div",Z,[s("h1",null,n(d.value.title),1),s("p",null,n(d.value.description),1)])]),s("main",q,[v(l).isLoading?(o(),a("div",z,[...e[4]||(e[4]=[s("p",null,"正在刷新帖子...",-1)])])):v(l).posts.length===0?(o(),a("div",J,[...e[5]||(e[5]=[s("p",null,"选择角色和人设后，点击右上角刷新",-1)])])):(o(!0),a(p,{key:2},_(v(l).posts,t=>(o(),a("article",{key:t.id,class:"post-item",onClick:cs=>D(t.id)},[s("div",O,[y(C,{name:"comment",class:"comment-icon"}),s("span",Q,n(t.comments),1)]),s("div",X,[s("h2",Y,n(t.title),1),s("p",ss,n(t.summary),1),s("div",ts,[s("div",es,[(o(),a("svg",os,[s("circle",{cx:"12",cy:"8",r:"4",fill:t.avatarColor},null,8,as),s("path",{d:"M12 14C8.68629 14 6 16.6863 6 20H18C18 16.6863 15.3137 14 12 14Z",fill:t.avatarColor},null,8,ns)]))]),e[6]||(e[6]=s("span",{class:"username"},"匿名豆友",-1)),s("span",ls,n(t.timestamp),1)])])],8,K))),128))])])]),_:1}))}},ps=I(is,[["__scopeId","data-v-635c6a6d"]]);export{ps as default};

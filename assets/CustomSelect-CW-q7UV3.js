import{_ as $,r as u,c as z,s as B,a1 as E,a as d,o as a,e as r,d as L,z as y,n as v,f as _,w as O,b as R,C as W,F as q,A,Y as D,a4 as F,D as I}from"./index-CQj2kfep.js";const N=["onClick"],T={__name:"CustomSelect",props:{options:{type:Array,required:!0,default:()=>[]},modelValue:{type:[String,Number],required:!0},textAlign:{type:String,default:"right"}},emits:["update:modelValue"],setup(i,{emit:x}){const f=i,C=x,o=u(!1),l=u(null),g=u({}),p=u("body"),h=z(()=>f.options.find(e=>e.value===f.modelValue)),S=()=>{if(l.value){const e=l.value.getBoundingClientRect(),n=window.innerWidth,s=e.left+e.width/2>n/2;let t={position:"absolute",top:`${e.bottom+4}px`,width:"auto",zIndex:9999};if(s?(t.right=`${n-e.right}px`,t.left="auto"):(t.left=`${e.left}px`,t.right="auto"),p.value===".phone-frame"){const k=document.querySelector(".phone-frame");if(k){const m=k.getBoundingClientRect();t.top=`${e.bottom-m.top+4}px`,s?(t.right=`${m.right-e.right}px`,t.left="auto"):(t.left=`${e.left-m.left}px`,t.right="auto")}}g.value=t}},b=async()=>{if(o.value)o.value=!1;else{const e=document.querySelector(".phone-frame");p.value=e?".phone-frame":"body",o.value=!0,await I(),S()}},V=e=>{C("update:modelValue",e.value),o.value=!1},w=e=>{const n=l.value&&l.value.contains(e.target),s=e.target.closest(".custom-options");!n&&!s&&(o.value=!1)},c=()=>{o.value&&(o.value=!1)};return B(()=>{document.addEventListener("click",w),window.addEventListener("scroll",c,!0),window.addEventListener("resize",c)}),E(()=>{document.removeEventListener("click",w),window.removeEventListener("scroll",c,!0),window.removeEventListener("resize",c)}),(e,n)=>(a(),d("div",{class:"custom-select-wrapper",ref_key:"selectWrapper",ref:l},[r("div",{class:v(["custom-select-trigger",`text-${i.textAlign}`]),onClick:b},[r("span",null,y(h.value?h.value.label:"请选择"),1),r("div",{class:v(["arrow-icon",{open:o.value}])},[...n[0]||(n[0]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[r("polyline",{points:"9 18 15 12 9 6"})],-1)])],2)],2),(a(),L(F,{to:p.value},[_(D,{name:"slide-fade"},{default:O(()=>[o.value?(a(),d("div",{key:0,class:"custom-options",style:W(g.value)},[(a(!0),d(q,null,A(i.options,s=>(a(),d("div",{key:s.value,class:v(["custom-option",{selected:i.modelValue===s.value}]),onClick:t=>V(s)},y(s.label),11,N))),128))],4)):R("",!0)]),_:1})],8,["to"]))],512))}},M=$(T,[["__scopeId","data-v-64fe20b2"]]);export{M as C};

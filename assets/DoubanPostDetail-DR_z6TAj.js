import{_ as u,m as _,c as v,r as p,C as h,b as f,w as g,e as y,o,g as a,i as s,t as l,G as k,H as x}from"./index-D1qrJq6I.js";import{u as w}from"./doubanStore-DEGSFu6z.js";const C={key:0,class:"post-detail-page"},L={class:"post-full-content"},b={class:"post-meta"},B={class:"avatar"},D={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I=["fill"],P=["fill"],F={class:"user-info"},S={class:"timestamp"},H={class:"post-body"},M={class:"comments-section"},E={key:0,class:"loading-state"},G={key:1,class:"comments-list"},N={class:"comment-meta"},R={class:"comment-username"},T={class:"comment-text"},V={class:"comment-footer"},Z={class:"comment-time"},$={class:"comment-likes"},j={key:2,class:"no-comments"},q={key:1,class:"loading-state"},z={__name:"DoubanPostDetail",setup(A){const r=_(),c=w(),d=parseInt(r.params.postId,10),t=v(()=>c.getPostById(d)),i=p(!1);return h(async()=>{if(t.value&&t.value.commentsList&&t.value.commentsList.length===0){i.value=!0;try{await c.fetchCommentsForPost(d)}catch(m){console.error("Failed to load comments:",m)}finally{i.value=!1}}}),(m,e)=>(o(),f(y,{title:t.value?"å¸–å­è¯¦æƒ…":"åŠ è½½ä¸­..."},{default:g(()=>[t.value?(o(),a("div",C,[s("article",L,[s("header",b,[s("div",B,[(o(),a("svg",D,[s("circle",{cx:"12",cy:"8",r:"4",fill:t.value.avatarColor},null,8,I),s("path",{d:"M12 14C8.68629 14 6 16.6863 6 20H18C18 16.6863 15.3137 14 12 14Z",fill:t.value.avatarColor},null,8,P)]))]),s("div",F,[e[0]||(e[0]=s("div",{class:"username"},"åŒ¿åè±†å‹",-1)),s("div",S,l(t.value.timestamp),1)])]),s("div",H,[s("h1",null,l(t.value.title),1),s("p",null,l(t.value.fullText||t.value.summary),1)])]),s("section",M,[e[4]||(e[4]=s("div",{class:"comments-header"},[s("h3",null,"çƒ­é—¨è¯„è®º")],-1)),i.value?(o(),a("div",E,[...e[1]||(e[1]=[s("p",null,"è¯„è®ºåŠ è½½ä¸­...",-1)])])):t.value.commentsList&&t.value.commentsList.length>0?(o(),a("div",G,[(o(!0),a(k,null,x(t.value.commentsList,n=>(o(),a("div",{key:n.id,class:"comment-item"},[s("div",N,[e[2]||(e[2]=s("div",{class:"comment-avatar"},null,-1)),s("span",R,l(n.user),1)]),s("p",T,l(n.text),1),s("div",V,[s("span",Z,l(n.time),1),s("span",$,"ğŸ‘ "+l(n.likes),1)])]))),128))])):(o(),a("div",j,[...e[3]||(e[3]=[s("p",null,"è¿˜æ²¡æœ‰è¯„è®ºï¼Œå¿«æ¥æŠ¢æ²™å‘ï¼",-1)])]))])])):(o(),a("div",q,[...e[5]||(e[5]=[s("p",null,"å¸–å­åŠ è½½ä¸­...",-1)])]))]),_:1},8,["title"]))}},O=u(z,[["__scopeId","data-v-4171dc48"]]);export{O as default};

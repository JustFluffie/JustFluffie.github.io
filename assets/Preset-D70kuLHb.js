import{_ as N,k as z,Q as B,P as K,c as E,r as D,d as R,w as _,y as s,a2 as T,o as m,f as i,a as y,b as g,e,S as d,C as W,z as p,n as P,M as A}from"./index-CsqwSS8v.js";import{M as H}from"./MultiSelect-LF5d9WZY.js";import{d as I}from"./vuedraggable.umd-B9mk7eUa.js";const Q={class:"card"},j={class:"card-header"},q={class:"book-drag-handle icon-btn"},F=["value","onInput","placeholder"],G={class:"header-controls"},J=["onClick"],L={key:0,class:"card-content"},X={class:"content-controls"},Y={class:"priority-selector"},Z={class:"card-actions"},ee=["onClick"],te=["onClick"],le={class:"entry-header"},oe={class:"entry-drag-handle icon-btn"},ne=["value","onInput","placeholder"],se={class:"entry-controls"},ae=["onClick"],ie=["onClick"],ce={key:0,class:"entry-content"},re=["value","onInput","placeholder"],de=["value","onInput","placeholder"],ue={key:0,class:"empty-state"},pe={style:{"text-align":"center","padding-bottom":"25px"}},_e={__name:"Preset",setup(he){const{t:l}=z(),r=B(),{sortedPresets:S}=K(r),O=E(()=>[{value:"1",label:l("preset.priorityOptions.high")},{value:"2",label:l("preset.priorityOptions.medium")},{value:"3",label:l("preset.priorityOptions.low")}]),k=o=>{switch(String(o)){case"1":return{label:l("preset.priorityOptions.high"),color:"red"};case"2":return{label:l("preset.priorityOptions.medium"),color:"blue"};case"3":return{label:l("preset.priorityOptions.low"),color:"green"};default:return{label:"",color:""}}},f=E({get:()=>S.value,set:o=>{}}),v=D(!1),C=D({type:null,presetIndex:null,entryIndex:null}),w=(o,a,t=null)=>{C.value={type:o,presetIndex:a,entryIndex:t},v.value=!0},M=()=>{const{type:o,presetIndex:a,entryIndex:t}=C.value;o==="preset"?r.deletePreset(a):o==="entry"&&r.deleteEntry(a,t),x()},x=()=>{v.value=!1,C.value={type:null,presetIndex:null,entryIndex:null}},V=(o,a)=>{r.updatePreset(o,a)},b=(o,a,t)=>{r.updateEntry(o,a,t)},U=(o,a)=>{r.reorderEntries(o,{oldIndex:a.oldIndex,newIndex:a.newIndex})},$=o=>{r.onPresetDragEnd({oldIndex:o.oldIndex,newIndex:o.newIndex})};return(o,a)=>(m(),R(T,{title:s(l)("preset.title")},{action:_(()=>[i(d,{name:"plus",onClick:s(r).addNewPreset,class:"header-action-icon"},null,8,["onClick"])]),default:_(()=>[i(s(I),{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=t=>f.value=t),"item-key":"id",handle:".book-drag-handle",onEnd:$},{item:_(({element:t,index:c})=>[e("div",Q,[e("div",j,[e("button",q,[i(d,{name:"drag-handle"})]),k(t.priority).label?(m(),y("span",{key:0,style:W({color:k(t.priority).color,marginRight:"8px",fontWeight:"bold",fontSize:"1.2em"})},p(k(t.priority).label),5)):g("",!0),e("input",{type:"text",value:t.title,onInput:n=>V(c,{title:n.target.value}),placeholder:s(l)("preset.titlePlaceholder"),class:"book-title-input"},null,40,F),e("div",G,[e("button",{onClick:n=>V(c,{collapsed:!t.collapsed}),class:"collapse-btn icon-btn"},[i(d,{name:"chevron-down",class:P(["collapse-arrow",{collapsed:t.collapsed}])},null,8,["class"])],8,J)])]),t.collapsed?g("",!0):(m(),y("div",L,[e("div",X,[e("div",Y,[e("span",null,p(s(l)("preset.priority")),1),i(H,{class:"priority-custom-select",modelValue:String(t.priority),"onUpdate:modelValue":n=>s(r).setPriority(c,n),options:O.value,multiple:!1,labelKey:"label",valueKey:"value",textAlign:"center",selectorWidth:"70px"},null,8,["modelValue","onUpdate:modelValue","options"])]),e("div",Z,[e("button",{onClick:n=>s(r).addNewEntry(c),class:"add-entry-btn icon-btn"},[i(d,{name:"plus"})],8,ee),e("button",{onClick:n=>w("preset",c),class:"delete-btn icon-btn"},[i(d,{name:"trash"})],8,te)])]),i(s(I),{modelValue:t.entries,"onUpdate:modelValue":n=>t.entries=n,"item-key":"id",handle:".entry-drag-handle",onEnd:n=>U(c,n)},{item:_(({element:n,index:h})=>[e("div",{class:P(["entry-item",{disabled:!t.enabled}])},[e("div",le,[e("button",oe,[i(d,{name:"drag-handle"})]),e("input",{type:"text",value:n.title,onInput:u=>b(c,h,{title:u.target.value}),placeholder:s(l)("preset.entryTitlePlaceholder"),class:"entry-title-input"},null,40,ne),e("div",se,[e("button",{onClick:u=>w("entry",c,h),class:"delete-btn icon-btn"},[i(d,{name:"trash"})],8,ae),e("button",{onClick:u=>b(c,h,{collapsed:!n.collapsed}),class:"collapse-btn icon-btn"},[i(d,{name:"chevron-down",class:P(["collapse-arrow",{collapsed:n.collapsed}])},null,8,["class"])],8,ie)])]),n.collapsed?g("",!0):(m(),y("div",ce,[e("input",{type:"text",value:n.notes,onInput:u=>b(c,h,{notes:u.target.value}),placeholder:s(l)("preset.notesPlaceholder"),class:"base-input"},null,40,re),e("textarea",{value:n.content,onInput:u=>b(c,h,{content:u.target.value}),placeholder:s(l)("preset.contentPlaceholder"),class:"base-input"},null,40,de)]))],2)]),_:2},1032,["modelValue","onUpdate:modelValue","onEnd"])]))])]),_:1},8,["modelValue"]),f.value.length?g("",!0):(m(),y("div",ue,[e("p",null,p(s(l)("preset.empty")),1),e("p",null,p(s(l)("preset.emptyHint")),1)])),i(A,{visible:v.value,"onUpdate:visible":a[1]||(a[1]=t=>v.value=t),title:s(l)("preset.confirmDelete")},{footer:_(()=>[e("button",{onClick:x,class:"modal-btn cancel"},p(s(l)("cancel")),1),e("button",{onClick:M,class:"modal-btn danger"},p(s(l)("delete")),1)]),default:_(()=>[e("div",pe,p(s(l)("preset.confirmDeleteMsg")),1)]),_:1},8,["visible","title"])]),_:1},8,["title"]))}},ye=N(_e,[["__scopeId","data-v-e0e315c9"]]);export{ye as default};

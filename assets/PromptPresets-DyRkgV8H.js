import{_ as N,u as B,a as z,s as K,c as E,r as D,b as R,w as h,d as s,e as T,o as _,f as c,g as y,h as g,i as e,S as d,n as W,t as p,j as P,M as j}from"./index-PcupIFr8.js";import{M as A}from"./MultiSelect-CKv-nxaJ.js";import{d as I}from"./vuedraggable.umd-DMG2N71W.js";const H={class:"card"},q={class:"card-header"},F={class:"book-drag-handle icon-btn"},G=["value","onInput","placeholder"],J={class:"header-controls"},L=["onClick"],Q={key:0,class:"card-content"},X={class:"content-controls"},Y={class:"priority-selector"},Z={class:"card-actions"},ee=["onClick"],te=["onClick"],le={class:"entry-header"},oe={class:"entry-drag-handle icon-btn"},ne=["value","onInput","placeholder"],se={class:"entry-controls"},ae=["onClick"],ce=["onClick"],ie={key:0,class:"entry-content"},re=["value","onInput","placeholder"],de=["value","onInput","placeholder"],ue={key:0,class:"empty-state"},pe={style:{"text-align":"center","padding-bottom":"25px"}},he={__name:"PromptPresets",setup(me){const{t:l}=B(),r=z(),{sortedPresets:S}=K(r),O=E(()=>[{value:"1",label:l("preset.priorityOptions.high")},{value:"2",label:l("preset.priorityOptions.medium")},{value:"3",label:l("preset.priorityOptions.low")}]),f=o=>{switch(String(o)){case"1":return{label:l("preset.priorityOptions.high"),color:"red"};case"2":return{label:l("preset.priorityOptions.medium"),color:"blue"};case"3":return{label:l("preset.priorityOptions.low"),color:"green"};default:return{label:"",color:""}}},k=E({get:()=>S.value,set:o=>{}}),v=D(!1),C=D({type:null,presetIndex:null,entryIndex:null}),w=(o,a,t=null)=>{C.value={type:o,presetIndex:a,entryIndex:t},v.value=!0},M=()=>{const{type:o,presetIndex:a,entryIndex:t}=C.value;o==="preset"?r.deletePreset(a):o==="entry"&&r.deleteEntry(a,t),x()},x=()=>{v.value=!1,C.value={type:null,presetIndex:null,entryIndex:null}},V=(o,a)=>{r.updatePreset(o,a)},b=(o,a,t)=>{r.updateEntry(o,a,t)},U=(o,a)=>{r.reorderEntries(o,{oldIndex:a.oldIndex,newIndex:a.newIndex})},$=o=>{r.onPresetDragEnd({oldIndex:o.oldIndex,newIndex:o.newIndex})};return(o,a)=>(_(),R(T,{title:s(l)("preset.title")},{action:h(()=>[c(d,{name:"plus",onClick:s(r).addNewPreset,class:"header-action-icon"},null,8,["onClick"])]),default:h(()=>[c(s(I),{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=t=>k.value=t),"item-key":"id",handle:".book-drag-handle",onEnd:$,animation:"200","ghost-class":"ghost-card","force-fallback":!0},{item:h(({element:t,index:i})=>[e("div",H,[e("div",q,[e("button",F,[c(d,{name:"drag-handle"})]),f(t.priority).label?(_(),y("span",{key:0,style:W({color:f(t.priority).color,marginRight:"8px",fontWeight:"bold",fontSize:"1.2em"})},p(f(t.priority).label),5)):g("",!0),e("input",{type:"text",value:t.title,onInput:n=>V(i,{title:n.target.value}),placeholder:s(l)("preset.titlePlaceholder"),class:"book-title-input"},null,40,G),e("div",J,[e("button",{onClick:n=>V(i,{collapsed:!t.collapsed}),class:"collapse-btn icon-btn"},[c(d,{name:"chevron-down",class:P(["collapse-arrow",{collapsed:t.collapsed}])},null,8,["class"])],8,L)])]),t.collapsed?g("",!0):(_(),y("div",Q,[e("div",X,[e("div",Y,[e("span",null,p(s(l)("preset.priority")),1),c(A,{class:"priority-custom-select",modelValue:String(t.priority),"onUpdate:modelValue":n=>s(r).setPriority(i,n),options:O.value,multiple:!1,labelKey:"label",valueKey:"value",textAlign:"center",selectorWidth:"70px"},null,8,["modelValue","onUpdate:modelValue","options"])]),e("div",Z,[e("button",{onClick:n=>s(r).addNewEntry(i),class:"add-entry-btn icon-btn"},[c(d,{name:"plus"})],8,ee),e("button",{onClick:n=>w("preset",i),class:"delete-btn icon-btn"},[c(d,{name:"trash"})],8,te)])]),c(s(I),{modelValue:t.entries,"onUpdate:modelValue":n=>t.entries=n,"item-key":"id",handle:".entry-drag-handle",onEnd:n=>U(i,n),animation:"200","ghost-class":"ghost-entry","force-fallback":!0},{item:h(({element:n,index:m})=>[e("div",{class:P(["entry-item",{disabled:!t.enabled}])},[e("div",le,[e("button",oe,[c(d,{name:"drag-handle"})]),e("input",{type:"text",value:n.title,onInput:u=>b(i,m,{title:u.target.value}),placeholder:s(l)("preset.entryTitlePlaceholder"),class:"entry-title-input"},null,40,ne),e("div",se,[e("button",{onClick:u=>w("entry",i,m),class:"delete-btn icon-btn"},[c(d,{name:"trash"})],8,ae),e("button",{onClick:u=>b(i,m,{collapsed:!n.collapsed}),class:"collapse-btn icon-btn"},[c(d,{name:"chevron-down",class:P(["collapse-arrow",{collapsed:n.collapsed}])},null,8,["class"])],8,ce)])]),n.collapsed?g("",!0):(_(),y("div",ie,[e("input",{type:"text",value:n.notes,onInput:u=>b(i,m,{notes:u.target.value}),placeholder:s(l)("preset.notesPlaceholder"),class:"base-input"},null,40,re),e("textarea",{value:n.content,onInput:u=>b(i,m,{content:u.target.value}),placeholder:s(l)("preset.contentPlaceholder"),class:"base-input"},null,40,de)]))],2)]),_:2},1032,["modelValue","onUpdate:modelValue","onEnd"])]))])]),_:1},8,["modelValue"]),k.value.length?g("",!0):(_(),y("div",ue,[e("p",null,p(s(l)("preset.empty")),1),e("p",null,p(s(l)("preset.emptyHint")),1)])),c(j,{visible:v.value,"onUpdate:visible":a[1]||(a[1]=t=>v.value=t),title:s(l)("preset.confirmDelete")},{footer:h(()=>[e("button",{onClick:x,class:"modal-btn cancel"},p(s(l)("cancel")),1),e("button",{onClick:M,class:"modal-btn danger"},p(s(l)("delete")),1)]),default:h(()=>[e("div",pe,p(s(l)("preset.confirmDeleteMsg")),1)]),_:1},8,["visible","title"])]),_:1},8,["title"]))}},ye=N(he,[["__scopeId","data-v-13ec4c9e"]]);export{ye as default};

import{_ as Se,k as ke,q as Pe,E as Fe,O as $e,a0 as B,r as w,c as b,s as Te,a as y,e as t,f as P,z as i,b as I,n as A,y as d,C as R,F as Ie,A as Ne,v as D,x as M,I as xe,i as Ae,o as C}from"./index-vVFo7Nn2.js";import{C as N}from"./CustomSelect-ClQ8tvS_.js";const Oe={class:"app-screen active",id:"themeSettingsApp"},Ue={class:"app-header"},ze={class:"title"},Le={class:"action-btn"},Ve={class:"app-content theme-content"},je={class:"card theme-section"},Be={class:"card-content"},Re={class:"theme-item no-icon"},De={class:"item-content"},Me={class:"item-label",style:{"font-weight":"600"}},Je={class:"item-value"},Ee={key:0,class:"theme-item no-icon"},He={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},We={class:"item-label",style:{"white-space":"nowrap","margin-right":"10px"}},qe=["value"],Ge=["value","placeholder"],Qe={class:"theme-item no-icon"},Xe={class:"item-content"},Ye={class:"item-label",style:{"font-weight":"600"}},Ze={class:"item-value"},Ke={class:"card theme-section"},et={class:"card-title"},tt={class:"card-content"},st={class:"theme-item no-icon"},ot={class:"item-content"},nt={class:"wallpaper-container"},at={class:"wallpaper-col"},lt={class:"section-title-center"},it={key:0,class:"upload-hint"},rt={class:"wallpaper-col"},ct={class:"section-title-center"},dt={key:0,class:"upload-hint"},pt={class:"theme-item no-icon"},mt={class:"item-content"},ut={class:"item-label"},ht={class:"card theme-section"},ft={class:"card-title"},vt={class:"card-content"},bt={class:"theme-item no-icon"},gt={class:"item-content"},_t={class:"app-icons-grid-new"},yt=["onClick"],Ct={class:"app-icon-box"},wt=["src"],St={class:"app-name"},kt={class:"card theme-section"},Pt={class:"card-title"},Ft={class:"card-content"},$t={class:"theme-item no-icon"},Tt={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},It={class:"theme-item no-icon"},Nt={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},xt=["placeholder"],At={class:"theme-item no-icon"},Ot={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},Ut=["value"],zt=["value","placeholder"],Lt={class:"theme-item no-icon"},Vt={class:"item-content"},jt={class:"item-label"},Bt={class:"number-input"},Rt={class:"card theme-section"},Dt={class:"card-title"},Mt={class:"card-content"},Jt={class:"theme-item no-icon"},Et={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},Ht={class:"theme-item no-icon"},Wt={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},qt={class:"theme-item no-icon"},Gt={class:"item-content",style:{"flex-direction":"column","align-items":"flex-start",gap:"5px",width:"100%"}},Qt={style:{display:"flex","justify-content":"space-between",width:"100%","align-items":"center"}},Xt={class:"item-label"},Yt=["placeholder"],Zt={class:"card theme-section"},Kt={class:"card-title"},es={class:"card-content"},ts={class:"theme-item no-icon"},ss={class:"import-export-container",style:{flex:"1","justify-content":"space-around"}},os={class:"card theme-section"},ns={class:"card-content"},as={class:"theme-item no-icon"},ls={class:"theme-item no-icon"},is={class:"import-export-container",style:{flex:"1","justify-content":"space-around"}},rs={__name:"Theme",setup(cs){const{t:n}=ke(),x=Ae(),a=Pe(),F=Fe(),{themePresets:g,currentThemePreset:p,fontPresets:$,currentFontPreset:_,cssPresets:u,currentCssPreset:m,homeScreen:J}=$e(a),l=B({}),S=w(""),h=w(""),k=w(!1),f=B({title:"",bizType:"theme",onConfirm:null}),O=w(""),E=w(null),U=w(null),z=b(()=>[{key:"chat",name:n("homeScreen.apps.chat")},{key:"worldbook",name:n("homeScreen.apps.worldbook")},{key:"preset",name:n("homeScreen.apps.preset")},{key:"calendar",name:n("homeScreen.apps.calendar")},{key:"api",name:n("homeScreen.apps.apiSettings")},{key:"theme",name:n("homeScreen.apps.theme")},{key:"spy",name:n("homeScreen.apps.spy")},{key:"check",name:n("homeScreen.apps.check")}]);b(()=>{const e=O.value==="home"?n("theme.homeScreen"):n("theme.lockScreen");return n("theme.setWallpaper",{type:e})});const H=b(()=>{const e=l.fontColor;if(!e)return"#000000";if(/^#[0-9A-F]{6}$/i.test(e))return e;const s=e.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i);if(s){const o=parseInt(s[1]).toString(16).padStart(2,"0"),r=parseInt(s[2]).toString(16).padStart(2,"0"),c=parseInt(s[3]).toString(16).padStart(2,"0");return`#${o}${r}${c}`}return"#000000"}),W=b(()=>{const e=l.frameColor;if(!e)return"#f3f3f3";if(/^#[0-9A-F]{6}$/i.test(e))return e;const s=e.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i);if(s){const o=parseInt(s[1]).toString(16).padStart(2,"0"),r=parseInt(s[2]).toString(16).padStart(2,"0"),c=parseInt(s[3]).toString(16).padStart(2,"0");return`#${o}${r}${c}`}return"#f3f3f3"}),q=b(()=>Object.keys($.value||{}).map(e=>({value:e,label:e}))),G=b(()=>Object.keys(g.value||{}).map(e=>({value:e,label:e}))),Q=b(()=>Object.keys(u.value||{}).map(e=>({value:e,label:e}))),X=b(()=>[{value:1,label:"屏幕一"},{value:2,label:"屏幕二"}]);function Y(e){a.setHomeScreen(e)}Te(()=>{T()});function T(){const e=n("theme.defaultTheme"),s=n("theme.defaultCss");g.value||(g.value={[e]:{bg:"",lockbg:"",appIcons:{},showFrame:!0,frameColor:"#f3f3f3",fontColor:"#1f1f1f",appLabelFontSize:10}});const o=g.value[p.value];if(o)Object.assign(l,JSON.parse(JSON.stringify(o)));else{p.value=e;const r=g.value[e]||{};Object.assign(l,JSON.parse(JSON.stringify(r)))}l.appIcons||(l.appIcons={}),l.appLabelFontSize||(l.appLabelFontSize=10),l.frameColor||(l.frameColor="#f3f3f3"),u.value||(u.value={[s]:""}),h.value=u.value[m.value]||""}const Z=()=>{x.options.history.state.back?x.back():x.push("/")};function L(e){const s=l[e]===!1;l[e]=s,(e==="showFrame"||e==="showStatusBar")&&a.updateThemeSetting(e,s)}function V(e){O.value=e;const s=n(e==="home"?"theme.homeScreen":"theme.lockScreen");f.title=n("theme.setWallpaper",{type:s}),f.onConfirm=o=>{const r=(o.type==="url",o.content);e==="home"?l.bg=r:e==="lock"&&(l.lockbg=r)},k.value=!0}function K(e){var o;E.value=e;const s=((o=z.value.find(r=>r.key===e))==null?void 0:o.name)||"";f.title=n("theme.setAppIcon",{appName:s}),f.onConfirm=r=>{const c=(r.type==="url",r.content);ee(e,c)},k.value=!0}function ee(e,s){const o={...l.appIcons||{}};o[e]=s,l.appIcons=o}function te(e){f.onConfirm&&f.onConfirm(e),k.value=!1}function se(e){a.switchFontPreset(e)}function oe(){const e=prompt(n("theme.prompt.enterFontPresetName"));if(e){const s=S.value.trim();if(s)try{new URL(s),a.saveFontPreset(e,s),a.showToast(n("theme.toast.saveSuccess"))}catch{a.showToast(n("theme.toast.invalidUrl"),"error")}else a.showToast(n("theme.toast.enterUrl"),"info")}}function ne(){a.showConfirm(n("theme.confirm.deleteFontPreset"),n("theme.confirm.deleteFontPresetMsg",{presetName:_.value}),()=>{const e=_.value;a.deleteFontPreset(e),_.value===e&&(_.value=n("theme.defaultTheme")),S.value=$.value[_.value]||""})}function ae(){const e=S.value.trim();if(e)try{new URL(e),a.applyFont(e),a.showToast(n("theme.toast.fontApplied"),"info")}catch{a.showToast(n("theme.toast.invalidUrl"),"error")}}function le(e){/^#[0-9A-F]{6}$/i.test(e)&&(l.fontColor=e,a.applyFontColor(e))}function ie(e){const s=/^#([0-9A-F]{3}){1,2}$/i.test(e)||/^#([0-9A-F]{4}){1,2}$/i.test(e),o=/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(e),r=/^rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d\.]+\s*\)$/i.test(e);(s||o||r)&&(l.fontColor=e,a.applyFontColor(e))}function re(){a.applyFontColor(l.fontColor),a.showToast(n("theme.toast.colorApplied"),"info")}function ce(e){/^#[0-9A-F]{6}$/i.test(e)&&(l.frameColor=e,a.applyFrameColor(e))}function de(e){const s=/^#([0-9A-F]{3}){1,2}$/i.test(e)||/^#([0-9A-F]{4}){1,2}$/i.test(e),o=/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(e),r=/^rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d\.]+\s*\)$/i.test(e);(s||o||r)&&(l.frameColor=e,a.applyFrameColor(e))}function pe(){a.applyFrameColor(l.frameColor),a.showToast(n("theme.toast.colorApplied"),"info")}function j(e){let s=l.appLabelFontSize||10;s+=e,s<8&&(s=8),s>16&&(s=16),l.appLabelFontSize=s,a.applyAppLabelFontSize(s)}function me(e){confirm(n("theme.confirm.switchTheme"))&&(a.switchThemePreset(e),T())}function ue(){const e=prompt(n("theme.prompt.enterThemePresetName"));if(e){const s=JSON.parse(JSON.stringify(l));s.bg=s.bg||"",s.lockbg=s.lockbg||"",s.appIcons=s.appIcons||{},s.fontColor=s.fontColor||"#1f1f1f",s.frameColor=s.frameColor||"#f3f3f3",s.appLabelFontSize=s.appLabelFontSize||10,a.saveThemePreset(e,s),a.showToast(n("theme.toast.saveSuccess"))}}function he(){a.showConfirm(n("theme.confirm.deleteThemePreset"),n("theme.confirm.deleteThemePresetMsg",{presetName:p.value}),()=>{const e=p.value;a.deleteThemePreset(e),p.value===e&&(p.value=n("theme.defaultTheme")),T()})}function fe(e){a.switchCssPreset(e),h.value=u.value[e]||""}function ve(){const e=prompt(n("theme.prompt.enterCssPresetName"));if(e){const s=h.value.trim();s?s.includes("{")&&s.includes("}")?(a.saveCssPreset(e,s),a.showToast(n("theme.toast.saveSuccess"))):a.showToast(n("theme.toast.invalidCss"),"error"):a.showToast(n("theme.toast.enterCss"),"info")}}function be(){a.showConfirm(n("theme.confirm.deleteCssPreset"),n("theme.confirm.deleteCssPresetMsg",{presetName:m.value}),()=>{const e=m.value;a.deleteCssPreset(e),m.value===e&&(m.value=n("theme.defaultCss")),h.value=u.value[m.value]||""})}function ge(){const e=h.value.trim();e?e.includes("{")&&e.includes("}")?(a.applyCss(e),a.showToast(n("theme.toast.cssApplied"),"info")):a.showToast(n("theme.toast.invalidCss"),"error"):(a.applyCss(""),a.showToast(n("theme.toast.cssCleared"),"info"))}function _e(){const e={themePresets:g.value,currentThemePreset:p.value,fontPresets:$.value,currentFontPreset:_.value,cssPresets:u.value,currentCssPreset:m.value,exportDate:new Date().toISOString()},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),o=URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.download=`ai_phone_theme_config_${new Date().toISOString().slice(0,10)}.json`,r.click(),URL.revokeObjectURL(o)}function ye(){U.value.click()}function Ce(e){const s=e.target.files[0];if(!s)return;const o=new FileReader;o.onload=r=>{try{const c=JSON.parse(r.target.result);if(c.themePresets)for(const v in c.themePresets)g.value[v]=c.themePresets[v];if(c.fontPresets)for(const v in c.fontPresets)$.value[v]=c.fontPresets[v];if(c.cssPresets)for(const v in c.cssPresets)u.value[v]=c.cssPresets[v];confirm(n("theme.confirm.importSuccess"))&&(c.currentThemePreset&&a.switchThemePreset(c.currentThemePreset),c.currentFontPreset&&a.switchFontPreset(c.currentFontPreset),c.currentCssPreset&&a.switchCssPreset(c.currentCssPreset)),T(),a.showToast(n("theme.toast.importSuccess"),"success")}catch(c){a.showToast(n("theme.toast.importFailed"),"error"),console.error(c)}},o.readAsText(s),e.target.value=""}function we(){const e={bg:l.bg||"",lockbg:l.lockbg||"",appIcons:l.appIcons||{},showFrame:l.showFrame!==!1,frameColor:l.frameColor||"#f3f3f3",showStatusBar:l.showStatusBar!==!1,fontColor:l.fontColor||"#1f1f1f",appLabelFontSize:l.appLabelFontSize||10};a.saveThemePreset(p.value,e),a.saveCssPreset(m.value,h.value),a.initTheme(),a.showToast(n("theme.toast.saveSuccess"))}return(e,s)=>(C(),y("div",Oe,[t("div",Ue,[t("div",{class:"back-btn",onClick:Z},[...s[15]||(s[15]=[t("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])]),t("div",ze,i(e.$t("theme.title")),1),t("div",Le,[t("button",{class:"header-save-btn",onClick:we},i(e.$t("save")),1)])]),t("div",Ve,[t("div",je,[t("div",Be,[t("div",Re,[t("div",De,[t("div",Me,i(e.$t("theme.showFrame")),1),t("div",Je,i(e.$t("theme.showFrameDesc")),1)]),t("div",{class:A(["toggle-switch",{active:l.showFrame!==!1}]),onClick:s[0]||(s[0]=o=>L("showFrame"))},null,2)]),l.showFrame!==!1?(C(),y("div",Ee,[t("div",He,[t("div",We,i(e.$t("theme.frameColor")),1),t("input",{type:"color",class:"color-picker-input",value:W.value,onInput:s[1]||(s[1]=o=>ce(o.target.value))},null,40,qe),t("input",{type:"text",class:"base-input",style:{flex:"1"},value:l.frameColor,onInput:s[2]||(s[2]=o=>de(o.target.value)),placeholder:d(n)("theme.frameColorPlaceholder")},null,40,Ge),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:pe},i(e.$t("confirm")),1)])])):I("",!0),t("div",Qe,[t("div",Xe,[t("div",Ye,i(e.$t("theme.showStatusBar")),1),t("div",Ze,i(e.$t("theme.showStatusBarDesc")),1)]),t("div",{class:A(["toggle-switch",{active:l.showStatusBar!==!1}]),onClick:s[3]||(s[3]=o=>L("showStatusBar"))},null,2)])])]),t("div",Ke,[t("div",et,i(e.$t("theme.wallpaper")),1),t("div",tt,[t("div",st,[t("div",ot,[t("div",nt,[t("div",at,[t("div",lt,i(e.$t("theme.homeScreen")),1),t("div",{class:"wallpaper-preview",style:R(l.bg?{backgroundImage:`url('${l.bg}')`}:{}),onClick:s[4]||(s[4]=o=>V("home"))},[l.bg?I("",!0):(C(),y("span",it,i(e.$t("theme.uploadHint")),1))],4)]),t("div",rt,[t("div",ct,i(e.$t("theme.lockScreen")),1),t("div",{class:"wallpaper-preview",style:R(l.lockbg?{backgroundImage:`url('${l.lockbg}')`}:{}),onClick:s[5]||(s[5]=o=>V("lock"))},[l.lockbg?I("",!0):(C(),y("span",dt,i(e.$t("theme.uploadHint")),1))],4)])])])]),t("div",pt,[t("div",mt,[t("div",ut,i(e.$t("theme.homeScreenStyle")),1)]),P(N,{options:X.value,modelValue:d(J),"onUpdate:modelValue":Y,textAlign:"left"},null,8,["options","modelValue"])])])]),t("div",ht,[t("div",ft,i(e.$t("theme.appIcons")),1),t("div",vt,[t("div",bt,[t("div",gt,[t("div",_t,[(C(!0),y(Ie,null,Ne(z.value,o=>(C(),y("div",{key:o.key,class:"app-icon-item",onClick:r=>K(o.key)},[t("div",Ct,[l.appIcons&&l.appIcons[o.key]?(C(),y("img",{key:0,src:l.appIcons[o.key]},null,8,wt)):I("",!0)]),t("span",St,i(o.name),1)],8,yt))),128))])])])])]),t("div",kt,[t("div",Pt,i(e.$t("theme.fontSettings")),1),t("div",Ft,[t("div",$t,[t("div",Tt,[P(N,{options:q.value,modelValue:d(_),"onUpdate:modelValue":se,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:oe},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:ne},i(e.$t("delete")),1)])]),t("div",It,[t("div",Nt,[D(t("input",{type:"text",class:"base-input",style:{flex:"1"},"onUpdate:modelValue":s[6]||(s[6]=o=>S.value=o),placeholder:d(n)("theme.fontUrlPlaceholder")},null,8,xt),[[M,S.value]]),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:ae},i(e.$t("confirm")),1)])]),t("div",At,[t("div",Ot,[t("input",{type:"color",class:"color-picker-input",value:H.value,onInput:s[7]||(s[7]=o=>le(o.target.value))},null,40,Ut),t("input",{type:"text",class:"base-input",style:{flex:"1"},value:l.fontColor,onInput:s[8]||(s[8]=o=>ie(o.target.value)),placeholder:d(n)("theme.fontColorPlaceholder")},null,40,zt),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:re},i(e.$t("confirm")),1)])]),t("div",Lt,[t("div",Vt,[t("div",jt,i(e.$t("theme.appNameFontSize")),1)]),t("div",Bt,[t("button",{onClick:s[9]||(s[9]=o=>j(-1))},"-"),t("span",null,i(l.appLabelFontSize||10)+"px",1),t("button",{onClick:s[10]||(s[10]=o=>j(1))},"+")])])])]),t("div",Rt,[t("div",Dt,i(e.$t("theme.themePresets")),1),t("div",Mt,[t("div",Jt,[t("div",Et,[P(N,{options:G.value,modelValue:d(p),"onUpdate:modelValue":me,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:ue},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:he},i(e.$t("delete")),1)])]),t("div",Ht,[t("div",Wt,[P(N,{options:Q.value,modelValue:d(m),"onUpdate:modelValue":fe,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:ve},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:be},i(e.$t("delete")),1)])]),t("div",qt,[t("div",Gt,[t("div",Qt,[t("div",Xt,i(e.$t("theme.globalCss")),1),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:ge},i(e.$t("confirm")),1)]),D(t("textarea",{class:"base-input","onUpdate:modelValue":s[11]||(s[11]=o=>h.value=o),placeholder:d(n)("theme.cssPlaceholder"),style:{width:"100%","margin-top":"10px"}},null,8,Yt),[[M,h.value]])])])])]),t("div",Zt,[t("div",Kt,i(e.$t("theme.importExport")),1),t("div",es,[t("div",ts,[t("div",ss,[t("button",{class:"btn btn-secondary big-btn",onClick:_e},i(e.$t("theme.exportPresets")),1),t("button",{class:"btn btn-secondary big-btn",onClick:ye},i(e.$t("theme.importPresets")),1),t("input",{type:"file",ref_key:"importInput",ref:U,class:"hidden-input",accept:".json",onChange:Ce},null,544)])])])]),t("div",os,[s[17]||(s[17]=t("div",{class:"card-title"},"通知测试",-1)),t("div",ns,[t("div",as,[s[16]||(s[16]=t("div",{class:"item-content"},[t("div",{class:"item-label",style:{"font-weight":"600"}},"桌面通知"),t("div",{class:"item-value"},"开启后，应用在后台时也能收到消息提醒")],-1)),t("div",{class:A(["toggle-switch",{active:d(F).desktopNotificationsEnabled}]),onClick:s[12]||(s[12]=o=>d(F).desktopNotificationsEnabled=!d(F).desktopNotificationsEnabled)},null,2)]),t("div",ls,[t("div",is,[t("button",{class:"btn btn-secondary big-btn",onClick:s[13]||(s[13]=o=>d(F).triggerNotification("测试通知","这是一条测试通知。"))},"发送测试通知")])])])])]),P(xe,{visible:k.value,"onUpdate:visible":s[14]||(s[14]=o=>k.value=o),title:f.title,bizType:f.bizType,type:"basic",onSendImage:te},null,8,["visible","title","bizType"])]))}},ms=Se(rs,[["__scopeId","data-v-82a6b528"]]);export{ms as default};

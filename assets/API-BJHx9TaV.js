import{cc as ce,r as v,cd as E,_ as de,k as pe,H as ue,N as ve,m as be,q as he,s as me,c as L,t as N,d as ge,w as D,y as s,a2 as ke,o as g,e,f as O,z as l,v as C,x as B,a as k,b as P,F as V,A as z,b$ as fe,n as A,M as J}from"./index-Brb8hvIH.js";import{C as q}from"./CustomSelect-NuvLmx4r.js";const we=ce("backup",()=>{const I=v(""),o=v(""),d=v(!1),m=v(null);function b(r={chat:!0,characters:!0,settings:!0,appearance:!0,worldbook:!0}){const i={},h=localStorage.getItem("aiPhoneSingleChatData");if(h)try{const p=E.decompressFromUTF16(h),c=JSON.parse(p||h),n={};let f=!1;if(r.chat&&(n.messages=c.messages,f=!0),r.characters&&(n.characters=c.characters,n.userPersonas=c.userPersonas,n.favorites=c.favorites,f=!0),r.appearance&&(n.bubblePresets=c.bubblePresets,n.stickers=c.stickers,f=!0),f){const _=JSON.stringify(n),w=E.compressToUTF16(_);i.aiPhoneSingleChatData=w}}catch(p){console.error("Error processing single chat data for backup",p)}if(r.chat){const p=localStorage.getItem("aiPhoneMomentsData");p&&(i.aiPhoneMomentsData=p)}return r.settings&&["api_presets","api_activePresetName","api_imageHostProvider","api_imgbbApiKey","api_catboxUserHash","aiPhoneGlobalBackgroundActivity","aiPhoneGlobalProactiveScope","aiPhoneGlobalProactiveInterval","aiPhoneGlobalProactiveCooldown","aiPhoneGlobalProactiveDailyLimit","aiPhoneGlobalTriggerMode","aiPhoneGlobalProactiveIdleTime"].forEach(c=>{const n=localStorage.getItem(c);n!==null&&(i[c]=n)}),r.appearance&&["aiPhoneThemePresets","aiPhoneCurrentThemePreset","aiPhoneFontPresets","aiPhoneCurrentFontPreset","aiPhoneCssPresets","aiPhoneCurrentCssPreset"].forEach(c=>{const n=localStorage.getItem(c);n!==null&&(i[c]=n)}),r.worldbook&&["worldBooks","worldBookNextId"].forEach(c=>{const n=localStorage.getItem(c);n!==null&&(i[c]=n)}),JSON.stringify(i,null,2)}async function j(){if(!I.value){alert("请先设置 GitHub Token！");return}try{const r=await fetch("https://api.github.com/user/repos",{method:"POST",headers:{Authorization:`token ${I.value}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify({name:"phone-backup",private:!0,description:"Backup for Phone Vue App"})});if(r.ok){const i=await r.json();o.value=i.full_name,alert(`仓库 ${i.full_name} 创建成功！即将开始备份...`),await S()}else{const i=await r.json();if(i.errors&&i.errors[0].message==="name already exists on this account"){const h=await fetch("https://api.github.com/user",{headers:{Authorization:`token ${I.value}`}});if(h.ok){const p=await h.json();o.value=`${p.login}/phone-backup`,alert(`仓库已存在，已自动关联到 ${o.value}。即将开始备份...`),await S();return}}alert(`创建仓库失败: ${i.message}`)}}catch(r){console.error("Create repo failed:",r),alert(`创建仓库出错: ${r.message}`)}}async function S(){if(!I.value||!o.value){alert("请先设置 GitHub Token 和仓库地址！");return}if(d.value){alert("正在备份中，请稍候...");return}d.value=!0,alert("开始备份...");try{const r=b(),i="phone_backup.json",[h,p]=o.value.split("/"),c=`https://api.github.com/repos/${h}/${p}/contents/${i}`;let n;try{const x=await fetch(c,{headers:{Authorization:`token ${I.value}`,Accept:"application/vnd.github.v3+json"}});x.ok&&(n=(await x.json()).sha)}catch{}const _={message:`Backup from phone-vue-app: ${new Date().toISOString()}`,content:btoa(unescape(encodeURIComponent(r))),sha:n},w=await fetch(c,{method:"PUT",headers:{Authorization:`token ${I.value}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(_)});if(w.ok)m.value=new Date,alert("备份成功！");else{const x=await w.json();console.error("GitHub API Error:",x),alert(`备份失败: ${x.message}`)}}catch(r){console.error("Backup to GitHub failed:",r),alert(`备份过程中发生错误: ${r.message}`)}finally{d.value=!1}}async function T(){alert("从 GitHub 恢复的功能尚未实现。")}function U(r){try{const i=b(r),h=new Blob([i],{type:"application/json"}),p=URL.createObjectURL(h),c=document.createElement("a");c.href=p,c.download=`phone_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(p),alert("备份文件已开始下载！")}catch(i){console.error("Export backup failed:",i),alert(`导出备份文件时出错: ${i.message}`)}}function $(){const r=document.createElement("input");r.type="file",r.accept="application/json",r.onchange=i=>{const h=i.target.files[0];if(!h)return;const p=new FileReader;p.onload=c=>{try{const n=JSON.parse(c.target.result);if(confirm("这将覆盖所有当前数据，确定要导入吗？")){localStorage.clear();for(const f in n)Object.hasOwnProperty.call(n,f)&&localStorage.setItem(f,n[f]);alert("数据导入成功！请刷新页面以应用更改。")}}catch(n){console.error("Import backup failed:",n),alert(`导入失败，请确保文件格式正确: ${n.message}`)}},p.readAsText(h)},r.click()}return{githubToken:I,githubRepo:o,isBackingUp:d,lastBackupTime:m,backupToGitHub:S,restoreFromGitHub:T,exportBackupFile:U,importBackupFile:$,createBackupRepo:j}}),ye={class:"card"},_e={class:"card-title"},xe={class:"card-content"},Pe={class:"api-item-row"},Ce={style:{flex:"1","min-width":"0"}},Se={class:"api-item-col"},Be={class:"form-label",for:"api-url"},Ae=["placeholder"],Te={class:"api-item-col"},Ue={class:"form-label",for:"api-key"},Ie=["placeholder"],$e={class:"api-item-row"},He={class:"list-item-title",style:{"font-weight":"normal","white-space":"nowrap"}},De={style:{flex:"1",display:"flex",gap:"10px","align-items":"center","min-width":"0"}},je={style:{flex:"1","min-width":"0",position:"relative"}},Ge={key:0,value:"",disabled:""},Me=["value"],Ne={class:"card"},Fe={class:"card-title"},Re={class:"card-title-note",style:{padding:"0 16px 10px","margin-top":"-10px",color:"var(--danger-color)"}},Oe={class:"card-content"},Ve={class:"api-item-row"},Ke={class:"list-item-content"},Ee={class:"list-item-title"},Le={class:"list-item-subtitle"},ze={class:"api-item-row"},Je={class:"list-item-content"},qe={class:"list-item-title"},We={class:"api-item-row"},Ze={class:"list-item-content"},Qe={class:"list-item-title"},Xe={class:"api-item-row"},Ye={class:"list-item-content"},et={class:"list-item-title"},tt={class:"api-item-row"},ot={class:"list-item-content"},st={class:"list-item-title"},at={class:"api-item-row"},lt={class:"list-item-content"},it={class:"list-item-title"},nt={class:"list-item-subtitle"},rt={class:"mode-selector"},ct={key:0,class:"api-item-row"},dt={class:"list-item-content"},pt={class:"list-item-title"},ut={class:"list-item-subtitle"},vt={class:"card"},bt={class:"card-title"},ht={class:"card-content"},mt={class:"api-item-col"},gt={class:"form-label",for:"github-token"},kt={class:"input-hint"},ft={style:{display:"flex",gap:"10px"}},wt=["placeholder"],yt={class:"api-item-col"},_t={class:"form-label",for:"github-repo"},xt={style:{display:"flex",gap:"10px"}},Pt=["placeholder"],Ct=["disabled"],St={class:"api-item-row"},Bt=["disabled"],At={key:0,style:{"font-size":"12px",color:"var(--text-tertiary)","margin-top":"10px"}},Tt={class:"card"},Ut={class:"card-title"},It={class:"card-content"},$t={class:"api-item-row"},Ht={class:"list-item-content",style:{flex:"1","min-width":"0"}},Dt={class:"list-item-title"},jt={class:"list-item-subtitle"},Gt={style:{width:"120px","flex-shrink":"0"}},Mt={class:"api-item-col"},Nt={class:"form-label",for:"imgbb-api-key"},Ft={class:"input-hint"},Rt={style:{display:"flex",gap:"10px"}},Ot=["placeholder"],Vt={class:"api-item-col"},Kt={class:"form-label",for:"catbox-hash"},Et={class:"input-hint"},Lt={style:{display:"flex",gap:"10px"}},zt=["placeholder"],Jt={class:"card"},qt={class:"card-title"},Wt={class:"card-content"},Zt={style:{"font-size":"13px",color:"var(--text-tertiary)","margin-bottom":"15px"}},Qt={class:"api-item-row",style:{"border-bottom":"none","padding-bottom":"0"}},Xt={class:"scope-list"},Yt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},eo={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},to={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},oo={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},so={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},ao={class:"scope-list",style:{"max-height":"300px","overflow-y":"auto"}},lo={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},io={class:"scope-name"},no=["onClick"],ro={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},co={class:"scope-name"},po={__name:"API",setup(I){const{t:o}=pe(),d=ue(),m=ve(),b=we(),j=be(),S=he(),T=v(""),U=v(""),$=v(""),r=v(!1),i=v([]),h=v(5),p=v(30),c=v(10),n=v("always"),f=v(15),_=v(""),w=v(""),x=v("catbox"),H=v(""),G=v(""),W=v([{value:"catbox",label:"Catbox"},{value:"imgbb",label:"ImgBB"}]);me(()=>{r.value=m.globalBackgroundActivity,i.value=[...m.globalProactiveScope||[]],h.value=m.globalProactiveInterval,p.value=m.globalProactiveCooldown,c.value=m.globalProactiveDailyLimit,n.value=m.globalTriggerMode,f.value=m.globalProactiveIdleTime,_.value=b.githubToken,w.value=b.githubRepo,x.value=d.imageHostProvider,H.value=d.imgbbApiKey,G.value=d.catboxUserHash});const Z=L(()=>d.presets.find(u=>u.name===d.activePresetName)||null);N(Z,u=>{u&&(T.value=u.apiKey,U.value=u.apiUrl,$.value=u.model)},{immediate:!0,deep:!0}),N([T,U,$],()=>{d.activePresetName&&d.addPreset(d.activePresetName,{apiKey:T.value,apiUrl:U.value,model:$.value})}),N([r,i,h,p,c,n,f],()=>{m.globalBackgroundActivity=r.value,m.globalProactiveScope=i.value,m.globalProactiveInterval=h.value,m.globalProactiveCooldown=p.value,m.globalProactiveDailyLimit=c.value,m.globalTriggerMode=n.value,m.globalProactiveIdleTime=f.value},{deep:!0}),N([_,w],()=>{b.githubToken=_.value,b.githubRepo=w.value}),N([x,H,G],()=>{d.imageHostProvider=x.value,d.imgbbApiKey=H.value,d.catboxUserHash=G.value},{deep:!0});function Q(){S.showToast(o("api.toast.settingsSaved"))}function X(){S.showInput(o("api.prompt.saveAsPreset"),"",u=>{u&&(d.addPreset(u,{apiKey:T.value,apiUrl:U.value,model:$.value}),S.showToast(o("api.toast.presetSaved",{name:u})))},o("api.prompt.enterPresetName"))}function Y(){S.showConfirm(o("api.confirm.deletePreset"),o("api.confirm.deletePresetMsg",{name:d.activePresetName}),()=>{d.deletePreset(d.activePresetName),S.showToast(o("api.toast.presetDeleted"))})}async function ee(){const u={apiUrl:U.value,apiKey:T.value};await d.fetchModels(u)}const te=async()=>{b.githubToken=_.value,await b.createBackupRepo(),w.value=b.githubRepo},oe=async()=>{b.githubToken=_.value,b.githubRepo=w.value,await b.backupToGitHub()};function se(){window.open("https://github.com/settings/tokens/new?scopes=repo&description=Phone%20App%20Backup","_blank")}function ae(){window.open("https://api.imgbb.com/","_blank")}function le(){window.open("https://catbox.moe/user/","_blank")}function ie(){S.showConfirm("确认清除所有数据？","此操作将永久删除所有本地存储的数据（包括聊天记录、API设置、背景图片等）。应用将重置为初始状态。请确保您已备份重要数据。",()=>{localStorage.clear(),window.location.reload()},{messageStyle:{color:"#FF3B30"},confirmText:"清除"})}const F=v(!1),y=v({chat:!0,characters:!0,settings:!0,appearance:!0,worldbook:!0});function M(u){y.value[u]=!y.value[u]}function ne(){b.exportBackupFile(y.value),F.value=!1}const R=v(!1),re=L(()=>{const u=i.value||[];return u.includes("all")?o("api.scopeAll"):u.length===0?o("api.scopeNone"):o("api.scopeSelected",{count:u.length})});function K(u){const t=i.value;if(u==="all")t.includes("all")?i.value=[]:i.value=["all"];else if(t.includes("all"))i.value=[u];else{const a=t.indexOf(u);a>-1?t.splice(a,1):t.push(u),j.characters.length>0&&t.length===j.characters.length&&(i.value=["all"])}}return(u,t)=>(g(),ge(ke,{title:s(o)("api.title")},{action:D(()=>[e("button",{class:"header-save-btn",onClick:Q},l(s(o)("save")),1)]),default:D(()=>[e("div",ye,[e("div",_e,l(s(o)("api.globalConfig")),1),e("div",xe,[e("div",Pe,[e("div",Ce,[O(q,{"model-value":s(d).activePresetName,options:s(d).presets.map(a=>({value:a.name,label:a.name})),"onUpdate:modelValue":t[0]||(t[0]=a=>s(d).switchPreset(a)),textAlign:"left",style:{width:"100%"}},null,8,["model-value","options"])]),e("button",{class:"btn btn-secondary btn-sm",onClick:X},l(s(o)("api.saveAs")),1),e("button",{class:"btn btn-danger-light btn-sm",onClick:Y},l(s(o)("delete")),1)]),e("div",Se,[e("label",Be,l(s(o)("api.apiUrl")),1),C(e("input",{type:"text",id:"api-url",class:"base-input","onUpdate:modelValue":t[1]||(t[1]=a=>U.value=a),placeholder:s(o)("api.apiUrlPlaceholder")},null,8,Ae),[[B,U.value]])]),e("div",Te,[e("label",Ue,l(s(o)("api.apiKey")),1),C(e("input",{type:"password",id:"api-key",class:"base-input","onUpdate:modelValue":t[2]||(t[2]=a=>T.value=a),placeholder:s(o)("api.apiKeyPlaceholder")},null,8,Ie),[[B,T.value]])]),e("div",$e,[e("div",He,l(s(o)("api.model")),1),e("div",De,[e("div",je,[C(e("select",{class:"native-select","onUpdate:modelValue":t[3]||(t[3]=a=>$.value=a)},[s(d).models.length===0?(g(),k("option",Ge,l(s(o)("api.modelPlaceholder")),1)):P("",!0),(g(!0),k(V,null,z(s(d).models,a=>(g(),k("option",{key:a,value:a},l(a),9,Me))),128))],512),[[fe,$.value]]),t[29]||(t[29]=e("div",{class:"select-arrow"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))]),e("button",{class:"btn btn-secondary btn-sm",onClick:ee,style:{"white-space":"nowrap"}},l(s(o)("api.fetch")),1)])])])]),e("div",Ne,[e("div",Fe,l(s(o)("api.backgroundActivity")),1),e("div",Re,l(s(o)("api.backgroundActivityWarning")),1),e("div",Oe,[e("div",Ve,[e("div",Ke,[e("div",Ee,l(s(o)("api.proactiveMessages")),1),e("div",Le,l(s(o)("api.proactiveMessagesDesc")),1)]),e("div",{class:A(["toggle-switch",{active:r.value}]),onClick:t[4]||(t[4]=a=>r.value=!r.value)},null,2)]),r.value?(g(),k(V,{key:0},[e("div",ze,[e("div",Je,[e("div",qe,l(s(o)("api.scope")),1)]),e("div",{class:"scope-selector",onClick:t[5]||(t[5]=a=>R.value=!0)},[e("span",null,l(re.value),1),t[30]||(t[30]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"9 18 15 12 9 6"})],-1))])]),e("div",We,[e("div",Ze,[e("div",Qe,l(s(o)("api.interval")),1)]),C(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=a=>h.value=a),class:"base-input base-input-short",placeholder:"5"},null,512),[[B,h.value,void 0,{number:!0}]])]),e("div",Xe,[e("div",Ye,[e("div",et,l(s(o)("api.cooldown")),1)]),C(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=a=>p.value=a),class:"base-input base-input-short",placeholder:"30"},null,512),[[B,p.value,void 0,{number:!0}]])]),e("div",tt,[e("div",ot,[e("div",st,l(s(o)("api.dailyLimit")),1)]),C(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=a=>c.value=a),class:"base-input base-input-short",placeholder:"10"},null,512),[[B,c.value,void 0,{number:!0}]])]),e("div",at,[e("div",lt,[e("div",it,l(s(o)("api.triggerMode")),1),e("div",nt,l(s(o)("api.triggerModeIdleHint")),1)]),e("div",rt,[e("div",{class:A(["mode-option",{active:n.value==="idle"}]),onClick:t[9]||(t[9]=a=>n.value="idle")},l(s(o)("api.triggerModeIdle")),3),e("div",{class:A(["mode-option",{active:n.value==="always"}]),onClick:t[10]||(t[10]=a=>n.value="always")},l(s(o)("api.triggerModeAlways")),3)])]),n.value==="idle"?(g(),k("div",ct,[e("div",dt,[e("div",pt,l(s(o)("api.idleTime")),1),e("div",ut,l(s(o)("api.idleTimeDesc")),1)]),C(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=a=>f.value=a),class:"base-input base-input-short",placeholder:"15"},null,512),[[B,f.value,void 0,{number:!0}]])])):P("",!0)],64)):P("",!0)])]),e("div",vt,[e("div",bt,l(s(o)("api.githubBackup")),1),e("div",ht,[e("div",mt,[e("label",gt,l(s(o)("api.githubToken")),1),e("div",kt,l(s(o)("api.githubTokenHint")),1),e("div",ft,[C(e("input",{type:"password",id:"github-token",class:"base-input small-placeholder","onUpdate:modelValue":t[12]||(t[12]=a=>_.value=a),placeholder:s(o)("api.githubTokenPlaceholder"),style:{flex:"1"}},null,8,wt),[[B,_.value]]),e("button",{class:"btn btn-secondary btn-sm",onClick:se},l(s(o)("api.getToken")),1)])]),e("div",yt,[e("label",_t,l(s(o)("api.repoAddress")),1),e("div",xt,[C(e("input",{type:"text",id:"github-repo",class:"base-input","onUpdate:modelValue":t[13]||(t[13]=a=>w.value=a),placeholder:s(o)("api.repoAddressPlaceholder"),style:{flex:"1"}},null,8,Pt),[[B,w.value]]),w.value?P("",!0):(g(),k("button",{key:0,class:"btn btn-secondary btn-sm",onClick:te,disabled:!_.value},l(s(o)("api.createRepo")),9,Ct))])]),e("div",St,[e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:oe,disabled:s(b).isBackingUp},l(s(b).isBackingUp?s(o)("api.backingUp"):s(o)("api.backupNow")),9,Bt),e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:t[14]||(t[14]=(...a)=>s(b).restoreFromGitHub&&s(b).restoreFromGitHub(...a))},l(s(o)("api.restoreBackup")),1)]),s(b).lastBackupTime?(g(),k("p",At,l(s(o)("api.lastBackup"))+" "+l(new Date(s(b).lastBackupTime).toLocaleString()),1)):P("",!0)])]),e("div",Tt,[e("div",Ut,l(s(o)("api.imageHost")),1),e("div",It,[e("div",$t,[e("div",Ht,[e("div",Dt,l(s(o)("api.defaultImageHost")),1),e("div",jt,l(s(o)("api.defaultImageHostDesc")),1)]),e("div",Gt,[O(q,{"model-value":x.value,options:W.value,"onUpdate:modelValue":t[15]||(t[15]=a=>x.value=a),textAlign:"right"},null,8,["model-value","options"])])]),e("div",Mt,[e("label",Nt,l(s(o)("api.imgbbApiKey")),1),e("div",Ft,l(s(o)("api.imgbbApiKeyHint")),1),e("div",Rt,[C(e("input",{type:"password",id:"imgbb-api-key",class:"base-input small-placeholder","onUpdate:modelValue":t[16]||(t[16]=a=>H.value=a),placeholder:s(o)("api.imgbbApiKeyPlaceholder"),style:{flex:"1"}},null,8,Ot),[[B,H.value]]),e("button",{class:"btn btn-secondary btn-sm",onClick:ae},l(s(o)("api.getImgbbApiKey")),1)])]),e("div",Vt,[e("label",Kt,l(s(o)("api.catboxUserHash")),1),e("div",Et,l(s(o)("api.catboxUserHashHint")),1),e("div",Lt,[C(e("input",{type:"text",id:"catbox-hash",class:"base-input small-placeholder","onUpdate:modelValue":t[17]||(t[17]=a=>G.value=a),placeholder:s(o)("api.catboxUserHashPlaceholder"),style:{flex:"1"}},null,8,zt),[[B,G.value]]),e("button",{class:"btn btn-secondary btn-sm",onClick:le},l(s(o)("api.getCatboxUserHash")),1)])])])]),e("div",Jt,[e("div",qt,l(s(o)("api.dataBackup")),1),e("div",Wt,[e("p",Zt,l(s(o)("api.dataBackupDesc")),1),e("div",Qt,[e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:t[18]||(t[18]=a=>F.value=!0)},l(s(o)("api.exportBackupFile")),1),e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:t[19]||(t[19]=(...a)=>s(b).importBackupFile&&s(b).importBackupFile(...a))},l(s(o)("api.importBackupFile")),1)])])]),e("div",{class:"danger-zone"},[e("button",{class:"btn btn-danger big-btn",onClick:ie},[...t[31]||(t[31]=[e("div",{class:"danger-btn-content"},[e("div",{class:"danger-btn-title"},"清除所有数据"),e("div",{class:"danger-btn-desc"},"此操作将清除所有聊天记录、设置和本地数据，且无法恢复")],-1)])])]),O(J,{visible:F.value,"onUpdate:visible":t[25]||(t[25]=a=>F.value=a),title:"导出选项",bodyClass:"no-padding"},{footer:D(()=>[e("button",{class:"modal-btn confirm",onClick:ne},"确认导出")]),default:D(()=>[e("div",Xt,[e("div",{class:"scope-item",onClick:t[20]||(t[20]=a=>M("chat"))},[e("div",{class:A(["scope-checkbox",{checked:y.value.chat}])},[y.value.chat?(g(),k("svg",Yt,[...t[32]||(t[32]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):P("",!0)],2),t[33]||(t[33]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"聊天数据"),e("span",{class:"scope-desc"},"包含聊天记录和朋友圈")],-1))]),e("div",{class:"scope-item",onClick:t[21]||(t[21]=a=>M("characters"))},[e("div",{class:A(["scope-checkbox",{checked:y.value.characters}])},[y.value.characters?(g(),k("svg",eo,[...t[34]||(t[34]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):P("",!0)],2),t[35]||(t[35]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"角色数据"),e("span",{class:"scope-desc"},"包含角色卡片、用户人设和收藏")],-1))]),e("div",{class:"scope-item",onClick:t[22]||(t[22]=a=>M("settings"))},[e("div",{class:A(["scope-checkbox",{checked:y.value.settings}])},[y.value.settings?(g(),k("svg",to,[...t[36]||(t[36]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):P("",!0)],2),t[37]||(t[37]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"API设置"),e("span",{class:"scope-desc"},"包含API配置、图床、后台设置")],-1))]),e("div",{class:"scope-item",onClick:t[23]||(t[23]=a=>M("appearance"))},[e("div",{class:A(["scope-checkbox",{checked:y.value.appearance}])},[y.value.appearance?(g(),k("svg",oo,[...t[38]||(t[38]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):P("",!0)],2),t[39]||(t[39]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"外观主题"),e("span",{class:"scope-desc"},"包含主题、字体、气泡样式")],-1))]),e("div",{class:"scope-item",onClick:t[24]||(t[24]=a=>M("worldbook"))},[e("div",{class:A(["scope-checkbox",{checked:y.value.worldbook}])},[y.value.worldbook?(g(),k("svg",so,[...t[40]||(t[40]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):P("",!0)],2),t[41]||(t[41]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"世界书"),e("span",{class:"scope-desc"},"包含世界书设定")],-1))])])]),_:1},8,["visible"]),O(J,{visible:R.value,"onUpdate:visible":t[28]||(t[28]=a=>R.value=a),title:s(o)("api.selectScope"),bodyClass:"no-padding"},{footer:D(()=>[e("button",{class:"modal-btn confirm",onClick:t[27]||(t[27]=a=>R.value=!1)},l(s(o)("confirm")),1)]),default:D(()=>[e("div",ao,[e("div",{class:"scope-item",onClick:t[26]||(t[26]=a=>K("all"))},[e("div",{class:A(["scope-checkbox",{checked:i.value&&i.value.includes("all")}])},[i.value&&i.value.includes("all")?(g(),k("svg",lo,[...t[42]||(t[42]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):P("",!0)],2),e("span",io,l(s(o)("api.scopeAll")),1)]),(g(!0),k(V,null,z(s(j).characters,a=>(g(),k("div",{key:a.id,class:"scope-item",onClick:uo=>K(a.id)},[e("div",{class:A(["scope-checkbox",{checked:i.value&&i.value.includes(a.id)}])},[i.value&&i.value.includes(a.id)?(g(),k("svg",ro,[...t[43]||(t[43]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):P("",!0)],2),e("span",co,l(a.name),1)],8,no))),128))])]),_:1},8,["visible","title"])]),_:1},8,["title"]))}},ho=de(po,[["__scopeId","data-v-6b58603a"]]);export{ho as default};

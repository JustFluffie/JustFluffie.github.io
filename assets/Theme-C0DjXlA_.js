import{_ as ge,k as ye,q as we,E as Ce,O as Se,a0 as B,r as y,c as g,s as ke,a as w,e as t,f as P,z as i,n as O,C as D,b as U,y as d,F as Pe,A as Te,v as R,x as M,I as Fe,i as $e,o as C}from"./index-TjeMOTEi.js";import{C as I}from"./CustomSelect-Dy8tA3u3.js";const Ie={class:"app-screen active",id:"themeSettingsApp"},Ne={class:"app-header"},Oe={class:"title"},Ue={class:"action-btn"},xe={class:"app-content theme-content"},ze={class:"card theme-section"},Ae={class:"card-content"},Le={class:"theme-item no-icon"},Ve={class:"item-content"},je={class:"item-label",style:{"font-weight":"600"}},Be={class:"item-value"},De={class:"theme-item no-icon"},Re={class:"item-content"},Me={class:"item-label",style:{"font-weight":"600"}},Je={class:"item-value"},Ee={class:"card theme-section"},He={class:"card-title"},We={class:"card-content"},qe={class:"theme-item no-icon"},Ge={class:"item-content"},Qe={class:"wallpaper-container"},Xe={class:"wallpaper-col"},Ye={class:"section-title-center"},Ze={key:0,class:"upload-hint"},Ke={class:"wallpaper-col"},et={class:"section-title-center"},tt={key:0,class:"upload-hint"},st={class:"theme-item no-icon"},ot={class:"item-content"},nt={class:"item-label"},at={class:"card theme-section"},lt={class:"card-title"},it={class:"card-content"},ct={class:"theme-item no-icon"},rt={class:"item-content"},dt={class:"app-icons-grid-new"},pt=["onClick"],mt={class:"app-icon-box"},ht=["src"],ut={class:"app-name"},vt={class:"card theme-section"},ft={class:"card-title"},bt={class:"card-content"},_t={class:"theme-item no-icon"},gt={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},yt={class:"theme-item no-icon"},wt={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},Ct=["placeholder"],St={class:"theme-item no-icon"},kt={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},Pt=["value"],Tt=["value","placeholder"],Ft={class:"theme-item no-icon"},$t={class:"item-content"},It={class:"item-label"},Nt={class:"number-input"},Ot={class:"card theme-section"},Ut={class:"card-title"},xt={class:"card-content"},zt={class:"theme-item no-icon"},At={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},Lt={class:"theme-item no-icon"},Vt={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},jt={class:"theme-item no-icon"},Bt={class:"item-content",style:{"flex-direction":"column","align-items":"flex-start",gap:"5px",width:"100%"}},Dt={style:{display:"flex","justify-content":"space-between",width:"100%","align-items":"center"}},Rt={class:"item-label"},Mt=["placeholder"],Jt={class:"card theme-section"},Et={class:"card-title"},Ht={class:"card-content"},Wt={class:"theme-item no-icon"},qt={class:"import-export-container",style:{flex:"1","justify-content":"space-around"}},Gt={class:"card theme-section"},Qt={class:"card-content"},Xt={class:"theme-item no-icon"},Yt={class:"theme-item no-icon"},Zt={class:"import-export-container",style:{flex:"1","justify-content":"space-around"}},Kt={__name:"Theme",setup(es){const{t:o}=ye(),N=$e(),a=we(),T=Ce(),{themePresets:b,currentThemePreset:p,fontPresets:F,currentFontPreset:_,cssPresets:h,currentCssPreset:m,homeScreen:J}=Se(a),l=B({}),S=y(""),u=y(""),k=y(!1),v=B({title:"",bizType:"theme",onConfirm:null}),x=y(""),E=y(null),z=y(null),A=g(()=>[{key:"chat",name:o("homeScreen.apps.chat")},{key:"worldbook",name:o("homeScreen.apps.worldbook")},{key:"preset",name:o("homeScreen.apps.preset")},{key:"calendar",name:o("homeScreen.apps.calendar")},{key:"api",name:o("homeScreen.apps.apiSettings")},{key:"theme",name:o("homeScreen.apps.theme")},{key:"spy",name:o("homeScreen.apps.spy")},{key:"check",name:o("homeScreen.apps.check")}]);g(()=>{const e=x.value==="home"?o("theme.homeScreen"):o("theme.lockScreen");return o("theme.setWallpaper",{type:e})});const H=g(()=>{const e=l.fontColor;if(!e)return"#000000";if(/^#[0-9A-F]{6}$/i.test(e))return e;const s=e.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i);if(s){const n=parseInt(s[1]).toString(16).padStart(2,"0"),c=parseInt(s[2]).toString(16).padStart(2,"0"),r=parseInt(s[3]).toString(16).padStart(2,"0");return`#${n}${c}${r}`}return"#000000"}),W=g(()=>Object.keys(F.value||{}).map(e=>({value:e,label:e}))),q=g(()=>Object.keys(b.value||{}).map(e=>({value:e,label:e}))),G=g(()=>Object.keys(h.value||{}).map(e=>({value:e,label:e}))),Q=g(()=>[{value:1,label:"屏幕一"},{value:2,label:"屏幕二"}]);function X(e){a.setHomeScreen(e)}ke(()=>{$()});function $(){const e=o("theme.defaultTheme"),s=o("theme.defaultCss");b.value||(b.value={[e]:{bg:"",lockbg:"",appIcons:{},showFrame:!0,fontColor:"#1f1f1f",appLabelFontSize:10}});const n=b.value[p.value];if(n)Object.assign(l,JSON.parse(JSON.stringify(n)));else{p.value=e;const c=b.value[e]||{};Object.assign(l,JSON.parse(JSON.stringify(c)))}l.appIcons||(l.appIcons={}),l.appLabelFontSize||(l.appLabelFontSize=10),h.value||(h.value={[s]:""}),u.value=h.value[m.value]||""}const Y=()=>{N.options.history.state.back?N.back():N.push("/")};function L(e){const s=l[e]===!1;l[e]=s,(e==="showFrame"||e==="showStatusBar")&&a.updateThemeSetting(e,s)}function V(e){x.value=e;const s=o(e==="home"?"theme.homeScreen":"theme.lockScreen");v.title=o("theme.setWallpaper",{type:s}),v.onConfirm=n=>{const c=(n.type==="url",n.content);e==="home"?l.bg=c:e==="lock"&&(l.lockbg=c)},k.value=!0}function Z(e){var n;E.value=e;const s=((n=A.value.find(c=>c.key===e))==null?void 0:n.name)||"";v.title=o("theme.setAppIcon",{appName:s}),v.onConfirm=c=>{const r=(c.type==="url",c.content);K(e,r)},k.value=!0}function K(e,s){const n={...l.appIcons||{}};n[e]=s,l.appIcons=n}function ee(e){v.onConfirm&&v.onConfirm(e),k.value=!1}function te(e){a.switchFontPreset(e)}function se(){const e=prompt(o("theme.prompt.enterFontPresetName"));if(e){const s=S.value.trim();if(s)try{new URL(s),a.saveFontPreset(e,s),a.showToast(o("theme.toast.saveSuccess"))}catch{a.showToast(o("theme.toast.invalidUrl"),"error")}else a.showToast(o("theme.toast.enterUrl"),"info")}}function oe(){a.showConfirm(o("theme.confirm.deleteFontPreset"),o("theme.confirm.deleteFontPresetMsg",{presetName:_.value}),()=>{const e=_.value;a.deleteFontPreset(e),_.value===e&&(_.value=o("theme.defaultTheme")),S.value=F.value[_.value]||""})}function ne(){const e=S.value.trim();if(e)try{new URL(e),a.applyFont(e),a.showToast(o("theme.toast.fontApplied"),"info")}catch{a.showToast(o("theme.toast.invalidUrl"),"error")}}function ae(e){/^#[0-9A-F]{6}$/i.test(e)&&(l.fontColor=e,a.applyFontColor(e))}function le(e){const s=/^#([0-9A-F]{3}){1,2}$/i.test(e)||/^#([0-9A-F]{4}){1,2}$/i.test(e),n=/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(e),c=/^rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d\.]+\s*\)$/i.test(e);(s||n||c)&&(l.fontColor=e,a.applyFontColor(e))}function ie(){a.applyFontColor(l.fontColor),a.showToast(o("theme.toast.colorApplied"),"info")}function j(e){let s=l.appLabelFontSize||10;s+=e,s<8&&(s=8),s>16&&(s=16),l.appLabelFontSize=s,a.applyAppLabelFontSize(s)}function ce(e){confirm(o("theme.confirm.switchTheme"))&&(a.switchThemePreset(e),$())}function re(){const e=prompt(o("theme.prompt.enterThemePresetName"));if(e){const s=JSON.parse(JSON.stringify(l));s.bg=s.bg||"",s.lockbg=s.lockbg||"",s.appIcons=s.appIcons||{},s.fontColor=s.fontColor||"#1f1f1f",s.appLabelFontSize=s.appLabelFontSize||10,a.saveThemePreset(e,s),a.showToast(o("theme.toast.saveSuccess"))}}function de(){a.showConfirm(o("theme.confirm.deleteThemePreset"),o("theme.confirm.deleteThemePresetMsg",{presetName:p.value}),()=>{const e=p.value;a.deleteThemePreset(e),p.value===e&&(p.value=o("theme.defaultTheme")),$()})}function pe(e){a.switchCssPreset(e),u.value=h.value[e]||""}function me(){const e=prompt(o("theme.prompt.enterCssPresetName"));if(e){const s=u.value.trim();s?s.includes("{")&&s.includes("}")?(a.saveCssPreset(e,s),a.showToast(o("theme.toast.saveSuccess"))):a.showToast(o("theme.toast.invalidCss"),"error"):a.showToast(o("theme.toast.enterCss"),"info")}}function he(){a.showConfirm(o("theme.confirm.deleteCssPreset"),o("theme.confirm.deleteCssPresetMsg",{presetName:m.value}),()=>{const e=m.value;a.deleteCssPreset(e),m.value===e&&(m.value=o("theme.defaultCss")),u.value=h.value[m.value]||""})}function ue(){const e=u.value.trim();e?e.includes("{")&&e.includes("}")?(a.applyCss(e),a.showToast(o("theme.toast.cssApplied"),"info")):a.showToast(o("theme.toast.invalidCss"),"error"):(a.applyCss(""),a.showToast(o("theme.toast.cssCleared"),"info"))}function ve(){const e={themePresets:b.value,currentThemePreset:p.value,fontPresets:F.value,currentFontPreset:_.value,cssPresets:h.value,currentCssPreset:m.value,exportDate:new Date().toISOString()},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(s),c=document.createElement("a");c.href=n,c.download=`ai_phone_theme_config_${new Date().toISOString().slice(0,10)}.json`,c.click(),URL.revokeObjectURL(n)}function fe(){z.value.click()}function be(e){const s=e.target.files[0];if(!s)return;const n=new FileReader;n.onload=c=>{try{const r=JSON.parse(c.target.result);if(r.themePresets)for(const f in r.themePresets)b.value[f]=r.themePresets[f];if(r.fontPresets)for(const f in r.fontPresets)F.value[f]=r.fontPresets[f];if(r.cssPresets)for(const f in r.cssPresets)h.value[f]=r.cssPresets[f];confirm(o("theme.confirm.importSuccess"))&&(r.currentThemePreset&&a.switchThemePreset(r.currentThemePreset),r.currentFontPreset&&a.switchFontPreset(r.currentFontPreset),r.currentCssPreset&&a.switchCssPreset(r.currentCssPreset)),$(),a.showToast(o("theme.toast.importSuccess"),"success")}catch(r){a.showToast(o("theme.toast.importFailed"),"error"),console.error(r)}},n.readAsText(s),e.target.value=""}function _e(){const e={bg:l.bg||"",lockbg:l.lockbg||"",appIcons:l.appIcons||{},showFrame:l.showFrame!==!1,showStatusBar:l.showStatusBar!==!1,fontColor:l.fontColor||"#1f1f1f",appLabelFontSize:l.appLabelFontSize||10};a.saveThemePreset(p.value,e),a.saveCssPreset(m.value,u.value),a.initTheme(),a.showToast(o("theme.toast.saveSuccess"))}return(e,s)=>(C(),w("div",Ie,[t("div",Ne,[t("div",{class:"back-btn",onClick:Y},[...s[13]||(s[13]=[t("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])]),t("div",Oe,i(e.$t("theme.title")),1),t("div",Ue,[t("button",{class:"header-save-btn",onClick:_e},i(e.$t("save")),1)])]),t("div",xe,[t("div",ze,[t("div",Ae,[t("div",Le,[t("div",Ve,[t("div",je,i(e.$t("theme.showFrame")),1),t("div",Be,i(e.$t("theme.showFrameDesc")),1)]),t("div",{class:O(["toggle-switch",{active:l.showFrame!==!1}]),onClick:s[0]||(s[0]=n=>L("showFrame"))},null,2)]),t("div",De,[t("div",Re,[t("div",Me,i(e.$t("theme.showStatusBar")),1),t("div",Je,i(e.$t("theme.showStatusBarDesc")),1)]),t("div",{class:O(["toggle-switch",{active:l.showStatusBar!==!1}]),onClick:s[1]||(s[1]=n=>L("showStatusBar"))},null,2)])])]),t("div",Ee,[t("div",He,i(e.$t("theme.wallpaper")),1),t("div",We,[t("div",qe,[t("div",Ge,[t("div",Qe,[t("div",Xe,[t("div",Ye,i(e.$t("theme.homeScreen")),1),t("div",{class:"wallpaper-preview",style:D(l.bg?{backgroundImage:`url('${l.bg}')`}:{}),onClick:s[2]||(s[2]=n=>V("home"))},[l.bg?U("",!0):(C(),w("span",Ze,i(e.$t("theme.uploadHint")),1))],4)]),t("div",Ke,[t("div",et,i(e.$t("theme.lockScreen")),1),t("div",{class:"wallpaper-preview",style:D(l.lockbg?{backgroundImage:`url('${l.lockbg}')`}:{}),onClick:s[3]||(s[3]=n=>V("lock"))},[l.lockbg?U("",!0):(C(),w("span",tt,i(e.$t("theme.uploadHint")),1))],4)])])])]),t("div",st,[t("div",ot,[t("div",nt,i(e.$t("theme.homeScreenStyle")),1)]),P(I,{options:Q.value,modelValue:d(J),"onUpdate:modelValue":X,textAlign:"left"},null,8,["options","modelValue"])])])]),t("div",at,[t("div",lt,i(e.$t("theme.appIcons")),1),t("div",it,[t("div",ct,[t("div",rt,[t("div",dt,[(C(!0),w(Pe,null,Te(A.value,n=>(C(),w("div",{key:n.key,class:"app-icon-item",onClick:c=>Z(n.key)},[t("div",mt,[l.appIcons&&l.appIcons[n.key]?(C(),w("img",{key:0,src:l.appIcons[n.key]},null,8,ht)):U("",!0)]),t("span",ut,i(n.name),1)],8,pt))),128))])])])])]),t("div",vt,[t("div",ft,i(e.$t("theme.fontSettings")),1),t("div",bt,[t("div",_t,[t("div",gt,[P(I,{options:W.value,modelValue:d(_),"onUpdate:modelValue":te,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:se},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:oe},i(e.$t("delete")),1)])]),t("div",yt,[t("div",wt,[R(t("input",{type:"text",class:"base-input",style:{flex:"1"},"onUpdate:modelValue":s[4]||(s[4]=n=>S.value=n),placeholder:d(o)("theme.fontUrlPlaceholder")},null,8,Ct),[[M,S.value]]),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:ne},i(e.$t("confirm")),1)])]),t("div",St,[t("div",kt,[t("input",{type:"color",class:"color-picker-input",value:H.value,onInput:s[5]||(s[5]=n=>ae(n.target.value))},null,40,Pt),t("input",{type:"text",class:"base-input",style:{flex:"1"},value:l.fontColor,onInput:s[6]||(s[6]=n=>le(n.target.value)),placeholder:d(o)("theme.fontColorPlaceholder")},null,40,Tt),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:ie},i(e.$t("confirm")),1)])]),t("div",Ft,[t("div",$t,[t("div",It,i(e.$t("theme.appNameFontSize")),1)]),t("div",Nt,[t("button",{onClick:s[7]||(s[7]=n=>j(-1))},"-"),t("span",null,i(l.appLabelFontSize||10)+"px",1),t("button",{onClick:s[8]||(s[8]=n=>j(1))},"+")])])])]),t("div",Ot,[t("div",Ut,i(e.$t("theme.themePresets")),1),t("div",xt,[t("div",zt,[t("div",At,[P(I,{options:q.value,modelValue:d(p),"onUpdate:modelValue":ce,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:re},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:de},i(e.$t("delete")),1)])]),t("div",Lt,[t("div",Vt,[P(I,{options:G.value,modelValue:d(m),"onUpdate:modelValue":pe,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:me},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:he},i(e.$t("delete")),1)])]),t("div",jt,[t("div",Bt,[t("div",Dt,[t("div",Rt,i(e.$t("theme.globalCss")),1),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:ue},i(e.$t("confirm")),1)]),R(t("textarea",{class:"base-input","onUpdate:modelValue":s[9]||(s[9]=n=>u.value=n),placeholder:d(o)("theme.cssPlaceholder"),style:{width:"100%","margin-top":"10px"}},null,8,Mt),[[M,u.value]])])])])]),t("div",Jt,[t("div",Et,i(e.$t("theme.importExport")),1),t("div",Ht,[t("div",Wt,[t("div",qt,[t("button",{class:"btn btn-secondary big-btn",onClick:ve},i(e.$t("theme.exportPresets")),1),t("button",{class:"btn btn-secondary big-btn",onClick:fe},i(e.$t("theme.importPresets")),1),t("input",{type:"file",ref_key:"importInput",ref:z,class:"hidden-input",accept:".json",onChange:be},null,544)])])])]),t("div",Gt,[s[15]||(s[15]=t("div",{class:"card-title"},"通知测试",-1)),t("div",Qt,[t("div",Xt,[s[14]||(s[14]=t("div",{class:"item-content"},[t("div",{class:"item-label",style:{"font-weight":"600"}},"桌面通知"),t("div",{class:"item-value"},"开启后，应用在后台时也能收到消息提醒")],-1)),t("div",{class:O(["toggle-switch",{active:d(T).desktopNotificationsEnabled}]),onClick:s[10]||(s[10]=n=>d(T).desktopNotificationsEnabled=!d(T).desktopNotificationsEnabled)},null,2)]),t("div",Yt,[t("div",Zt,[t("button",{class:"btn btn-secondary big-btn",onClick:s[11]||(s[11]=n=>d(T).triggerNotification("测试通知","这是一条测试通知。"))},"发送测试通知")])])])])]),P(Fe,{visible:k.value,"onUpdate:visible":s[12]||(s[12]=n=>k.value=n),title:v.title,bizType:v.bizType,type:"basic",onSendImage:ee},null,8,["visible","title","bizType"])]))}},os=ge(Kt,[["__scopeId","data-v-db0660e0"]]);export{os as default};

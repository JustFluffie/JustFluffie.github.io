import{_ as u,r as m,C as _,m as v,b as p,w as f,e as h,o as a,g as l,i as s,t as n,G as y,H as g}from"./index-DNoHf4Bg.js";import{u as k}from"./doubanStore-BT-TpslI.js";const x={key:0,class:"post-detail-page"},w={class:"post-full-content"},C={class:"post-meta"},L={class:"avatar"},b={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},B=["fill"],D=["fill"],I={class:"user-info"},P={class:"timestamp"},F={class:"post-body"},S={class:"comments-section"},H={key:0,class:"loading-state"},M={key:1,class:"comments-list"},E={class:"comment-meta"},G={class:"comment-username"},N={class:"comment-text"},R={class:"comment-footer"},T={class:"comment-time"},V={class:"comment-likes"},Z={key:2,class:"no-comments"},$={key:1,class:"loading-state"},j={__name:"DoubanPostDetail",setup(q){const r=v(),c=k(),e=m(null),i=m(!1);return _(async()=>{const d=parseInt(r.params.postId,10),t=c.getPostById(d);if(t){e.value={...t,commentsList:[]},i.value=!0;try{const o=await c.fetchCommentsForPost(t);e.value&&(e.value.commentsList=o)}catch(o){console.error("Failed to load comments:",o)}finally{i.value=!1}}}),(d,t)=>(a(),p(h,{title:e.value?"å¸–å­è¯¦æƒ…":"åŠ è½½ä¸­..."},{default:f(()=>[e.value?(a(),l("div",x,[s("article",w,[s("header",C,[s("div",L,[(a(),l("svg",b,[s("circle",{cx:"12",cy:"8",r:"4",fill:e.value.avatarColor},null,8,B),s("path",{d:"M12 14C8.68629 14 6 16.6863 6 20H18C18 16.6863 15.3137 14 12 14Z",fill:e.value.avatarColor},null,8,D)]))]),s("div",I,[t[0]||(t[0]=s("div",{class:"username"},"åŒ¿åè±†å‹",-1)),s("div",P,n(e.value.timestamp),1)])]),s("div",F,[s("h1",null,n(e.value.title),1),s("p",null,n(e.value.fullText||e.value.summary),1)])]),s("section",S,[t[4]||(t[4]=s("div",{class:"comments-header"},[s("h3",null,"çƒ­é—¨è¯„è®º")],-1)),i.value?(a(),l("div",H,[...t[1]||(t[1]=[s("p",null,"è¯„è®ºåŠ è½½ä¸­...",-1)])])):e.value.commentsList&&e.value.commentsList.length>0?(a(),l("div",M,[(a(!0),l(y,null,g(e.value.commentsList,o=>(a(),l("div",{key:o.id,class:"comment-item"},[s("div",E,[t[2]||(t[2]=s("div",{class:"comment-avatar"},null,-1)),s("span",G,n(o.user),1)]),s("p",N,n(o.text),1),s("div",R,[s("span",T,n(o.time),1),s("span",V,"ğŸ‘ "+n(o.likes),1)])]))),128))])):(a(),l("div",Z,[...t[3]||(t[3]=[s("p",null,"è¿˜æ²¡æœ‰è¯„è®ºï¼Œå¿«æ¥æŠ¢æ²™å‘ï¼",-1)])]))])])):(a(),l("div",$,[...t[5]||(t[5]=[s("p",null,"å¸–å­åŠ è½½ä¸­...",-1)])]))]),_:1},8,["title"]))}},J=u(j,[["__scopeId","data-v-d4d44f93"]]);export{J as default};

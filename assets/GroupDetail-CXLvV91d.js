import{_ as I,u as M,r as m,c as u,b as V,x as N,k as U,i as h,a9 as F,j as G,o,e as s,w as g,d as a,F as p,C as _,t as n,c4 as f,B as k,g as y,S as C}from"./index-LMiDZmIY.js";import{u as R}from"./doubanStore-DewcQJna.js";const $={class:"group-page"},j={class:"controls-bar"},A={class:"post-controls"},E={class:"control-group"},H=["value"],L={class:"control-group"},T=["value"],W={class:"group-header"},Z={class:"group-info"},q={class:"post-list"},z={key:0,class:"empty-state"},J=["onClick"],K={class:"post-stats"},O={class:"comment-count"},Q={class:"post-details"},X={class:"post-title"},Y={class:"post-summary"},ss={class:"post-meta"},es={class:"avatar"},ts={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},os=["fill"],as=["fill"],ns={class:"timestamp"},ls={__name:"GroupDetail",setup(is){const S=V(),w=G(),c=R(),v=M(),l=m(null),i=m(null),b=u(()=>v.characters),x=u(()=>v.userPersonas),P={校园热线:{description:"你的课表、我的吐槽，青春的回忆与回响。"},职场茶水间:{description:"摸鱼、八卦、生存指南，成年人的世界没有容易二字。"},自由吃瓜基地:{description:"内娱、外娱、网红圈，开帖拉踩请遵守版规。"},情感树洞:{description:"那些说不出口的话，在这里可以找到回声。"},深夜食堂:{description:"仅限成年人，探讨一些成熟的话题。"}},d=u(()=>{const r=S.params.groupName||"豆瓣小组",t=P[r]||{description:"欢迎来到这个小组。"};return{title:r,description:t.description}}),B=()=>{if(!l.value||!i.value){console.log("Waiting for character and persona selection...");return}c.fetchAndSetPosts(d.value.title,l.value,i.value)},D=r=>{w.push({name:"douban-post-detail",params:{postId:r}})};return N(()=>{c.setPosts([]),l.value=null,i.value=null}),(r,t)=>(o(),U(F,{title:"","no-padding":"","no-header-border":""},{action:h(()=>[y(C,{name:"refresh",onClick:B,class:"icon-refresh"})]),default:h(()=>[s("div",$,[s("div",j,[s("div",A,[s("div",E,[g(s("select",{id:"character-select","onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e)},[t[2]||(t[2]=s("option",{value:null,disabled:""},"角色",-1)),(o(!0),a(p,null,_(b.value,e=>(o(),a("option",{key:e.id,value:e.id},n(e.name),9,H))),128))],512),[[f,l.value]])]),s("div",L,[g(s("select",{id:"persona-select","onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},[t[3]||(t[3]=s("option",{value:null,disabled:""},"用户",-1)),(o(!0),a(p,null,_(x.value,e=>(o(),a("option",{key:e.id,value:e.id},n(e.name),9,T))),128))],512),[[f,i.value]])])])]),s("header",W,[s("div",Z,[s("h1",null,n(d.value.title),1),s("p",null,n(d.value.description),1)])]),s("main",q,[k(c).posts.length===0?(o(),a("div",z,[...t[4]||(t[4]=[s("p",null,"选择角色和人设后，点击右上角刷新",-1)])])):(o(!0),a(p,{key:1},_(k(c).posts,e=>(o(),a("article",{key:e.id,class:"post-item",onClick:rs=>D(e.id)},[s("div",K,[y(C,{name:"comment",class:"comment-icon"}),s("span",O,n(e.comments),1)]),s("div",Q,[s("h2",X,n(e.title),1),s("p",Y,n(e.summary),1),s("div",ss,[s("div",es,[(o(),a("svg",ts,[s("circle",{cx:"12",cy:"8",r:"4",fill:e.avatarColor},null,8,os),s("path",{d:"M12 14C8.68629 14 6 16.6863 6 20H18C18 16.6863 15.3137 14 12 14Z",fill:e.avatarColor},null,8,as)]))]),t[5]||(t[5]=s("span",{class:"username"},"匿名豆友",-1)),s("span",ns,n(e.timestamp),1)])])],8,J))),128))])])]),_:1}))}},us=I(ls,[["__scopeId","data-v-31e242e5"]]);export{us as default};

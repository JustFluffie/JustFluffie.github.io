import{_ as m,m as u,c as v,r as p,C as h,b as f,w as g,e as w,o,g as l,i as s,t as i,G as y,H as x}from"./index-CJ72PdJe.js";import{u as C}from"./doubanStore-cr209bCZ.js";const k={key:0,class:"post-detail-page"},B={class:"post-full-content"},L={class:"post-meta"},D={class:"avatar"},b={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I=["fill"],P=["fill"],F={class:"user-info"},H={class:"timestamp"},M={class:"post-body"},S={class:"comments-section"},Z={key:0,class:"loading-state"},E={key:1,class:"comments-list"},G={class:"comment-meta"},N={class:"comment-avatar"},R={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},T=["fill"],V=["fill"],$={class:"comment-username"},j={class:"comment-text"},q={class:"comment-footer"},z={class:"comment-time"},A={class:"comment-likes"},J={key:2,class:"no-comments"},K={key:1,class:"loading-state"},O={__name:"DBPostDetail",setup(Q){const _=u(),c=C(),d=parseInt(_.params.postId,10),t=v(()=>c.getPostById(d)),n=p(!1);return h(async()=>{if(t.value&&t.value.commentsList&&t.value.commentsList.length===0){n.value=!0;try{await c.fetchCommentsForPost(d)}catch(r){console.error("Failed to load comments:",r)}finally{n.value=!1}}}),(r,e)=>(o(),f(w,{title:t.value?"å¸–å­è¯¦æƒ…":"åŠ è½½ä¸­...","no-padding":""},{default:g(()=>[t.value?(o(),l("div",k,[s("article",B,[s("header",L,[s("div",D,[(o(),l("svg",b,[s("circle",{cx:"12",cy:"8",r:"4",fill:t.value.avatarColor},null,8,I),s("path",{d:"M12 14C8.68629 14 6 16.6863 6 20H18C18 16.6863 15.3137 14 12 14Z",fill:t.value.avatarColor},null,8,P)]))]),s("div",F,[e[0]||(e[0]=s("div",{class:"username"},"åŒ¿åè±†å‹",-1)),s("div",H,i(t.value.timestamp),1)])]),s("div",M,[s("h1",null,i(t.value.title),1),s("p",null,i(t.value.fullText||t.value.summary),1)])]),s("section",S,[e[3]||(e[3]=s("div",{class:"comments-header"},[s("h3",null,"çƒ­é—¨è¯„è®º")],-1)),n.value?(o(),l("div",Z,[...e[1]||(e[1]=[s("p",null,"è¯„è®ºåŠ è½½ä¸­...",-1)])])):t.value.commentsList&&t.value.commentsList.length>0?(o(),l("div",E,[(o(!0),l(y,null,x(t.value.commentsList,a=>(o(),l("div",{key:a.id,class:"comment-item"},[s("div",G,[s("div",N,[(o(),l("svg",R,[s("circle",{cx:"12",cy:"8",r:"4",fill:a.avatarColor},null,8,T),s("path",{d:"M12 14C8.68629 14 6 16.6863 6 20H18C18 16.6863 15.3137 14 12 14Z",fill:a.avatarColor},null,8,V)]))]),s("span",$,i(a.user),1)]),s("p",j,i(a.text),1),s("div",q,[s("span",z,i(a.time),1),s("span",A,"ğŸ‘ "+i(a.likes),1)])]))),128))])):(o(),l("div",J,[...e[2]||(e[2]=[s("p",null,"è¿˜æ²¡æœ‰è¯„è®ºï¼Œå¿«æ¥æŠ¢æ²™å‘ï¼",-1)])]))])])):(o(),l("div",K,[...e[4]||(e[4]=[s("p",null,"å¸–å­åŠ è½½ä¸­...",-1)])]))]),_:1},8,["title"]))}},X=m(O,[["__scopeId","data-v-8333b549"]]);export{X as default};

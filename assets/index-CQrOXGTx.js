import{_ as x,u as B,r as p,a as R,c as d,b as N,d as c,e,f as u,n as f,w as T,t as V,v as D,g as _,h as g,i as H,j as I,o as n,k as y,K as z,l as K,p as P}from"./index-uGEQI7W6.js";const j={class:"chat-module"},E={class:"chat-app-layout"},L={class:"left-controls",style:{display:"flex","align-items":"center"}},W={key:0,class:"title",id:"chatAppTitle"},$={id:"chatRoomTitleArea",class:"chat-room-title-area"},q={class:"right-controls",style:{display:"flex","align-items":"center"}},F={class:"chat-app-content"},G={__name:"index",setup(J){const i=N(),r=I(),v=B(),o=p(null),h=p(!0);R();const l=d(()=>["single-chat","single-chat-settings","memory-bank"].includes(i.name)),k=d(()=>!["single-chat-settings","memory-bank"].includes(i.name));P("setShowMomentsCamera",s=>{h.value=s});const a=d(()=>{const s=i.path;return s.includes("/moments")?"moments":s.includes("/npc")?"npc":s.includes("/favorites")?"favorites":s.includes("/profile")?"profile":"chat"}),w=d(()=>{if(i.name==="chat-favorites"){const s=i.params.charId;if(!v.characters)return"收藏";const t=v.characters.find(m=>m.id===Number(s));return t?`${t.name}的收藏`:"收藏"}return"WeChat"}),C=()=>{l.value?window.history.state&&window.history.state.back?r.back():r.push("/chat/list"):window.history.length>1?r.back():r.push("/")},M=()=>{o.value&&o.value.openAddModal&&o.value.openAddModal()},b=()=>{o.value&&o.value.openPostMomentModal&&o.value.openPostMomentModal()};return(s,t)=>{const m=g("svg-icon"),A=g("router-view");return n(),c("div",j,[e("div",E,[k.value?(n(),c("div",{key:0,class:f(["app-header",{"moments-header-style":a.value==="moments"||a.value==="favorites"}]),id:"chatAppHeader"},[e("div",L,[e("div",{class:f(["back-btn",{"white-icon":a.value==="moments"}]),onClick:C},[...t[0]||(t[0]=[e("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[e("polyline",{points:"15 18 9 12 15 6"})],-1)])],2),t[1]||(t[1]=e("div",{id:"chatRoomLeftArea"},null,-1))]),!l.value&&a.value!=="moments"&&a.value!=="favorites"?(n(),c("div",W,V(w.value),1)):u("",!0),T(e("div",$,null,512),[[D,l.value]]),e("div",q,[!l.value&&a.value!=="moments"&&a.value!=="favorites"?(n(),c("div",{key:0,class:"action-btn",id:"chatAppActionBtn",onClick:M},[_(m,{name:"plus-circle"})])):u("",!0),!l.value&&a.value==="moments"&&h.value?(n(),c("div",{key:1,class:"action-btn",id:"momentsActionBtn",onClick:b},[...t[2]||(t[2]=[e("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[e("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),e("circle",{cx:"12",cy:"13",r:"4"})],-1)])])):u("",!0),t[3]||(t[3]=e("div",{id:"chatRoomActionArea"},null,-1))])],2)):u("",!0),e("div",F,[_(A,null,{default:H(({Component:S})=>[(n(),y(z,{exclude:["SingleChat","SingleChatSettings","SingleMemoryBank"]},[(n(),y(K(S),{ref_key:"childRef",ref:o},null,512))],1024))]),_:1})])])])}}},U=x(G,[["__scopeId","data-v-56d5afb3"]]);export{U as default};

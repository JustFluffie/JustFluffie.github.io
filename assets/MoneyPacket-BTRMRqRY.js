import{_ as E,r as d,c as p,C as D,J as N,aa as R,D as K,b as L,h as c,o as i,f as w,w as P,g as r,i as t,S as U,t as u,Y as j,j as $,p as q,F as H,V as J,a6 as Y,T as G}from"./index-CCl56Z_7.js";const O={key:0,class:"transfer-modal"},Q={class:"app-header transfer-header"},W={class:"title"},X={key:0,class:"target-section"},Z={class:"target-info"},_={class:"target-text"},ee={class:"transfer-to"},te=["src"],se={key:1,class:"target-avatar-placeholder"},ae={key:1,class:"target-section",style:{visibility:"hidden"}},ne={class:"amount-card"},le={class:"amount-label"},oe={class:"amount-input-wrapper"},ie={key:0,class:"cursor"},re={key:0,class:"note-section"},de={key:1,class:"note-input-row"},ve={class:"number-keyboard"},ue={class:"keyboard-grid"},ce={__name:"MoneyPacket",props:{visible:{type:Boolean,default:!1},targetName:{type:String,default:""},targetAvatar:{type:String,default:""},mode:{type:String,default:"transfer",validator:a=>["transfer","recharge"].includes(a)}},emits:["update:visible","confirm"],setup(a,{emit:T}){const B=a,g=T,s=d(""),v=d(""),f=d(!1),k=d(null),y=d(!0),m=d(!1),b=d(null),V=p(()=>!!k.value),M=p(()=>s.value),S=()=>(k.value=document.querySelector("#phone-screen-container"),!!k.value);D(()=>{N(()=>{S()&&(f.value=!0)})}),R(()=>{f.value=!1});const C=p(()=>{const o=parseFloat(s.value);return!isNaN(o)&&o>0});K(()=>B.visible,o=>{o&&(s.value="",v.value="",y.value=!0)});const h=()=>{g("update:visible",!1)},z=()=>{y.value=!0},A=()=>{m.value=!0,N(()=>{b.value&&b.value.focus()})},x=()=>{m.value=!1},l=o=>{if(o==="."){if(s.value.includes("."))return;if(s.value===""){s.value="0.";return}}if(s.value.includes(".")){const e=s.value.split(".");if(e[1]&&e[1].length>=2)return}if(!(!s.value.includes(".")&&o!=="."&&s.value.length>=8)){if(s.value==="0"&&o!=="."){s.value=o;return}s.value+=o}},F=()=>{s.value.length>0&&(s.value=s.value.slice(0,-1))},I=()=>{C.value&&(g("confirm",{amount:parseFloat(s.value).toFixed(2),note:v.value}),h())};return(o,e)=>f.value&&V.value?(i(),L(G,{key:0,to:"#phone-screen-container"},[w(Y,{name:"slide-up"},{default:P(()=>[a.visible?(i(),r("div",O,[t("div",Q,[t("div",{class:"back-btn",onClick:h},[w(U,{name:"back-btn"})]),t("div",W,u(a.mode==="recharge"?"充值":""),1),e[12]||(e[12]=t("div",{class:"action-btn"},null,-1))]),a.mode==="transfer"?(i(),r("div",X,[t("div",Z,[t("div",_,[t("div",ee,"转账给 "+u(a.targetName),1)])]),a.targetAvatar?(i(),r("img",{key:0,src:a.targetAvatar,class:"target-avatar"},null,8,te)):(i(),r("div",se,[...e[13]||(e[13]=[t("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[t("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",fill:"#999"})],-1)])]))])):(i(),r("div",ae,[...e[14]||(e[14]=[t("div",{class:"target-info"},[t("div",{class:"target-text"},[t("div",{class:"transfer-to"},"充值")])],-1)])])),t("div",ne,[t("div",le,u(a.mode==="recharge"?"充值金额":"转账金额"),1),t("div",oe,[e[15]||(e[15]=t("span",{class:"currency-symbol"},"¥",-1)),t("div",{class:"amount-display",onClick:z},[j(u(M.value||"")+" ",1),y.value?(i(),r("span",ie,"|")):c("",!0)])]),e[16]||(e[16]=t("div",{class:"amount-divider"},null,-1)),a.mode==="transfer"?(i(),r("div",re,[m.value?(i(),r("div",de,[q(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>v.value=n),class:"base-input note-input",placeholder:"添加转账说明",maxlength:"20",ref_key:"noteInputRef",ref:b,onBlur:x,onKeyup:J(x,["enter"])},null,544),[[H,v.value]])])):(i(),r("div",{key:0,class:"note-label-row",onClick:A},[t("span",{class:$(["note-text",{"has-note":v.value}])},u(v.value||"添加转账说明"),3)]))])):c("",!0)]),t("div",ve,[t("div",ue,[t("div",{class:"key-btn",onClick:e[1]||(e[1]=n=>l("1"))},"1"),t("div",{class:"key-btn",onClick:e[2]||(e[2]=n=>l("2"))},"2"),t("div",{class:"key-btn",onClick:e[3]||(e[3]=n=>l("3"))},"3"),t("div",{class:"key-btn delete-btn",onClick:F},[...e[17]||(e[17]=[t("svg",{viewBox:"0 0 24 24",width:"22",height:"22"},[t("path",{d:"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z",fill:"#333"})],-1)])]),t("div",{class:"key-btn",onClick:e[4]||(e[4]=n=>l("4"))},"4"),t("div",{class:"key-btn",onClick:e[5]||(e[5]=n=>l("5"))},"5"),t("div",{class:"key-btn",onClick:e[6]||(e[6]=n=>l("6"))},"6"),t("div",{class:$(["key-btn transfer-key",{disabled:!C.value}]),onClick:I},u(a.mode==="recharge"?"确定":"转账"),3),t("div",{class:"key-btn",onClick:e[7]||(e[7]=n=>l("7"))},"7"),t("div",{class:"key-btn",onClick:e[8]||(e[8]=n=>l("8"))},"8"),t("div",{class:"key-btn",onClick:e[9]||(e[9]=n=>l("9"))},"9"),t("div",{class:"key-btn zero-btn",onClick:e[10]||(e[10]=n=>l("0"))},"0"),t("div",{class:"key-btn",onClick:e[11]||(e[11]=n=>l("."))},".")])])])):c("",!0)]),_:1})])):c("",!0)}},ke=E(ce,[["__scopeId","data-v-29e4591c"]]);export{ke as M};

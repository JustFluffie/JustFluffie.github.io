import{_ as Se,m as ke,t as Pe,R as Fe,a2 as V,r as P,c as f,v as Te,b as y,f as s,g as T,A as i,d as I,n as R,j as v,D as j,F as $e,B as Ie,y as B,z as D,N as Ne,k as Ae,o as C}from"./index-JvTCRUPv.js";import{C as N}from"./CustomSelect-C8XB3foc.js";const xe={class:"app-screen active",id:"themeSettingsApp"},ze={class:"app-header"},Ue={class:"title"},Oe={class:"action-btn"},Le={class:"app-content theme-content"},Ve={class:"card theme-section"},Re={class:"card-content"},je={class:"theme-item no-icon"},Be={class:"item-content"},De={class:"item-label",style:{"font-weight":"600"}},Me={class:"item-value"},Je={key:0,class:"theme-item no-icon"},He={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},We={class:"item-label",style:{"white-space":"nowrap","margin-right":"10px"}},Ee=["value"],qe=["value","placeholder"],Ge={class:"theme-item no-icon"},Qe={class:"item-content"},Xe={class:"item-label",style:{"font-weight":"600"}},Ye={class:"item-value"},Ze={class:"card theme-section"},Ke={class:"card-title"},et={class:"card-content"},tt={class:"theme-item no-icon"},st={class:"item-content"},ot={class:"wallpaper-container"},nt={class:"wallpaper-col"},at={class:"section-title-center"},lt={key:0,class:"upload-hint"},it={class:"wallpaper-col"},rt={class:"section-title-center"},ct={key:0,class:"upload-hint"},pt={class:"theme-item no-icon"},dt={class:"item-content"},mt={class:"item-label"},ut={class:"card theme-section"},ht={class:"card-title"},ft={class:"card-content"},vt={class:"theme-item no-icon"},bt={class:"item-content"},gt={class:"app-icons-grid-new"},_t=["onClick"],yt={class:"app-icon-box"},Ct=["src"],wt={class:"app-name"},St={class:"card theme-section"},kt={class:"card-title"},Pt={class:"card-content"},Ft={class:"theme-item no-icon"},Tt={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},$t={class:"theme-item no-icon"},It={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},Nt=["placeholder"],At={class:"theme-item no-icon"},xt={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},zt=["value"],Ut=["value","placeholder"],Ot={class:"theme-item no-icon"},Lt={class:"item-content"},Vt={class:"item-label"},Rt={class:"number-input"},jt={class:"card theme-section"},Bt={class:"card-title"},Dt={class:"card-content"},Mt={class:"theme-item no-icon"},Jt={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},Ht={class:"theme-item no-icon"},Wt={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},Et={class:"theme-item no-icon"},qt={class:"item-content",style:{"flex-direction":"column","align-items":"flex-start",gap:"5px",width:"100%"}},Gt={style:{display:"flex","justify-content":"space-between",width:"100%","align-items":"center"}},Qt={class:"item-label"},Xt=["placeholder"],Yt={class:"card theme-section"},Zt={class:"card-title"},Kt={class:"card-content"},es={class:"theme-item no-icon"},ts={class:"import-export-container",style:{flex:"1","justify-content":"space-around"}},ss={__name:"Theme",setup(os){const{t:o}=ke(),A=Ae(),l=Pe(),{themePresets:b,currentThemePreset:p,fontPresets:F,currentFontPreset:g,cssPresets:m,currentCssPreset:d,homeScreen:M}=Fe(l),n=V({}),w=P(""),u=P(""),S=P(!1),_=V({title:"",bizType:"theme",onConfirm:null}),k=P(""),J=P(null),x=P(null),z=f(()=>[{key:"chat",name:o("homeScreen.apps.chat")},{key:"worldbook",name:o("homeScreen.apps.worldbook")},{key:"preset",name:o("homeScreen.apps.preset")},{key:"calendar",name:o("homeScreen.apps.calendar")},{key:"api",name:o("homeScreen.apps.apiSettings")},{key:"theme",name:o("homeScreen.apps.theme")},{key:"spy",name:o("homeScreen.apps.spy")},{key:"check",name:o("homeScreen.apps.check")}]);f(()=>{const e=k.value==="home"?o("theme.homeScreen"):o("theme.lockScreen");return o("theme.setWallpaper",{type:e})});const H=f(()=>{const e=n.fontColor;if(!e)return"#000000";if(/^#[0-9A-F]{6}$/i.test(e))return e;const t=e.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i);if(t){const a=parseInt(t[1]).toString(16).padStart(2,"0"),c=parseInt(t[2]).toString(16).padStart(2,"0"),r=parseInt(t[3]).toString(16).padStart(2,"0");return`#${a}${c}${r}`}return"#000000"}),W=f(()=>{const e=n.frameColor;if(!e)return"#f3f3f3";if(/^#[0-9A-F]{6}$/i.test(e))return e;const t=e.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i);if(t){const a=parseInt(t[1]).toString(16).padStart(2,"0"),c=parseInt(t[2]).toString(16).padStart(2,"0"),r=parseInt(t[3]).toString(16).padStart(2,"0");return`#${a}${c}${r}`}return"#f3f3f3"}),E=f(()=>Object.keys(F.value||{}).map(e=>({value:e,label:e}))),q=f(()=>Object.keys(b.value||{}).map(e=>({value:e,label:e}))),G=f(()=>Object.keys(m.value||{}).map(e=>({value:e,label:e}))),Q=f(()=>[{value:1,label:"屏幕一"},{value:2,label:"屏幕二"}]);function X(e){l.setHomeScreen(e)}Te(()=>{$()});function $(){const e=o("theme.defaultTheme"),t=o("theme.defaultCss");b.value||(b.value={[e]:{bg:"",lockbg:"",appIcons:{},showFrame:!0,frameColor:"#f3f3f3",fontColor:"#1f1f1f",appLabelFontSize:10}});const a=b.value[p.value];if(a)Object.assign(n,JSON.parse(JSON.stringify(a)));else{p.value=e;const c=b.value[e]||{};Object.assign(n,JSON.parse(JSON.stringify(c)))}n.appIcons||(n.appIcons={}),n.appLabelFontSize||(n.appLabelFontSize=10),n.frameColor||(n.frameColor="#f3f3f3"),m.value||(m.value={[t]:""}),u.value=m.value[d.value]||""}const Y=()=>{A.options.history.state.back?A.back():A.push("/")};function U(e){const t=n[e]===!1;n[e]=t,(e==="showFrame"||e==="showStatusBar")&&l.updateThemeSetting(e,t)}function O(e){k.value=e;const t=o(e==="home"?"theme.homeScreen":"theme.lockScreen");_.title=o("theme.setWallpaper",{type:t}),_.bizType="theme",S.value=!0}function Z(e){const t=e.content;k.value==="home"?n.bg=t:k.value==="lock"&&(n.lockbg=t)}function K(e){const t=e.content;k.value==="home"?n.bg=t:k.value==="lock"&&(n.lockbg=t),S.value=!1}function ee(e){var a;J.value=e;const t=((a=z.value.find(c=>c.key===e))==null?void 0:a.name)||"";_.title=o("theme.setAppIcon",{appName:t}),_.onConfirm=c=>{const r=c.content;te(e,r),S.value=!1},_.bizType="avatar",S.value=!0}function te(e,t){const a={...n.appIcons||{}};a[e]=t,n.appIcons=a}function se(){l.showConfirm(o("theme.confirm.deleteFontPreset"),o("theme.confirm.deleteFontPresetMsg",{presetName:g.value}),()=>{const e=g.value;l.deleteFontPreset(e),g.value===e&&(g.value=o("theme.defaultTheme")),w.value=F.value[g.value]||""})}function oe(){const e=w.value.trim();if(e)try{new URL(e),l.applyFont(e),l.showToast(o("theme.toast.fontApplied"),"info")}catch{l.showToast(o("theme.toast.invalidUrl"),"error")}}function ne(e){/^#[0-9A-F]{6}$/i.test(e)&&(n.fontColor=e,l.applyFontColor(e))}function ae(e){const t=/^#([0-9A-F]{3}){1,2}$/i.test(e)||/^#([0-9A-F]{4}){1,2}$/i.test(e),a=/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(e),c=/^rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d\.]+\s*\)$/i.test(e);(t||a||c)&&(n.fontColor=e,l.applyFontColor(e))}function le(){l.applyFontColor(n.fontColor),l.showToast(o("theme.toast.colorApplied"),"info")}function ie(e){/^#[0-9A-F]{6}$/i.test(e)&&(n.frameColor=e,l.applyFrameColor(e))}function re(e){const t=/^#([0-9A-F]{3}){1,2}$/i.test(e)||/^#([0-9A-F]{4}){1,2}$/i.test(e),a=/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(e),c=/^rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d\.]+\s*\)$/i.test(e);(t||a||c)&&(n.frameColor=e,l.applyFrameColor(e))}function ce(){l.applyFrameColor(n.frameColor),l.showToast(o("theme.toast.colorApplied"),"info")}function L(e){let t=n.appLabelFontSize||10;t+=e,t<8&&(t=8),t>16&&(t=16),n.appLabelFontSize=t,l.applyAppLabelFontSize(t)}function pe(e){l.switchFontPreset(e),w.value=F.value[e]||""}function de(){const e=prompt(o("theme.prompt.enterFontPresetName"));if(e){const t=w.value.trim();if(t)try{new URL(t),l.saveFontPreset(e,t),l.showToast(o("theme.toast.saveSuccess"))}catch{l.showToast(o("theme.toast.invalidUrl"),"error")}else l.showToast(o("theme.toast.enterFontUrl"),"info")}}function me(e){confirm(o("theme.confirm.switchTheme"))&&(l.switchThemePreset(e),$())}function ue(){const e=prompt(o("theme.prompt.enterThemePresetName"));if(e){const t=JSON.parse(JSON.stringify(n));t.bg=t.bg||"",t.lockbg=t.lockbg||"",t.appIcons=t.appIcons||{},t.fontColor=t.fontColor||"#1f1f1f",t.frameColor=t.frameColor||"#f3f3f3",t.appLabelFontSize=t.appLabelFontSize||10,l.saveThemePreset(e,t),l.showToast(o("theme.toast.saveSuccess"))}}function he(){l.showConfirm(o("theme.confirm.deleteThemePreset"),o("theme.confirm.deleteThemePresetMsg",{presetName:p.value}),()=>{const e=p.value;l.deleteThemePreset(e),p.value===e&&(p.value=o("theme.defaultTheme")),$()})}function fe(e){l.switchCssPreset(e),u.value=m.value[e]||""}function ve(){const e=prompt(o("theme.prompt.enterCssPresetName"));if(e){const t=u.value.trim();t?t.includes("{")&&t.includes("}")?(l.saveCssPreset(e,t),l.showToast(o("theme.toast.saveSuccess"))):l.showToast(o("theme.toast.invalidCss"),"error"):l.showToast(o("theme.toast.enterCss"),"info")}}function be(){l.showConfirm(o("theme.confirm.deleteCssPreset"),o("theme.confirm.deleteCssPresetMsg",{presetName:d.value}),()=>{const e=d.value;l.deleteCssPreset(e),d.value===e&&(d.value=o("theme.defaultCss")),u.value=m.value[d.value]||""})}function ge(){const e=u.value.trim();e?e.includes("{")&&e.includes("}")?(l.applyCss(e),l.showToast(o("theme.toast.cssApplied"),"info")):l.showToast(o("theme.toast.invalidCss"),"error"):(l.applyCss(""),l.showToast(o("theme.toast.cssCleared"),"info"))}function _e(){const e={themePresets:b.value,currentThemePreset:p.value,fontPresets:F.value,currentFontPreset:g.value,cssPresets:m.value,currentCssPreset:d.value,exportDate:new Date().toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),c=document.createElement("a");c.href=a,c.download=`ai_phone_theme_config_${new Date().toISOString().slice(0,10)}.json`,c.click(),URL.revokeObjectURL(a)}function ye(){x.value.click()}function Ce(e){const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=c=>{try{const r=JSON.parse(c.target.result);if(r.themePresets)for(const h in r.themePresets)b.value[h]=r.themePresets[h];if(r.fontPresets)for(const h in r.fontPresets)F.value[h]=r.fontPresets[h];if(r.cssPresets)for(const h in r.cssPresets)m.value[h]=r.cssPresets[h];confirm(o("theme.confirm.importSuccess"))&&(r.currentThemePreset&&l.switchThemePreset(r.currentThemePreset),r.currentFontPreset&&l.switchFontPreset(r.currentFontPreset),r.currentCssPreset&&l.switchCssPreset(r.currentCssPreset)),$(),l.showToast(o("theme.toast.importSuccess"),"success")}catch(r){l.showToast(o("theme.toast.importFailed"),"error"),console.error(r)}},a.readAsText(t),e.target.value=""}function we(){const e={bg:n.bg||"",lockbg:n.lockbg||"",appIcons:n.appIcons||{},showFrame:n.showFrame!==!1,frameColor:n.frameColor||"#f3f3f3",showStatusBar:n.showStatusBar!==!1,fontColor:n.fontColor||"#1f1f1f",appLabelFontSize:n.appLabelFontSize||10};l.saveThemePreset(p.value,e),l.saveCssPreset(d.value,u.value),l.initTheme(),l.showToast(o("theme.toast.saveSuccess"))}return(e,t)=>(C(),y("div",xe,[s("div",ze,[s("div",{class:"back-btn",onClick:Y},[...t[13]||(t[13]=[s("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[s("polyline",{points:"15 18 9 12 15 6"})],-1)])]),s("div",Ue,i(e.$t("theme.title")),1),s("div",Oe,[s("button",{class:"header-save-btn",onClick:we},i(e.$t("save")),1)])]),s("div",Le,[s("div",Ve,[s("div",Re,[s("div",je,[s("div",Be,[s("div",De,i(e.$t("theme.showFrame")),1),s("div",Me,i(e.$t("theme.showFrameDesc")),1)]),s("div",{class:R(["toggle-switch",{active:n.showFrame!==!1}]),onClick:t[0]||(t[0]=a=>U("showFrame"))},null,2)]),n.showFrame!==!1?(C(),y("div",Je,[s("div",He,[s("div",We,i(e.$t("theme.frameColor")),1),s("input",{type:"color",class:"color-picker-input",value:W.value,onInput:t[1]||(t[1]=a=>ie(a.target.value))},null,40,Ee),s("input",{type:"text",class:"base-input",style:{flex:"1"},value:n.frameColor,onInput:t[2]||(t[2]=a=>re(a.target.value)),placeholder:v(o)("theme.frameColorPlaceholder")},null,40,qe),s("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:ce},i(e.$t("confirm")),1)])])):I("",!0),s("div",Ge,[s("div",Qe,[s("div",Xe,i(e.$t("theme.showStatusBar")),1),s("div",Ye,i(e.$t("theme.showStatusBarDesc")),1)]),s("div",{class:R(["toggle-switch",{active:n.showStatusBar!==!1}]),onClick:t[3]||(t[3]=a=>U("showStatusBar"))},null,2)])])]),s("div",Ze,[s("div",Ke,i(e.$t("theme.wallpaper")),1),s("div",et,[s("div",tt,[s("div",st,[s("div",ot,[s("div",nt,[s("div",at,i(e.$t("theme.homeScreen")),1),s("div",{class:"wallpaper-preview",style:j(n.bg?{backgroundImage:`url('${n.bg}')`}:{}),onClick:t[4]||(t[4]=a=>O("home"))},[n.bg?I("",!0):(C(),y("span",lt,i(e.$t("theme.uploadHint")),1))],4)]),s("div",it,[s("div",rt,i(e.$t("theme.lockScreen")),1),s("div",{class:"wallpaper-preview",style:j(n.lockbg?{backgroundImage:`url('${n.lockbg}')`}:{}),onClick:t[5]||(t[5]=a=>O("lock"))},[n.lockbg?I("",!0):(C(),y("span",ct,i(e.$t("theme.uploadHint")),1))],4)])])])]),s("div",pt,[s("div",dt,[s("div",mt,i(e.$t("theme.homeScreenStyle")),1)]),T(N,{options:Q.value,modelValue:v(M),"onUpdate:modelValue":X,textAlign:"left"},null,8,["options","modelValue"])])])]),s("div",ut,[s("div",ht,i(e.$t("theme.appIcons")),1),s("div",ft,[s("div",vt,[s("div",bt,[s("div",gt,[(C(!0),y($e,null,Ie(z.value,a=>(C(),y("div",{key:a.key,class:"app-icon-item",onClick:c=>ee(a.key)},[s("div",yt,[n.appIcons&&n.appIcons[a.key]?(C(),y("img",{key:0,src:n.appIcons[a.key]},null,8,Ct)):I("",!0)]),s("span",wt,i(a.name),1)],8,_t))),128))])])])])]),s("div",St,[s("div",kt,i(e.$t("theme.fontSettings")),1),s("div",Pt,[s("div",Ft,[s("div",Tt,[T(N,{options:E.value,modelValue:v(g),"onUpdate:modelValue":pe,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),s("button",{class:"btn btn-secondary btn-sm",onClick:de},i(e.$t("save")),1),s("button",{class:"btn btn-danger btn-sm",onClick:se},i(e.$t("delete")),1)])]),s("div",$t,[s("div",It,[B(s("input",{type:"text",class:"base-input",style:{flex:"1"},"onUpdate:modelValue":t[6]||(t[6]=a=>w.value=a),placeholder:v(o)("theme.fontUrlPlaceholder")},null,8,Nt),[[D,w.value]]),s("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:oe},i(e.$t("confirm")),1)])]),s("div",At,[s("div",xt,[s("input",{type:"color",class:"color-picker-input",value:H.value,onInput:t[7]||(t[7]=a=>ne(a.target.value))},null,40,zt),s("input",{type:"text",class:"base-input",style:{flex:"1"},value:n.fontColor,onInput:t[8]||(t[8]=a=>ae(a.target.value)),placeholder:v(o)("theme.fontColorPlaceholder")},null,40,Ut),s("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:le},i(e.$t("confirm")),1)])]),s("div",Ot,[s("div",Lt,[s("div",Vt,i(e.$t("theme.appNameFontSize")),1)]),s("div",Rt,[s("button",{onClick:t[9]||(t[9]=a=>L(-1))},"-"),s("span",null,i(n.appLabelFontSize||10)+"px",1),s("button",{onClick:t[10]||(t[10]=a=>L(1))},"+")])])])]),s("div",jt,[s("div",Bt,i(e.$t("theme.themePresets")),1),s("div",Dt,[s("div",Mt,[s("div",Jt,[T(N,{options:q.value,modelValue:v(p),"onUpdate:modelValue":me,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),s("button",{class:"btn btn-secondary btn-sm",onClick:ue},i(e.$t("save")),1),s("button",{class:"btn btn-danger btn-sm",onClick:he},i(e.$t("delete")),1)])]),s("div",Ht,[s("div",Wt,[T(N,{options:G.value,modelValue:v(d),"onUpdate:modelValue":fe,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),s("button",{class:"btn btn-secondary btn-sm",onClick:ve},i(e.$t("save")),1),s("button",{class:"btn btn-danger btn-sm",onClick:be},i(e.$t("delete")),1)])]),s("div",Et,[s("div",qt,[s("div",Gt,[s("div",Qt,i(e.$t("theme.globalCss")),1),s("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:ge},i(e.$t("confirm")),1)]),B(s("textarea",{class:"base-input","onUpdate:modelValue":t[11]||(t[11]=a=>u.value=a),placeholder:v(o)("theme.cssPlaceholder"),style:{width:"100%","margin-top":"10px"}},null,8,Xt),[[D,u.value]])])])])]),s("div",Yt,[s("div",Zt,i(e.$t("theme.importExport")),1),s("div",Kt,[s("div",es,[s("div",ts,[s("button",{class:"btn btn-secondary big-btn",onClick:_e},i(e.$t("theme.exportPresets")),1),s("button",{class:"btn btn-secondary big-btn",onClick:ye},i(e.$t("theme.importPresets")),1),s("input",{type:"file",ref_key:"importInput",ref:x,class:"hidden-input",accept:".json",onChange:Ce},null,544)])])])])]),T(Ne,{visible:S.value,"onUpdate:visible":t[12]||(t[12]=a=>S.value=a),title:_.title,bizType:_.bizType,type:"basic",onPreviewReady:Z,onUploadComplete:K},null,8,["visible","title","bizType"])]))}},ls=Se(ss,[["__scopeId","data-v-274d90ad"]]);export{ls as default};

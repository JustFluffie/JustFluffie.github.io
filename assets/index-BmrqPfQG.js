import{_ as x,u as B,r as h,a as R,c as u,b as N,d as r,e,f as d,n as f,w as T,t as V,v as D,g as _,h as g,i as H,j as I,o as l,k as y,K as z,l as K,p as P}from"./index-BWKtMuGn.js";const j={class:"chat-module"},E={class:"chat-app-layout"},L={class:"left-controls",style:{display:"flex","align-items":"center"}},W={key:0,class:"title",id:"chatAppTitle"},$={id:"chatRoomTitleArea",class:"chat-room-title-area"},q={class:"right-controls",style:{display:"flex","align-items":"center"}},F={class:"chat-app-content"},G={__name:"index",setup(J){const o=N(),c=I(),v=B(),n=h(null),p=h(!0);R();const i=u(()=>["single-chat","single-chat-settings","memory-bank"].includes(o.name)),w=u(()=>!["single-chat-settings","memory-bank","profile-wallet"].includes(o.name));P("setShowMomentsCamera",a=>{p.value=a});const t=u(()=>{const a=o.path;return a.includes("/moments")?"moments":a.includes("/npc")?"npc":a.includes("/favorites")?"favorites":a.includes("/profile")&&o.name!=="profile-persona"?"profile":"chat"}),k=u(()=>{if(o.name==="chat-favorites"){const a=o.params.charId;if(!v.characters)return"收藏";const s=v.characters.find(m=>m.id===Number(a));return s?`${s.name}的收藏`:"收藏"}return o.name==="profile-persona"?"人设管理":"WeChat"}),C=()=>{i.value?window.history.state&&window.history.state.back?c.back():c.push("/chat/list"):window.history.length>1?c.back():c.push("/")},M=()=>{n.value&&n.value.openAddModal&&n.value.openAddModal()},b=()=>{n.value&&n.value.openPostMomentModal&&n.value.openPostMomentModal()};return(a,s)=>{const m=g("svg-icon"),A=g("router-view");return l(),r("div",j,[e("div",E,[w.value?(l(),r("div",{key:0,class:f(["app-header",{"moments-header-style":t.value==="moments"||t.value==="favorites","profile-header-style":t.value==="profile"}]),id:"chatAppHeader"},[e("div",L,[e("div",{class:f(["back-btn",{"white-icon":t.value==="moments"}]),onClick:C},[...s[0]||(s[0]=[e("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[e("polyline",{points:"15 18 9 12 15 6"})],-1)])],2),s[1]||(s[1]=e("div",{id:"chatRoomLeftArea"},null,-1))]),!i.value&&t.value!=="moments"&&t.value!=="favorites"&&t.value!=="profile"?(l(),r("div",W,V(k.value),1)):d("",!0),T(e("div",$,null,512),[[D,i.value]]),e("div",q,[!i.value&&t.value!=="moments"&&t.value!=="favorites"&&t.value!=="profile"?(l(),r("div",{key:0,class:"action-btn",id:"chatAppActionBtn",onClick:M},[_(m,{name:"plus-circle"})])):d("",!0),!i.value&&t.value==="moments"&&p.value?(l(),r("div",{key:1,class:"action-btn",id:"momentsActionBtn",onClick:b},[...s[2]||(s[2]=[e("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[e("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),e("circle",{cx:"12",cy:"13",r:"4"})],-1)])])):d("",!0),s[3]||(s[3]=e("div",{id:"chatRoomActionArea"},null,-1))])],2)):d("",!0),e("div",F,[_(A,null,{default:H(({Component:S})=>[(l(),y(z,{exclude:["SingleChat","SingleChatSettings","SingleMemoryBank"]},[(l(),y(K(S),{ref_key:"childRef",ref:n},null,512))],1024))]),_:1})])])])}}},U=x(G,[["__scopeId","data-v-9b56270c"]]);export{U as default};

import{cc as ve,r as b,cd as z,_ as be,k as he,H as me,N as ge,m as ke,q as fe,E as we,s as _e,c as E,t as F,d as ye,w as D,y as o,a2 as xe,o as k,e,f as V,z as a,v as P,x as B,a as f,b as x,F as K,A as J,b$ as Pe,n as C,M as q}from"./index-Cwxa-v8c.js";import{C as W}from"./CustomSelect-BW0-1Rno.js";const Ce=ve("backup",()=>{const N=b(""),s=b(""),p=b(!1),g=b(null);function h(l={chat:!0,characters:!0,settings:!0,appearance:!0,worldbook:!0}){const d={},r=localStorage.getItem("aiPhoneSingleChatData");if(r)try{const u=z.decompressFromUTF16(r),n=JSON.parse(u||r),c={};let m=!1;if(l.chat&&(c.messages=n.messages,m=!0),l.characters&&(c.characters=n.characters,c.userPersonas=n.userPersonas,c.favorites=n.favorites,m=!0),l.appearance&&(c.bubblePresets=n.bubblePresets,c.stickers=n.stickers,m=!0),m){const I=JSON.stringify(c),_=z.compressToUTF16(I);d.aiPhoneSingleChatData=_}}catch(u){console.error("Error processing single chat data for backup",u)}if(l.chat){const u=localStorage.getItem("aiPhoneMomentsData");u&&(d.aiPhoneMomentsData=u)}return l.settings&&["api_presets","api_activePresetName","api_imageHostProvider","api_imgbbApiKey","api_catboxUserHash","aiPhoneGlobalBackgroundActivity","aiPhoneGlobalProactiveScope","aiPhoneGlobalProactiveInterval","aiPhoneGlobalProactiveCooldown","aiPhoneGlobalProactiveDailyLimit","aiPhoneGlobalTriggerMode","aiPhoneGlobalProactiveIdleTime"].forEach(n=>{const c=localStorage.getItem(n);c!==null&&(d[n]=c)}),l.appearance&&["aiPhoneThemePresets","aiPhoneCurrentThemePreset","aiPhoneFontPresets","aiPhoneCurrentFontPreset","aiPhoneCssPresets","aiPhoneCurrentCssPreset"].forEach(n=>{const c=localStorage.getItem(n);c!==null&&(d[n]=c)}),l.worldbook&&["worldBooks","worldBookNextId"].forEach(n=>{const c=localStorage.getItem(n);c!==null&&(d[n]=c)}),JSON.stringify(d,null,2)}async function H(){if(!N.value){alert("请先设置 GitHub Token！");return}try{const l=await fetch("https://api.github.com/user/repos",{method:"POST",headers:{Authorization:`token ${N.value}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify({name:"phone-backup",private:!0,description:"Backup for Phone Vue App"})});if(l.ok){const d=await l.json();s.value=d.full_name,alert(`仓库 ${d.full_name} 创建成功！即将开始备份...`),await S()}else{const d=await l.json();if(d.errors&&d.errors[0].message==="name already exists on this account"){const r=await fetch("https://api.github.com/user",{headers:{Authorization:`token ${N.value}`}});if(r.ok){const u=await r.json();s.value=`${u.login}/phone-backup`,alert(`仓库已存在，已自动关联到 ${s.value}。即将开始备份...`),await S();return}}alert(`创建仓库失败: ${d.message}`)}}catch(l){console.error("Create repo failed:",l),alert(`创建仓库出错: ${l.message}`)}}async function S(){if(!N.value||!s.value){alert("请先设置 GitHub Token 和仓库地址！");return}if(p.value){alert("正在备份中，请稍候...");return}p.value=!0,alert("开始备份...");try{const l=h(),d="phone_backup.json",[r,u]=s.value.split("/"),n=`https://api.github.com/repos/${r}/${u}/contents/${d}`;let c;try{const w=await fetch(n,{headers:{Authorization:`token ${N.value}`,Accept:"application/vnd.github.v3+json"}});w.ok&&(c=(await w.json()).sha)}catch{}const I={message:`Backup from phone-vue-app: ${new Date().toISOString()}`,content:btoa(unescape(encodeURIComponent(l))),sha:c},_=await fetch(n,{method:"PUT",headers:{Authorization:`token ${N.value}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(I)});if(_.ok)g.value=new Date,alert("备份成功！");else{const w=await _.json();console.error("GitHub API Error:",w),alert(`备份失败: ${w.message}`)}}catch(l){console.error("Backup to GitHub failed:",l),alert(`备份过程中发生错误: ${l.message}`)}finally{p.value=!1}}async function T(){alert("从 GitHub 恢复的功能尚未实现。")}function A(l){try{const d=h(l),r=new Blob([d],{type:"application/json"}),u=URL.createObjectURL(r),n=document.createElement("a");n.href=u,n.download=`phone_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(u),alert("备份文件已开始下载！")}catch(d){console.error("Export backup failed:",d),alert(`导出备份文件时出错: ${d.message}`)}}function U(){const l=document.createElement("input");l.type="file",l.accept="application/json",l.onchange=d=>{const r=d.target.files[0];if(!r)return;const u=new FileReader;u.onload=n=>{try{const c=JSON.parse(n.target.result);if(confirm("这将覆盖所有当前数据，确定要导入吗？")){localStorage.clear();for(const m in c)Object.hasOwnProperty.call(c,m)&&localStorage.setItem(m,c[m]);alert("数据导入成功！请刷新页面以应用更改。")}}catch(c){console.error("Import backup failed:",c),alert(`导入失败，请确保文件格式正确: ${c.message}`)}},u.readAsText(r)},l.click()}return{githubToken:N,githubRepo:s,isBackingUp:p,lastBackupTime:g,backupToGitHub:S,restoreFromGitHub:T,exportBackupFile:A,importBackupFile:U,createBackupRepo:H}}),Se={class:"card"},Be={class:"card-title"},Te={class:"card-content"},Ae={class:"api-item-row"},Ue={style:{flex:"1","min-width":"0"}},Ie={class:"api-item-col"},Ne={class:"form-label",for:"api-url"},$e=["placeholder"],De={class:"api-item-col"},He={class:"form-label",for:"api-key"},je=["placeholder"],Ge={class:"api-item-row"},Me={class:"list-item-title",style:{"font-weight":"normal","white-space":"nowrap"}},Fe={style:{flex:"1",display:"flex",gap:"10px","align-items":"center","min-width":"0"}},Re={style:{flex:"1","min-width":"0",position:"relative"}},Oe={key:0,value:"",disabled:""},Ve=["value"],Ee={class:"card"},Ke={class:"card-title"},Le={class:"card-title-note",style:{padding:"0 16px 10px","margin-top":"-10px",color:"var(--danger-color)"}},ze={class:"card-content"},Je={class:"api-item-row"},qe={class:"list-item-content"},We={class:"list-item-title"},Ze={class:"list-item-subtitle"},Qe={class:"api-item-row"},Xe={class:"list-item-content"},Ye={class:"list-item-title"},et={class:"api-item-row"},tt={class:"list-item-content"},st={class:"list-item-title"},ot={class:"api-item-row"},it={class:"list-item-content"},at={class:"list-item-title"},lt={class:"api-item-row"},nt={class:"list-item-content"},ct={class:"list-item-title"},rt={class:"api-item-row"},dt={class:"list-item-content"},pt={class:"list-item-title"},ut={class:"list-item-subtitle"},vt={class:"mode-selector"},bt={key:0,class:"api-item-row"},ht={class:"list-item-content"},mt={class:"list-item-title"},gt={class:"list-item-subtitle"},kt={class:"card"},ft={class:"card-title"},wt={class:"card-content"},_t={class:"api-item-row"},yt={class:"list-item-content"},xt={class:"list-item-title"},Pt={class:"list-item-subtitle"},Ct={class:"api-item-row"},St={class:"list-item-content"},Bt={class:"list-item-title"},Tt={class:"list-item-subtitle"},At={class:"card"},Ut={class:"card-title"},It={class:"card-content"},Nt={class:"api-item-col"},$t={class:"form-label",for:"github-token"},Dt={class:"input-hint"},Ht={style:{display:"flex",gap:"10px"}},jt=["placeholder"],Gt={class:"api-item-col"},Mt={class:"form-label",for:"github-repo"},Ft={style:{display:"flex",gap:"10px"}},Rt=["placeholder"],Ot=["disabled"],Vt={class:"api-item-row"},Et=["disabled"],Kt={key:0,style:{"font-size":"12px",color:"var(--text-tertiary)","margin-top":"10px"}},Lt={class:"card"},zt={class:"card-title"},Jt={class:"card-content"},qt={class:"api-item-row"},Wt={class:"list-item-content",style:{flex:"1","min-width":"0"}},Zt={class:"list-item-title"},Qt={class:"list-item-subtitle"},Xt={style:{width:"120px","flex-shrink":"0"}},Yt={class:"api-item-col"},es={class:"form-label",for:"imgbb-api-key"},ts={class:"input-hint"},ss={style:{display:"flex",gap:"10px"}},os=["placeholder"],is={class:"api-item-col"},as={class:"form-label",for:"catbox-hash"},ls={class:"input-hint"},ns={style:{display:"flex",gap:"10px"}},cs=["placeholder"],rs={class:"card"},ds={class:"card-title"},ps={class:"card-content"},us={style:{"font-size":"13px",color:"var(--text-tertiary)","margin-bottom":"15px"}},vs={class:"api-item-row",style:{"border-bottom":"none","padding-bottom":"0"}},bs={class:"scope-list"},hs={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},ms={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},gs={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},ks={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},fs={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},ws={class:"scope-list",style:{"max-height":"300px","overflow-y":"auto"}},_s={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},ys={class:"scope-name"},xs=["onClick"],Ps={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},Cs={class:"scope-name"},Ss={__name:"API",setup(N){const{t:s}=he(),p=me(),g=ge(),h=Ce(),H=ke(),S=fe(),T=we(),A=b(""),U=b(""),l=b(""),d=b(!1),r=b([]),u=b(5),n=b(30),c=b(10),m=b("always"),I=b(15),_=b(""),w=b(""),$=b("catbox"),j=b(""),G=b(""),Z=b([{value:"catbox",label:"Catbox"},{value:"imgbb",label:"ImgBB"}]);_e(()=>{d.value=g.globalBackgroundActivity,r.value=[...g.globalProactiveScope||[]],u.value=g.globalProactiveInterval,n.value=g.globalProactiveCooldown,c.value=g.globalProactiveDailyLimit,m.value=g.globalTriggerMode,I.value=g.globalProactiveIdleTime,_.value=h.githubToken,w.value=h.githubRepo,$.value=p.imageHostProvider,j.value=p.imgbbApiKey,G.value=p.catboxUserHash});const Q=E(()=>p.presets.find(v=>v.name===p.activePresetName)||null);F(Q,v=>{v&&(A.value=v.apiKey,U.value=v.apiUrl,l.value=v.model)},{immediate:!0,deep:!0}),F([A,U,l],()=>{p.activePresetName&&p.addPreset(p.activePresetName,{apiKey:A.value,apiUrl:U.value,model:l.value})}),F([d,r,u,n,c,m,I],()=>{g.globalBackgroundActivity=d.value,g.globalProactiveScope=r.value,g.globalProactiveInterval=u.value,g.globalProactiveCooldown=n.value,g.globalProactiveDailyLimit=c.value,g.globalTriggerMode=m.value,g.globalProactiveIdleTime=I.value},{deep:!0}),F([_,w],()=>{h.githubToken=_.value,h.githubRepo=w.value}),F([$,j,G],()=>{p.imageHostProvider=$.value,p.imgbbApiKey=j.value,p.catboxUserHash=G.value},{deep:!0});function X(){S.showToast(s("api.toast.settingsSaved"))}function Y(){S.showInput(s("api.prompt.saveAsPreset"),"",v=>{v&&(p.addPreset(v,{apiKey:A.value,apiUrl:U.value,model:l.value}),S.showToast(s("api.toast.presetSaved",{name:v})))},s("api.prompt.enterPresetName"))}function ee(){S.showConfirm(s("api.confirm.deletePreset"),s("api.confirm.deletePresetMsg",{name:p.activePresetName}),()=>{p.deletePreset(p.activePresetName),S.showToast(s("api.toast.presetDeleted"))})}async function te(){const v={apiUrl:U.value,apiKey:A.value};await p.fetchModels(v)}const se=E(()=>{switch(T.permission){case"granted":return s("api.notificationsGranted");case"denied":return s("api.notificationsDenied");default:return s("api.notificationsDefault")}}),oe=()=>{T.permission!=="granted"?T.requestPermission():T.desktopNotificationsEnabled=!T.desktopNotificationsEnabled},ie=()=>{T.triggerNotification("测试通知","这是一条测试消息，用于验证通知功能是否正常工作。","/pwa-192x192.png",()=>{console.log("Test notification clicked!")})},ae=async()=>{h.githubToken=_.value,await h.createBackupRepo(),w.value=h.githubRepo},le=async()=>{h.githubToken=_.value,h.githubRepo=w.value,await h.backupToGitHub()};function ne(){window.open("https://github.com/settings/tokens/new?scopes=repo&description=Phone%20App%20Backup","_blank")}function ce(){window.open("https://api.imgbb.com/","_blank")}function re(){window.open("https://catbox.moe/user/","_blank")}function de(){S.showConfirm("确认清除所有数据？","此操作将永久删除所有本地存储的数据（包括聊天记录、API设置、背景图片等）。应用将重置为初始状态。请确保您已备份重要数据。",()=>{localStorage.clear(),window.location.reload()},{messageStyle:{color:"#FF3B30"},confirmText:"清除"})}const R=b(!1),y=b({chat:!0,characters:!0,settings:!0,appearance:!0,worldbook:!0});function M(v){y.value[v]=!y.value[v]}function pe(){h.exportBackupFile(y.value),R.value=!1}const O=b(!1),ue=E(()=>{const v=r.value||[];return v.includes("all")?s("api.scopeAll"):v.length===0?s("api.scopeNone"):s("api.scopeSelected",{count:v.length})});function L(v){const t=r.value;if(v==="all")t.includes("all")?r.value=[]:r.value=["all"];else if(t.includes("all"))r.value=[v];else{const i=t.indexOf(v);i>-1?t.splice(i,1):t.push(v),H.characters.length>0&&t.length===H.characters.length&&(r.value=["all"])}}return(v,t)=>(k(),ye(xe,{title:o(s)("api.title")},{action:D(()=>[e("button",{class:"header-save-btn",onClick:X},a(o(s)("save")),1)]),default:D(()=>[e("div",Se,[e("div",Be,a(o(s)("api.globalConfig")),1),e("div",Te,[e("div",Ae,[e("div",Ue,[V(W,{"model-value":o(p).activePresetName,options:o(p).presets.map(i=>({value:i.name,label:i.name})),"onUpdate:modelValue":t[0]||(t[0]=i=>o(p).switchPreset(i)),textAlign:"left",style:{width:"100%"}},null,8,["model-value","options"])]),e("button",{class:"btn btn-secondary btn-sm",onClick:Y},a(o(s)("api.saveAs")),1),e("button",{class:"btn btn-danger-light btn-sm",onClick:ee},a(o(s)("delete")),1)]),e("div",Ie,[e("label",Ne,a(o(s)("api.apiUrl")),1),P(e("input",{type:"text",id:"api-url",class:"base-input","onUpdate:modelValue":t[1]||(t[1]=i=>U.value=i),placeholder:o(s)("api.apiUrlPlaceholder")},null,8,$e),[[B,U.value]])]),e("div",De,[e("label",He,a(o(s)("api.apiKey")),1),P(e("input",{type:"password",id:"api-key",class:"base-input","onUpdate:modelValue":t[2]||(t[2]=i=>A.value=i),placeholder:o(s)("api.apiKeyPlaceholder")},null,8,je),[[B,A.value]])]),e("div",Ge,[e("div",Me,a(o(s)("api.model")),1),e("div",Fe,[e("div",Re,[P(e("select",{class:"native-select","onUpdate:modelValue":t[3]||(t[3]=i=>l.value=i)},[o(p).models.length===0?(k(),f("option",Oe,a(o(s)("api.modelPlaceholder")),1)):x("",!0),(k(!0),f(K,null,J(o(p).models,i=>(k(),f("option",{key:i,value:i},a(i),9,Ve))),128))],512),[[Pe,l.value]]),t[29]||(t[29]=e("div",{class:"select-arrow"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))]),e("button",{class:"btn btn-secondary btn-sm",onClick:te,style:{"white-space":"nowrap"}},a(o(s)("api.fetch")),1)])])])]),e("div",Ee,[e("div",Ke,a(o(s)("api.backgroundActivity")),1),e("div",Le,a(o(s)("api.backgroundActivityWarning")),1),e("div",ze,[e("div",Je,[e("div",qe,[e("div",We,a(o(s)("api.proactiveMessages")),1),e("div",Ze,a(o(s)("api.proactiveMessagesDesc")),1)]),e("div",{class:C(["toggle-switch",{active:d.value}]),onClick:t[4]||(t[4]=i=>d.value=!d.value)},null,2)]),d.value?(k(),f(K,{key:0},[e("div",Qe,[e("div",Xe,[e("div",Ye,a(o(s)("api.scope")),1)]),e("div",{class:"scope-selector",onClick:t[5]||(t[5]=i=>O.value=!0)},[e("span",null,a(ue.value),1),t[30]||(t[30]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"9 18 15 12 9 6"})],-1))])]),e("div",et,[e("div",tt,[e("div",st,a(o(s)("api.interval")),1)]),P(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=i=>u.value=i),class:"base-input base-input-short",placeholder:"5"},null,512),[[B,u.value,void 0,{number:!0}]])]),e("div",ot,[e("div",it,[e("div",at,a(o(s)("api.cooldown")),1)]),P(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=i=>n.value=i),class:"base-input base-input-short",placeholder:"30"},null,512),[[B,n.value,void 0,{number:!0}]])]),e("div",lt,[e("div",nt,[e("div",ct,a(o(s)("api.dailyLimit")),1)]),P(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=i=>c.value=i),class:"base-input base-input-short",placeholder:"10"},null,512),[[B,c.value,void 0,{number:!0}]])]),e("div",rt,[e("div",dt,[e("div",pt,a(o(s)("api.triggerMode")),1),e("div",ut,a(o(s)("api.triggerModeIdleHint")),1)]),e("div",vt,[e("div",{class:C(["mode-option",{active:m.value==="idle"}]),onClick:t[9]||(t[9]=i=>m.value="idle")},a(o(s)("api.triggerModeIdle")),3),e("div",{class:C(["mode-option",{active:m.value==="always"}]),onClick:t[10]||(t[10]=i=>m.value="always")},a(o(s)("api.triggerModeAlways")),3)])]),m.value==="idle"?(k(),f("div",bt,[e("div",ht,[e("div",mt,a(o(s)("api.idleTime")),1),e("div",gt,a(o(s)("api.idleTimeDesc")),1)]),P(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=i=>I.value=i),class:"base-input base-input-short",placeholder:"15"},null,512),[[B,I.value,void 0,{number:!0}]])])):x("",!0)],64)):x("",!0)])]),e("div",kt,[e("div",ft,a(o(s)("api.notificationSettings")),1),e("div",wt,[e("div",_t,[e("div",yt,[e("div",xt,a(o(s)("api.desktopNotifications")),1),e("div",Pt,a(se.value),1)]),e("div",{class:C(["toggle-switch",{active:o(T).desktopNotificationsEnabled}]),onClick:oe},null,2)]),e("div",Ct,[e("div",St,[e("div",Bt,a(o(s)("api.testNotification")),1),e("div",Tt,a(o(s)("api.testNotificationDesc")),1)]),e("button",{class:"btn btn-secondary btn-sm",onClick:ie},a(o(s)("api.test")),1)])])]),e("div",At,[e("div",Ut,a(o(s)("api.githubBackup")),1),e("div",It,[e("div",Nt,[e("label",$t,a(o(s)("api.githubToken")),1),e("div",Dt,a(o(s)("api.githubTokenHint")),1),e("div",Ht,[P(e("input",{type:"password",id:"github-token",class:"base-input small-placeholder","onUpdate:modelValue":t[12]||(t[12]=i=>_.value=i),placeholder:o(s)("api.githubTokenPlaceholder"),style:{flex:"1"}},null,8,jt),[[B,_.value]]),e("button",{class:"btn btn-secondary btn-sm",onClick:ne},a(o(s)("api.getToken")),1)])]),e("div",Gt,[e("label",Mt,a(o(s)("api.repoAddress")),1),e("div",Ft,[P(e("input",{type:"text",id:"github-repo",class:"base-input","onUpdate:modelValue":t[13]||(t[13]=i=>w.value=i),placeholder:o(s)("api.repoAddressPlaceholder"),style:{flex:"1"}},null,8,Rt),[[B,w.value]]),w.value?x("",!0):(k(),f("button",{key:0,class:"btn btn-secondary btn-sm",onClick:ae,disabled:!_.value},a(o(s)("api.createRepo")),9,Ot))])]),e("div",Vt,[e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:le,disabled:o(h).isBackingUp},a(o(h).isBackingUp?o(s)("api.backingUp"):o(s)("api.backupNow")),9,Et),e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:t[14]||(t[14]=(...i)=>o(h).restoreFromGitHub&&o(h).restoreFromGitHub(...i))},a(o(s)("api.restoreBackup")),1)]),o(h).lastBackupTime?(k(),f("p",Kt,a(o(s)("api.lastBackup"))+" "+a(new Date(o(h).lastBackupTime).toLocaleString()),1)):x("",!0)])]),e("div",Lt,[e("div",zt,a(o(s)("api.imageHost")),1),e("div",Jt,[e("div",qt,[e("div",Wt,[e("div",Zt,a(o(s)("api.defaultImageHost")),1),e("div",Qt,a(o(s)("api.defaultImageHostDesc")),1)]),e("div",Xt,[V(W,{"model-value":$.value,options:Z.value,"onUpdate:modelValue":t[15]||(t[15]=i=>$.value=i),textAlign:"right"},null,8,["model-value","options"])])]),e("div",Yt,[e("label",es,a(o(s)("api.imgbbApiKey")),1),e("div",ts,a(o(s)("api.imgbbApiKeyHint")),1),e("div",ss,[P(e("input",{type:"password",id:"imgbb-api-key",class:"base-input small-placeholder","onUpdate:modelValue":t[16]||(t[16]=i=>j.value=i),placeholder:o(s)("api.imgbbApiKeyPlaceholder"),style:{flex:"1"}},null,8,os),[[B,j.value]]),e("button",{class:"btn btn-secondary btn-sm",onClick:ce},a(o(s)("api.getImgbbApiKey")),1)])]),e("div",is,[e("label",as,a(o(s)("api.catboxUserHash")),1),e("div",ls,a(o(s)("api.catboxUserHashHint")),1),e("div",ns,[P(e("input",{type:"text",id:"catbox-hash",class:"base-input small-placeholder","onUpdate:modelValue":t[17]||(t[17]=i=>G.value=i),placeholder:o(s)("api.catboxUserHashPlaceholder"),style:{flex:"1"}},null,8,cs),[[B,G.value]]),e("button",{class:"btn btn-secondary btn-sm",onClick:re},a(o(s)("api.getCatboxUserHash")),1)])])])]),e("div",rs,[e("div",ds,a(o(s)("api.dataBackup")),1),e("div",ps,[e("p",us,a(o(s)("api.dataBackupDesc")),1),e("div",vs,[e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:t[18]||(t[18]=i=>R.value=!0)},a(o(s)("api.exportBackupFile")),1),e("button",{class:"btn btn-secondary",style:{flex:"1"},onClick:t[19]||(t[19]=(...i)=>o(h).importBackupFile&&o(h).importBackupFile(...i))},a(o(s)("api.importBackupFile")),1)])])]),e("div",{class:"danger-zone"},[e("button",{class:"btn btn-danger big-btn",onClick:de},[...t[31]||(t[31]=[e("div",{class:"danger-btn-content"},[e("div",{class:"danger-btn-title"},"清除所有数据"),e("div",{class:"danger-btn-desc"},"此操作将清除所有聊天记录、设置和本地数据，且无法恢复")],-1)])])]),V(q,{visible:R.value,"onUpdate:visible":t[25]||(t[25]=i=>R.value=i),title:"导出选项",bodyClass:"no-padding"},{footer:D(()=>[e("button",{class:"modal-btn confirm",onClick:pe},"确认导出")]),default:D(()=>[e("div",bs,[e("div",{class:"scope-item",onClick:t[20]||(t[20]=i=>M("chat"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.chat}])},[y.value.chat?(k(),f("svg",hs,[...t[32]||(t[32]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[33]||(t[33]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"聊天数据"),e("span",{class:"scope-desc"},"包含聊天记录和朋友圈")],-1))]),e("div",{class:"scope-item",onClick:t[21]||(t[21]=i=>M("characters"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.characters}])},[y.value.characters?(k(),f("svg",ms,[...t[34]||(t[34]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[35]||(t[35]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"角色数据"),e("span",{class:"scope-desc"},"包含角色卡片、用户人设和收藏")],-1))]),e("div",{class:"scope-item",onClick:t[22]||(t[22]=i=>M("settings"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.settings}])},[y.value.settings?(k(),f("svg",gs,[...t[36]||(t[36]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[37]||(t[37]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"API设置"),e("span",{class:"scope-desc"},"包含API配置、图床、后台设置")],-1))]),e("div",{class:"scope-item",onClick:t[23]||(t[23]=i=>M("appearance"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.appearance}])},[y.value.appearance?(k(),f("svg",ks,[...t[38]||(t[38]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[39]||(t[39]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"外观主题"),e("span",{class:"scope-desc"},"包含主题、字体、气泡样式")],-1))]),e("div",{class:"scope-item",onClick:t[24]||(t[24]=i=>M("worldbook"))},[e("div",{class:C(["scope-checkbox",{checked:y.value.worldbook}])},[y.value.worldbook?(k(),f("svg",fs,[...t[40]||(t[40]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),t[41]||(t[41]=e("div",{class:"scope-content"},[e("span",{class:"scope-name"},"世界书"),e("span",{class:"scope-desc"},"包含世界书设定")],-1))])])]),_:1},8,["visible"]),V(q,{visible:O.value,"onUpdate:visible":t[28]||(t[28]=i=>O.value=i),title:o(s)("api.selectScope"),bodyClass:"no-padding"},{footer:D(()=>[e("button",{class:"modal-btn confirm",onClick:t[27]||(t[27]=i=>O.value=!1)},a(o(s)("confirm")),1)]),default:D(()=>[e("div",ws,[e("div",{class:"scope-item",onClick:t[26]||(t[26]=i=>L("all"))},[e("div",{class:C(["scope-checkbox",{checked:r.value&&r.value.includes("all")}])},[r.value&&r.value.includes("all")?(k(),f("svg",_s,[...t[42]||(t[42]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),e("span",ys,a(o(s)("api.scopeAll")),1)]),(k(!0),f(K,null,J(o(H).characters,i=>(k(),f("div",{key:i.id,class:"scope-item",onClick:Bs=>L(i.id)},[e("div",{class:C(["scope-checkbox",{checked:r.value&&r.value.includes(i.id)}])},[r.value&&r.value.includes(i.id)?(k(),f("svg",Ps,[...t[43]||(t[43]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):x("",!0)],2),e("span",Cs,a(i.name),1)],8,xs))),128))])]),_:1},8,["visible","title"])]),_:1},8,["title"]))}},Us=be(Ss,[["__scopeId","data-v-15c0d246"]]);export{Us as default};

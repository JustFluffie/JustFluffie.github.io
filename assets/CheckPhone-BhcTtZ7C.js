import{_ as T,r as h,x as H,a5 as R,c as B,d as k,o as b,e as t,g as U,f as x,E as f,t as O,w as z,A as j,D as M,N as W,F,C as q,y as N,m as V,u as J,b as K,k as G,i as L,B as Q,a8 as X}from"./index-BkVVehS0.js";const Y={key:0,class:"upload-hint"},Z={class:"left-section"},tt={key:0,class:"upload-hint"},et={class:"date-info"},at={class:"weekday"},ot={class:"date"},st={class:"right-section"},nt={class:"text-inputs-row"},lt={class:"photos-row"},dt={key:0,class:"upload-hint"},it={key:0,class:"upload-hint"},rt={__name:"CheckPhoneHeader",props:{widgetData:{type:Object,default:()=>({background:"",avatar:"",photos:["",""],photoTexts:["",""]})}},emits:["update:widgetData"],setup(p,{emit:C}){var a,e;const s=p,w=C,d=h(!1),r=h("background"),l=h(0),g=h([((a=s.widgetData.photoTexts)==null?void 0:a[0])||"",((e=s.widgetData.photoTexts)==null?void 0:e[1])||""]),D=h(""),m=h("");let c=null;const i=()=>{const o=new Date,n=(o.getMonth()+1).toString().padStart(2,"0"),y=o.getDate().toString().padStart(2,"0");D.value=`${n}.${y}`;const E=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];m.value=E[o.getDay()]};H(()=>{i(),c=setInterval(i,6e4)}),R(()=>{c&&clearInterval(c)});const v=B(()=>s.widgetData.background?{backgroundImage:`url('${s.widgetData.background}')`,backgroundColor:"transparent"}:{backgroundColor:"#e0e0e0"}),$=B(()=>s.widgetData.avatar?{backgroundImage:`url('${s.widgetData.avatar}')`,backgroundColor:"transparent"}:{backgroundColor:"#e0e0e0"}),_=o=>s.widgetData.photos[o]?{backgroundImage:`url('${s.widgetData.photos[o]}')`,backgroundColor:"transparent"}:{backgroundColor:"#e0e0e0"},I=()=>{r.value="background",d.value=!0},A=()=>{r.value="avatar",d.value=!0},S=o=>{l.value=o,r.value=`photo${o}`,d.value=!0},P=o=>{const n={...s.widgetData};r.value==="background"?n.background=o.content:r.value==="avatar"?n.avatar=o.content:r.value.startsWith("photo")&&(n.photos=[...s.widgetData.photos],n.photos[l.value]=o.content),w("update:widgetData",n)},u=o=>{const n={...s.widgetData,photoTexts:[...g.value]};w("update:widgetData",n)};return(o,n)=>(b(),k("div",{class:"check-phone-header",onClick:M(I,["stop"])},[t("div",{class:"widget-background",style:f(v.value)},[p.widgetData.background?x("",!0):(b(),k("div",Y," 点击上传 "))],4),t("div",{class:"widget-content",onClick:n[8]||(n[8]=M(()=>{},["stop"]))},[t("div",Z,[t("div",{class:"avatar-circle",style:f($.value),onClick:A},[p.widgetData.avatar?x("",!0):(b(),k("div",tt," 点击上传 "))],4),t("div",et,[t("div",at,O(m.value),1),t("div",ot,O(D.value),1)])]),t("div",st,[t("div",nt,[z(t("input",{"onUpdate:modelValue":n[0]||(n[0]=y=>g.value[0]=y),type:"text",class:"photo-text-input",placeholder:"点击输入文字",onBlur:n[1]||(n[1]=y=>u()),onClick:n[2]||(n[2]=M(()=>{},["stop"]))},null,544),[[j,g.value[0]]]),z(t("input",{"onUpdate:modelValue":n[3]||(n[3]=y=>g.value[1]=y),type:"text",class:"photo-text-input",placeholder:"点击输入文字",onBlur:n[4]||(n[4]=y=>u()),onClick:n[5]||(n[5]=M(()=>{},["stop"]))},null,544),[[j,g.value[1]]])]),t("div",lt,[t("div",{class:"photo-item",style:f(_(0)),onClick:n[6]||(n[6]=y=>S(0))},[p.widgetData.photos[0]?x("",!0):(b(),k("div",dt," 点击上传 "))],4),t("div",{class:"photo-item",style:f(_(1)),onClick:n[7]||(n[7]=y=>S(1))},[p.widgetData.photos[1]?x("",!0):(b(),k("div",it," 点击上传 "))],4)])])]),U(W,{visible:d.value,"onUpdate:visible":n[9]||(n[9]=y=>d.value=y),type:"basic","biz-type":r.value,onUploadComplete:P},null,8,["visible","biz-type"])]))}},ct=T(rt,[["__scopeId","data-v-ac55a0ae"]]),ut={class:"check-phone-middle-widget"},pt={class:"photo-section"},vt={class:"photo-wrapper"},ht={key:0,class:"upload-hint"},gt={class:"app-section"},mt={class:"app-grid-wrapper"},bt={class:"app-grid"},kt=["onClick"],Dt={class:"app-label"},wt={__name:"CheckPhoneMiddleWidget",props:{widgetData:{type:Object,default:()=>({photo:""})}},emits:["update:widgetData"],setup(p,{emit:C}){const s=p,w=C,d=h(!1),r=[{label:"日记",color:"rgba(255, 255, 255, 0.9)",route:"/diary"},{label:"备忘录",color:"rgba(255, 255, 255, 0.9)",route:"/memo"},{label:"微信",color:"rgba(255, 255, 255, 0.9)",route:"/chat"},{label:"行程表",color:"rgba(255, 255, 255, 0.9)",route:"/schedule"}],l=B(()=>s.widgetData.photo?{backgroundImage:`url('${s.widgetData.photo}')`,backgroundColor:"transparent"}:{backgroundColor:"rgba(255, 255, 255, 0.3)"}),g=()=>{d.value=!0},D=c=>{console.log("打开应用:",c.label)},m=c=>{const i={...s.widgetData};i.photo=c.content,w("update:widgetData",i)};return(c,i)=>(b(),k("div",ut,[t("div",pt,[t("div",vt,[t("div",{class:"photo-container",style:f(l.value),onClick:g},[p.widgetData.photo?x("",!0):(b(),k("div",ht," 点击上传 "))],4)])]),t("div",gt,[t("div",mt,[t("div",bt,[(b(),k(F,null,q(r,(v,$)=>t("div",{key:$,class:"app-item",onClick:_=>D(v)},[t("div",{class:"app-icon",style:f({background:v.color})},null,4),t("div",Dt,O(v.label),1)],8,kt)),64))])])]),U(W,{visible:d.value,"onUpdate:visible":i[0]||(i[0]=v=>d.value=v),type:"basic","biz-type":"photo",onUploadComplete:m},null,8,["visible"])]))}},Ct=T(wt,[["__scopeId","data-v-6c19492d"]]),_t={class:"check-phone-bottom-widget"},yt={class:"app-section"},$t={class:"app-grid-wrapper"},ft={class:"app-grid"},Ut=["onClick"],xt={class:"app-label"},It={class:"photo-section"},St={class:"photo-wrapper"},Pt={key:0,class:"upload-hint"},Mt={__name:"CheckPhoneBottomWidget",props:{widgetData:{type:Object,default:()=>({photo:""})}},emits:["update:widgetData"],setup(p,{emit:C}){const s=p,w=C,d=h(!1),r=[{label:"购买记录",color:"rgba(255, 255, 255, 0.9)",route:"/purchase"},{label:"搜索记录",color:"rgba(255, 255, 255, 0.9)",route:"/search"},{label:"主题",color:"rgba(255, 255, 255, 0.9)",route:"/theme"},{label:"app1",color:"rgba(255, 255, 255, 0.9)",route:"/app1"}],l=B(()=>s.widgetData.photo?{backgroundImage:`url('${s.widgetData.photo}')`,backgroundColor:"transparent"}:{backgroundColor:"rgba(255, 255, 255, 0.3)"}),g=()=>{d.value=!0},D=c=>{console.log("打开应用:",c.label)},m=c=>{const i={...s.widgetData};i.photo=c.content,w("update:widgetData",i)};return(c,i)=>(b(),k("div",_t,[t("div",yt,[t("div",$t,[t("div",ft,[(b(),k(F,null,q(r,(v,$)=>t("div",{key:$,class:"app-item",onClick:_=>D(v)},[t("div",{class:"app-icon",style:f({background:v.color})},null,4),t("div",xt,O(v.label),1)],8,Ut)),64))])])]),t("div",It,[t("div",St,[t("div",{class:"photo-container",style:f(l.value),onClick:g},[p.widgetData.photo?x("",!0):(b(),k("div",Pt," 点击上传 "))],4)])]),U(W,{visible:d.value,"onUpdate:visible":i[0]||(i[0]=v=>d.value=v),type:"basic","biz-type":"photo",onUploadComplete:m},null,8,["visible"])]))}},Bt=T(Mt,[["__scopeId","data-v-d691a8f6"]]),Tt={class:"check-phone-widget-container"},At={class:"widget-item top-widget"},Ot={class:"widget-item middle-widget"},Wt={class:"widget-item bottom-widget"},zt={__name:"CheckPhoneWidgetContainer",props:{headerData:{type:Object,required:!0},middleData:{type:Object,required:!0},bottomData:{type:Object,required:!0}},emits:["update:headerData","update:middleData","update:bottomData"],setup(p,{emit:C}){const s=C,w=l=>{s("update:headerData",l)},d=l=>{s("update:middleData",l)},r=l=>{s("update:bottomData",l)};return(l,g)=>(b(),k("div",Tt,[t("div",At,[U(ct,{"widget-data":p.headerData,"onUpdate:widgetData":w},null,8,["widget-data"])]),t("div",Ot,[U(Ct,{"widget-data":p.middleData,"onUpdate:widgetData":d},null,8,["widget-data"])]),t("div",Wt,[U(Bt,{"widget-data":p.bottomData,"onUpdate:widgetData":r},null,8,["widget-data"])])]))}},jt=T(zt,[["__scopeId","data-v-24ee169f"]]),Nt={class:"check-phone-dock"},Ht={class:"message-row other-message"},Rt={key:0,class:"upload-hint"},Ft=["data-placeholder"],qt={class:"message-row my-message"},Et=["data-placeholder"],Vt={key:0,class:"upload-hint"},Jt={__name:"CheckPhoneDock",props:{dockData:{type:Object,default:()=>({avatars:{other:"",mine:""},messages:{other:"",mine:""}})}},emits:["update:dockData"],setup(p,{emit:C}){var P,u;const s=p,w=C,d=h(!1),r=h("avatar-other"),l=h({other:((P=s.dockData.messages)==null?void 0:P.other)||"",mine:((u=s.dockData.messages)==null?void 0:u.mine)||""}),g=h(!1),D=h(null),m=h(null);N(()=>l.value.other,a=>{D.value&&D.value.textContent!==a&&(D.value.textContent=a)},{immediate:!0}),N(()=>l.value.mine,a=>{m.value&&m.value.textContent!==a&&(m.value.textContent=a)},{immediate:!0});const c=()=>{g.value=!0},i=(a,e)=>{g.value=!1,l.value[e]=a.target.textContent},v=(a,e)=>{g.value||(l.value[e]=a.target.textContent)},$=(a,e)=>{l.value[e]=a.target.textContent,S()},_=a=>{var o;const e=(o=s.dockData.avatars)==null?void 0:o[a];return e?{backgroundImage:`url('${e}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"transparent"}:{backgroundColor:"rgba(255, 255, 255, 0.9)"}},I=a=>{r.value=`avatar-${a}`,d.value=!0},A=a=>{const e={...s.dockData,avatars:{...s.dockData.avatars}};r.value==="avatar-other"?e.avatars.other=a.content:r.value==="avatar-mine"&&(e.avatars.mine=a.content),w("update:dockData",e)},S=a=>{const e={...s.dockData,messages:{...l.value}};w("update:dockData",e)};return(a,e)=>(b(),k("div",Nt,[t("div",Ht,[t("div",{class:"avatar",style:f(_("other")),onClick:e[0]||(e[0]=o=>I("other"))},[p.dockData.avatars.other?x("",!0):(b(),k("div",Rt," 点击上传 "))],4),t("div",{ref_key:"bubbleOtherRef",ref:D,class:"bubble bubble-other",onClick:e[1]||(e[1]=M(()=>{},["stop"])),contenteditable:"true",onCompositionstart:c,onCompositionend:e[2]||(e[2]=o=>i(o,"other")),onInput:e[3]||(e[3]=o=>v(o,"other")),onBlur:e[4]||(e[4]=o=>$(o,"other")),"data-placeholder":l.value.other?"":"点击输入文字"},null,40,Ft)]),t("div",qt,[t("div",{ref_key:"bubbleMineRef",ref:m,class:"bubble bubble-mine",onClick:e[5]||(e[5]=M(()=>{},["stop"])),contenteditable:"true",onCompositionstart:c,onCompositionend:e[6]||(e[6]=o=>i(o,"mine")),onInput:e[7]||(e[7]=o=>v(o,"mine")),onBlur:e[8]||(e[8]=o=>$(o,"mine")),"data-placeholder":l.value.mine?"":"点击输入文字"},null,40,Et),t("div",{class:"avatar",style:f(_("mine")),onClick:e[9]||(e[9]=o=>I("mine"))},[p.dockData.avatars.mine?x("",!0):(b(),k("div",Vt," 点击上传 "))],4)]),U(W,{visible:d.value,"onUpdate:visible":e[10]||(e[10]=o=>d.value=o),type:"basic","biz-type":r.value,onUploadComplete:A},null,8,["visible","biz-type"])]))}},Kt=T(Jt,[["__scopeId","data-v-68e4105e"]]),Gt={class:"check-phone-container"},Lt={class:"char-phone-frame"},Qt={class:"char-phone-screen"},Xt={class:"char-status-bar"},Yt={class:"time"},Zt={class:"char-content"},te={__name:"CheckPhone",setup(p){const{t:C}=V(),s=K(),w=J(),d=s.params.charId,r=B(()=>w.getCharacter(d));B(()=>r.value?r.value.name:C("chat.unknownCharacter"));const l=h("");let g=null;const D=()=>{const u=new Date,a=u.getHours().toString().padStart(2,"0"),e=u.getMinutes().toString().padStart(2,"0");l.value=`${a}:${e}`};H(()=>{D(),g=setInterval(D,1e3),$()}),R(()=>{g&&clearInterval(g)});const m=h({background:"",avatar:"",photos:["",""],photoTexts:["",""]}),c=h({photo:"",apps:[{icon:"",label:""},{icon:"",label:""},{icon:"",label:""},{icon:"",label:""}]}),i=h({photo:"",apps:[{icon:"",label:""},{icon:"",label:""},{icon:"",label:""},{icon:"",label:""}]}),v=h([{id:"messages",label:"消息",icon:""},{id:"photos",label:"相册",icon:""},{id:"music",label:"音乐",icon:""},{id:"settings",label:"设置",icon:""}]),$=()=>{const u=`checkphone_${d}`,a=localStorage.getItem(u);if(a)try{const e=JSON.parse(a);e.header&&(m.value=e.header),e.middle&&(c.value=e.middle),e.bottom&&(i.value=e.bottom),e.dockApps&&(v.value=e.dockApps)}catch(e){console.error("Failed to load check phone data:",e)}},_=()=>{const u=`checkphone_${d}`,a={header:m.value,middle:c.value,bottom:i.value,dockApps:v.value};localStorage.setItem(u,JSON.stringify(a))},I=u=>{m.value=u,_()},A=u=>{c.value=u,_()},S=u=>{i.value=u,_()},P=u=>{console.log("App clicked:",u)};return(u,a)=>(b(),G(X,{title:Q(C)("checkPhone.title","查看手机"),"no-padding":""},{default:L(()=>[t("div",Gt,[t("div",Lt,[a[2]||(a[2]=t("div",{class:"char-notch"},null,-1)),t("div",Qt,[t("div",Xt,[t("span",Yt,O(l.value),1),a[0]||(a[0]=t("div",{class:"icons"},[t("span",null,"5G"),t("div",{class:"battery-icon"})],-1))]),t("div",Zt,[U(jt,{"header-data":m.value,"middle-data":c.value,"bottom-data":i.value,"onUpdate:headerData":I,"onUpdate:middleData":A,"onUpdate:bottomData":S},null,8,["header-data","middle-data","bottom-data"])]),U(Kt,{apps:v.value,onAppClick:P},null,8,["apps"]),a[1]||(a[1]=t("div",{class:"char-home-indicator"},null,-1))]),a[3]||(a[3]=t("div",{class:"char-btn-power"},null,-1)),a[4]||(a[4]=t("div",{class:"char-btn-volume-up"},null,-1)),a[5]||(a[5]=t("div",{class:"char-btn-volume-down"},null,-1))])])]),_:1},8,["title"]))}},ae=T(te,[["__scopeId","data-v-e2dae289"]]);export{ae as default};

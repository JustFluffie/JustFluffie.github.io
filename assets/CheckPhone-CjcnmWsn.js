import{_ as T,r as h,x as H,a5 as R,c as B,d as D,o as k,e as t,g as x,f as U,E as $,t as O,w as W,A as z,D as M,N as j,F as V,C as F,y as N,m as E,u as J,b as K,k as G,i as L,B as Q,a8 as X}from"./index-Dx1vmqaX.js";const Y={key:0,class:"upload-hint"},Z={class:"left-section"},tt={key:0,class:"upload-hint"},et={class:"date-info"},at={class:"weekday"},ot={class:"date"},st={class:"right-section"},nt={class:"text-inputs-row"},lt={class:"photos-row"},dt={key:0,class:"upload-hint"},it={key:0,class:"upload-hint"},rt={__name:"CheckPhoneHeader",props:{widgetData:{type:Object,default:()=>({background:"",avatar:"",photos:["",""],photoTexts:["",""]})}},emits:["update:widgetData"],setup(d,{emit:y}){var a,e;const s=d,w=y,r=h(!1),c=h("background"),l=h(0),g=h([((a=s.widgetData.photoTexts)==null?void 0:a[0])||"",((e=s.widgetData.photoTexts)==null?void 0:e[1])||""]),C=h(""),b=h("");let v=null;const u=()=>{const o=new Date,n=(o.getMonth()+1).toString().padStart(2,"0"),_=o.getDate().toString().padStart(2,"0");C.value=`${n}.${_}`;const q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];b.value=q[o.getDay()]};H(()=>{u(),v=setInterval(u,6e4)}),R(()=>{v&&clearInterval(v)});const i=B(()=>s.widgetData.background?{backgroundImage:`url('${s.widgetData.background}')`,backgroundColor:"transparent"}:{backgroundColor:"#e0e0e0"}),m=B(()=>s.widgetData.avatar?{backgroundImage:`url('${s.widgetData.avatar}')`,backgroundColor:"transparent"}:{backgroundColor:"#e0e0e0"}),f=o=>s.widgetData.photos[o]?{backgroundImage:`url('${s.widgetData.photos[o]}')`,backgroundColor:"transparent"}:{backgroundColor:"#e0e0e0"},I=()=>{c.value="background",r.value=!0},A=()=>{c.value="avatar",r.value=!0},S=o=>{l.value=o,c.value=`photo${o}`,r.value=!0},P=o=>{const n={...s.widgetData};c.value==="background"?n.background=o.content:c.value==="avatar"?n.avatar=o.content:c.value.startsWith("photo")&&(n.photos=[...s.widgetData.photos],n.photos[l.value]=o.content),w("update:widgetData",n)},p=o=>{const n={...s.widgetData,photoTexts:[...g.value]};w("update:widgetData",n)};return(o,n)=>(k(),D("div",{class:"check-phone-header",onClick:M(I,["stop"])},[t("div",{class:"widget-background",style:$(i.value)},[d.widgetData.background?U("",!0):(k(),D("div",Y," 点击上传 "))],4),t("div",{class:"widget-content",onClick:n[8]||(n[8]=M(()=>{},["stop"]))},[t("div",Z,[t("div",{class:"avatar-circle",style:$(m.value),onClick:A},[d.widgetData.avatar?U("",!0):(k(),D("div",tt," 点击上传 "))],4),t("div",et,[t("div",at,O(b.value),1),t("div",ot,O(C.value),1)])]),t("div",st,[t("div",nt,[W(t("input",{"onUpdate:modelValue":n[0]||(n[0]=_=>g.value[0]=_),type:"text",class:"photo-text-input",placeholder:"点击输入文字",onBlur:n[1]||(n[1]=_=>p()),onClick:n[2]||(n[2]=M(()=>{},["stop"]))},null,544),[[z,g.value[0]]]),W(t("input",{"onUpdate:modelValue":n[3]||(n[3]=_=>g.value[1]=_),type:"text",class:"photo-text-input",placeholder:"点击输入文字",onBlur:n[4]||(n[4]=_=>p()),onClick:n[5]||(n[5]=M(()=>{},["stop"]))},null,544),[[z,g.value[1]]])]),t("div",lt,[t("div",{class:"photo-item",style:$(f(0)),onClick:n[6]||(n[6]=_=>S(0))},[d.widgetData.photos[0]?U("",!0):(k(),D("div",dt," 点击上传 "))],4),t("div",{class:"photo-item",style:$(f(1)),onClick:n[7]||(n[7]=_=>S(1))},[d.widgetData.photos[1]?U("",!0):(k(),D("div",it," 点击上传 "))],4)])])]),x(j,{visible:r.value,"onUpdate:visible":n[9]||(n[9]=_=>r.value=_),type:"basic","biz-type":c.value,onUploadComplete:P},null,8,["visible","biz-type"])]))}},ct=T(rt,[["__scopeId","data-v-ac55a0ae"]]),ut={class:"check-phone-middle-widget"},pt={class:"photo-section"},vt={class:"photo-wrapper"},ht={key:0,class:"upload-hint"},gt={class:"app-section"},mt={class:"app-grid-wrapper"},bt={class:"app-grid"},kt=["onClick"],Dt={class:"app-label"},wt={__name:"CheckPhoneMiddleWidget",props:{widgetData:{type:Object,default:()=>({photo:""})}},emits:["update:widgetData"],setup(d,{emit:y}){const s=d,w=y,r=h(!1),c=[{label:"日记",color:"rgba(255, 255, 255, 0.9)",route:"/diary"},{label:"备忘录",color:"rgba(255, 255, 255, 0.9)",route:"/memo"},{label:"微信",color:"rgba(255, 255, 255, 0.9)",route:"/chat"},{label:"行程表",color:"rgba(255, 255, 255, 0.9)",route:"/schedule"}],l=B(()=>s.widgetData.photo?{backgroundImage:`url('${s.widgetData.photo}')`,backgroundColor:"transparent"}:{backgroundColor:"rgba(255, 255, 255, 0.3)"}),g=()=>{r.value=!0},C=v=>{console.log("打开应用:",v.label)},b=v=>{const u={...s.widgetData};u.photo=v.content,w("update:widgetData",u)};return(v,u)=>(k(),D("div",ut,[t("div",pt,[t("div",vt,[t("div",{class:"photo-container",style:$(l.value),onClick:g},[d.widgetData.photo?U("",!0):(k(),D("div",ht," 点击上传 "))],4)])]),t("div",gt,[t("div",mt,[t("div",bt,[(k(),D(V,null,F(c,(i,m)=>t("div",{key:m,class:"app-item",onClick:f=>C(i)},[t("div",{class:"app-icon",style:$({background:i.color})},null,4),t("div",Dt,O(i.label),1)],8,kt)),64))])])]),x(j,{visible:r.value,"onUpdate:visible":u[0]||(u[0]=i=>r.value=i),type:"basic","biz-type":"photo",onUploadComplete:b},null,8,["visible"])]))}},Ct=T(wt,[["__scopeId","data-v-fd1fa685"]]),yt={class:"check-phone-bottom-widget"},ft={class:"app-section"},_t={class:"app-grid-wrapper"},$t={class:"app-grid"},xt=["onClick"],Ut={class:"app-label"},It={class:"photo-section"},St={class:"photo-wrapper"},Pt={key:0,class:"upload-hint"},Mt={class:"text-inputs"},Bt={__name:"CheckPhoneBottomWidget",props:{widgetData:{type:Object,default:()=>({photo:"",text1:"",text2:""})}},emits:["update:widgetData"],setup(d,{emit:y}){const s=d,w=y,r=h(!1),c=[{label:"购买记录",color:"rgba(255, 255, 255, 0.9)",route:"/purchase"},{label:"搜索记录",color:"rgba(255, 255, 255, 0.9)",route:"/search"},{label:"主题",color:"rgba(255, 255, 255, 0.9)",route:"/theme"},{label:"app1",color:"rgba(255, 255, 255, 0.9)",route:"/app1"}],l=B(()=>s.widgetData.photo?{backgroundImage:`url('${s.widgetData.photo}')`,backgroundColor:"transparent"}:{backgroundColor:"rgba(255, 255, 255, 0.3)"}),g=()=>{r.value=!0},C=u=>{console.log("打开应用:",u.label)},b=u=>{const i={...s.widgetData};i.photo=u.content,w("update:widgetData",i)},v=()=>{w("update:widgetData",{...s.widgetData})};return(u,i)=>(k(),D("div",yt,[t("div",ft,[t("div",_t,[t("div",$t,[(k(),D(V,null,F(c,(m,f)=>t("div",{key:f,class:"app-item",onClick:I=>C(m)},[t("div",{class:"app-icon",style:$({background:m.color})},null,4),t("div",Ut,O(m.label),1)],8,xt)),64))])])]),t("div",It,[t("div",St,[t("div",{class:"photo-container",style:$(l.value),onClick:g},[d.widgetData.photo?U("",!0):(k(),D("div",Pt," 点击上传 "))],4),t("div",Mt,[W(t("input",{type:"text",class:"custom-input","onUpdate:modelValue":i[0]||(i[0]=m=>d.widgetData.text1=m),placeholder:"输入文本1",onInput:v},null,544),[[z,d.widgetData.text1]]),W(t("input",{type:"text",class:"custom-input","onUpdate:modelValue":i[1]||(i[1]=m=>d.widgetData.text2=m),placeholder:"输入文本2",onInput:v},null,544),[[z,d.widgetData.text2]])])])]),x(j,{visible:r.value,"onUpdate:visible":i[2]||(i[2]=m=>r.value=m),type:"basic","biz-type":"photo",onUploadComplete:b},null,8,["visible"])]))}},Tt=T(Bt,[["__scopeId","data-v-0ef9f349"]]),At={class:"check-phone-widget-container"},Ot={class:"widget-item top-widget"},Wt={class:"widget-item middle-widget"},zt={class:"widget-item bottom-widget"},jt={__name:"CheckPhoneWidgetContainer",props:{headerData:{type:Object,required:!0},middleData:{type:Object,required:!0},bottomData:{type:Object,required:!0}},emits:["update:headerData","update:middleData","update:bottomData"],setup(d,{emit:y}){const s=y,w=l=>{s("update:headerData",l)},r=l=>{s("update:middleData",l)},c=l=>{s("update:bottomData",l)};return(l,g)=>(k(),D("div",At,[t("div",Ot,[x(ct,{"widget-data":d.headerData,"onUpdate:widgetData":w},null,8,["widget-data"])]),t("div",Wt,[x(Ct,{"widget-data":d.middleData,"onUpdate:widgetData":r},null,8,["widget-data"])]),t("div",zt,[x(Tt,{"widget-data":d.bottomData,"onUpdate:widgetData":c},null,8,["widget-data"])])]))}},Nt=T(jt,[["__scopeId","data-v-7c848a0b"]]),Ht={class:"check-phone-dock"},Rt={class:"message-row other-message"},Vt={key:0,class:"upload-hint"},Ft=["data-placeholder"],qt={class:"message-row my-message"},Et=["data-placeholder"],Jt={key:0,class:"upload-hint"},Kt={__name:"CheckPhoneDock",props:{dockData:{type:Object,default:()=>({avatars:{other:"",mine:""},messages:{other:"",mine:""}})}},emits:["update:dockData"],setup(d,{emit:y}){var P,p;const s=d,w=y,r=h(!1),c=h("avatar-other"),l=h({other:((P=s.dockData.messages)==null?void 0:P.other)||"",mine:((p=s.dockData.messages)==null?void 0:p.mine)||""}),g=h(!1),C=h(null),b=h(null);N(()=>l.value.other,a=>{C.value&&C.value.textContent!==a&&(C.value.textContent=a)},{immediate:!0}),N(()=>l.value.mine,a=>{b.value&&b.value.textContent!==a&&(b.value.textContent=a)},{immediate:!0});const v=()=>{g.value=!0},u=(a,e)=>{g.value=!1,l.value[e]=a.target.textContent},i=(a,e)=>{g.value||(l.value[e]=a.target.textContent)},m=(a,e)=>{l.value[e]=a.target.textContent,S()},f=a=>{var o;const e=(o=s.dockData.avatars)==null?void 0:o[a];return e?{backgroundImage:`url('${e}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"transparent"}:{backgroundColor:"rgba(255, 255, 255, 0.9)"}},I=a=>{c.value=`avatar-${a}`,r.value=!0},A=a=>{const e={...s.dockData,avatars:{...s.dockData.avatars}};c.value==="avatar-other"?e.avatars.other=a.content:c.value==="avatar-mine"&&(e.avatars.mine=a.content),w("update:dockData",e)},S=a=>{const e={...s.dockData,messages:{...l.value}};w("update:dockData",e)};return(a,e)=>(k(),D("div",Ht,[t("div",Rt,[t("div",{class:"avatar",style:$(f("other")),onClick:e[0]||(e[0]=o=>I("other"))},[d.dockData.avatars.other?U("",!0):(k(),D("div",Vt," 点击上传 "))],4),t("div",{ref_key:"bubbleOtherRef",ref:C,class:"bubble bubble-other",onClick:e[1]||(e[1]=M(()=>{},["stop"])),contenteditable:"true",onCompositionstart:v,onCompositionend:e[2]||(e[2]=o=>u(o,"other")),onInput:e[3]||(e[3]=o=>i(o,"other")),onBlur:e[4]||(e[4]=o=>m(o,"other")),"data-placeholder":l.value.other?"":"点击输入文字"},null,40,Ft)]),t("div",qt,[t("div",{ref_key:"bubbleMineRef",ref:b,class:"bubble bubble-mine",onClick:e[5]||(e[5]=M(()=>{},["stop"])),contenteditable:"true",onCompositionstart:v,onCompositionend:e[6]||(e[6]=o=>u(o,"mine")),onInput:e[7]||(e[7]=o=>i(o,"mine")),onBlur:e[8]||(e[8]=o=>m(o,"mine")),"data-placeholder":l.value.mine?"":"点击输入文字"},null,40,Et),t("div",{class:"avatar",style:$(f("mine")),onClick:e[9]||(e[9]=o=>I("mine"))},[d.dockData.avatars.mine?U("",!0):(k(),D("div",Jt," 点击上传 "))],4)]),x(j,{visible:r.value,"onUpdate:visible":e[10]||(e[10]=o=>r.value=o),type:"basic","biz-type":c.value,onUploadComplete:A},null,8,["visible","biz-type"])]))}},Gt=T(Kt,[["__scopeId","data-v-68e4105e"]]),Lt={class:"check-phone-container"},Qt={class:"char-phone-frame"},Xt={class:"char-phone-screen"},Yt={class:"char-status-bar"},Zt={class:"time"},te={class:"char-content"},ee={__name:"CheckPhone",setup(d){const{t:y}=E(),s=K(),w=J(),r=s.params.charId,c=B(()=>w.getCharacter(r));B(()=>c.value?c.value.name:y("chat.unknownCharacter"));const l=h("");let g=null;const C=()=>{const p=new Date,a=p.getHours().toString().padStart(2,"0"),e=p.getMinutes().toString().padStart(2,"0");l.value=`${a}:${e}`};H(()=>{C(),g=setInterval(C,1e3),m()}),R(()=>{g&&clearInterval(g)});const b=h({background:"",avatar:"",photos:["",""],photoTexts:["",""]}),v=h({photo:"",apps:[{icon:"",label:""},{icon:"",label:""},{icon:"",label:""},{icon:"",label:""}]}),u=h({photo:"",apps:[{icon:"",label:""},{icon:"",label:""},{icon:"",label:""},{icon:"",label:""}]}),i=h([{id:"messages",label:"消息",icon:""},{id:"photos",label:"相册",icon:""},{id:"music",label:"音乐",icon:""},{id:"settings",label:"设置",icon:""}]),m=()=>{const p=`checkphone_${r}`,a=localStorage.getItem(p);if(a)try{const e=JSON.parse(a);e.header&&(b.value=e.header),e.middle&&(v.value=e.middle),e.bottom&&(u.value=e.bottom),e.dockApps&&(i.value=e.dockApps)}catch(e){console.error("Failed to load check phone data:",e)}},f=()=>{const p=`checkphone_${r}`,a={header:b.value,middle:v.value,bottom:u.value,dockApps:i.value};localStorage.setItem(p,JSON.stringify(a))},I=p=>{b.value=p,f()},A=p=>{v.value=p,f()},S=p=>{u.value=p,f()},P=p=>{console.log("App clicked:",p)};return(p,a)=>(k(),G(X,{title:Q(y)("checkPhone.title","查看手机"),"no-padding":""},{default:L(()=>[t("div",Lt,[t("div",Qt,[a[2]||(a[2]=t("div",{class:"char-notch"},null,-1)),t("div",Xt,[t("div",Yt,[t("span",Zt,O(l.value),1),a[0]||(a[0]=t("div",{class:"icons"},[t("span",null,"5G"),t("div",{class:"battery-icon"})],-1))]),t("div",te,[x(Nt,{"header-data":b.value,"middle-data":v.value,"bottom-data":u.value,"onUpdate:headerData":I,"onUpdate:middleData":A,"onUpdate:bottomData":S},null,8,["header-data","middle-data","bottom-data"])]),x(Gt,{apps:i.value,onAppClick:P},null,8,["apps"]),a[1]||(a[1]=t("div",{class:"char-home-indicator"},null,-1))]),a[3]||(a[3]=t("div",{class:"char-btn-power"},null,-1)),a[4]||(a[4]=t("div",{class:"char-btn-volume-up"},null,-1)),a[5]||(a[5]=t("div",{class:"char-btn-volume-down"},null,-1))])])]),_:1},8,["title"]))}},oe=T(ee,[["__scopeId","data-v-6b2f2d1f"]]);export{oe as default};

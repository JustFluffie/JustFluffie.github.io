import{_ as he,k as ve,q as fe,P as be,$ as V,r as y,c as P,s as ye,a as g,e as t,f as F,z as i,n as j,C as B,b as I,F as ge,A as _e,y as _,v as D,x as J,J as Ce,i as we,o as C}from"./index-Cwxa-v8c.js";import{C as N}from"./CustomSelect-BW0-1Rno.js";const ke={class:"app-screen active",id:"themeSettingsApp"},Pe={class:"app-header"},Se={class:"title"},Te={class:"action-btn"},Fe={class:"app-content theme-content"},$e={class:"card theme-section"},Ie={class:"card-content"},Ne={class:"theme-item no-icon"},ze={class:"item-content"},Oe={class:"item-label",style:{"font-weight":"600"}},Ue={class:"item-value"},Le={class:"theme-item no-icon"},xe={class:"item-content"},Ae={class:"item-label",style:{"font-weight":"600"}},Ve={class:"item-value"},je={class:"card theme-section"},Be={class:"card-title"},De={class:"card-content wallpaper-content"},Je={class:"wallpaper-container"},Me={class:"wallpaper-col"},Re={class:"section-title-center"},We={key:0,class:"upload-hint"},Ee={class:"wallpaper-col"},He={class:"section-title-center"},qe={key:0,class:"upload-hint"},Ge={class:"card theme-section"},Qe={class:"card-title"},Xe={class:"card-content"},Ye={class:"app-icons-grid-new"},Ze=["onClick"],Ke={class:"app-icon-box"},et=["src"],tt={class:"app-name"},st={class:"card theme-section"},ot={class:"card-title"},nt={class:"card-content"},at={class:"font-settings-container"},lt={style:{display:"flex",gap:"10px","margin-bottom":"10px","align-items":"center"}},it={style:{display:"flex",gap:"5px","margin-bottom":"10px","align-items":"center"}},rt=["placeholder"],ct={style:{display:"flex",gap:"5px","margin-bottom":"10px","align-items":"center"}},pt=["value"],mt=["value","placeholder"],dt={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ut={class:"item-label",style:{color:"var(--text-primary)"}},ht={class:"number-input"},vt={class:"card theme-section"},ft={class:"card-title"},bt={class:"card-content"},yt={class:"theme-presets-container"},gt={style:{display:"flex",gap:"10px","margin-bottom":"10px","align-items":"center"}},_t={style:{display:"flex",gap:"10px","margin-bottom":"10px","align-items":"center"}},Ct={class:"global-css-container"},wt={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"5px"}},kt={style:{color:"var(--text-primary)"}},Pt=["placeholder"],St={class:"card theme-section"},Tt={class:"card-title"},Ft={class:"card-content"},$t={class:"import-export-container flex-distribute-children"},It={__name:"Theme",setup(Nt){const{t:o}=ve(),$=we(),n=fe(),{themePresets:f,currentThemePreset:p,fontPresets:S,currentFontPreset:b,cssPresets:d,currentCssPreset:m}=be(n),l=V({}),w=y(""),u=y(""),k=y(!1),h=V({title:"",bizType:"theme",onConfirm:null}),z=y(""),M=y(null),O=y(null),U=P(()=>[{key:"chat",name:o("homeScreen.apps.chat")},{key:"worldbook",name:o("homeScreen.apps.worldbook")},{key:"preset",name:o("homeScreen.apps.preset")},{key:"calendar",name:o("homeScreen.apps.calendar")},{key:"api",name:o("homeScreen.apps.apiSettings")},{key:"theme",name:o("homeScreen.apps.theme")},{key:"spy",name:o("homeScreen.apps.spy")},{key:"check",name:o("homeScreen.apps.check")}]);P(()=>{const e=z.value==="home"?o("theme.homeScreen"):o("theme.lockScreen");return o("theme.setWallpaper",{type:e})});const R=P(()=>Object.keys(S.value||{}).map(e=>({value:e,label:e}))),W=P(()=>Object.keys(f.value||{}).map(e=>({value:e,label:e}))),E=P(()=>Object.keys(d.value||{}).map(e=>({value:e,label:e})));ye(()=>{T()});function T(){const e=o("theme.defaultTheme"),s=o("theme.defaultCss");f.value||(f.value={[e]:{bg:"",lockbg:"",appIcons:{},showFrame:!0,fontColor:"#1f1f1f",appLabelFontSize:10}});const a=f.value[p.value];if(a)Object.assign(l,JSON.parse(JSON.stringify(a)));else{p.value=e;const c=f.value[e]||{};Object.assign(l,JSON.parse(JSON.stringify(c)))}l.appIcons||(l.appIcons={}),l.appLabelFontSize||(l.appLabelFontSize=10),d.value||(d.value={[s]:""}),u.value=d.value[m.value]||""}const H=()=>{$.options.history.state.back?$.back():$.push("/")};function L(e){const s=l[e]===!1;l[e]=s,(e==="showFrame"||e==="showStatusBar")&&n.updateThemeSetting(e,s)}function x(e){z.value=e;const s=o(e==="home"?"theme.homeScreen":"theme.lockScreen");h.title=o("theme.setWallpaper",{type:s}),h.onConfirm=a=>{const c=(a.type==="url",a.content);e==="home"?l.bg=c:e==="lock"&&(l.lockbg=c)},k.value=!0}function q(e){var a;M.value=e;const s=((a=U.value.find(c=>c.key===e))==null?void 0:a.name)||"";h.title=o("theme.setAppIcon",{appName:s}),h.onConfirm=c=>{const r=(c.type==="url",c.content);G(e,r)},k.value=!0}function G(e,s){const a={...l.appIcons||{}};a[e]=s,l.appIcons=a}function Q(e){h.onConfirm&&h.onConfirm(e),k.value=!1}function X(e){n.switchFontPreset(e)}function Y(){const e=prompt(o("theme.prompt.enterFontPresetName"));if(e){const s=w.value.trim();if(s)try{new URL(s),n.saveFontPreset(e,s),n.showToast(o("theme.toast.saveSuccess"))}catch{n.showToast(o("theme.toast.invalidUrl"),"error")}else n.showToast(o("theme.toast.enterUrl"),"info")}}function Z(){n.showConfirm(o("theme.confirm.deleteFontPreset"),o("theme.confirm.deleteFontPresetMsg",{presetName:b.value}),()=>{const e=b.value;n.deleteFontPreset(e),b.value===e&&(b.value=o("theme.defaultTheme")),w.value=S.value[b.value]||""})}function K(){const e=w.value.trim();if(e)try{new URL(e),n.applyFont(e),n.showToast(o("theme.toast.fontApplied"),"info")}catch{n.showToast(o("theme.toast.invalidUrl"),"error")}}function ee(e){/^#[0-9A-F]{6}$/i.test(e)&&(l.fontColor=e,n.applyFontColor(e))}function te(e){(/^#([0-9A-F]{3}){1,2}$/i.test(e)||/^#([0-9A-F]{4}){1,2}$/i.test(e))&&(l.fontColor=e,n.applyFontColor(e))}function se(){n.applyFontColor(l.fontColor),n.showToast(o("theme.toast.colorApplied"),"info")}function A(e){let s=l.appLabelFontSize||10;s+=e,s<8&&(s=8),s>16&&(s=16),l.appLabelFontSize=s,n.applyAppLabelFontSize(s)}function oe(e){confirm(o("theme.confirm.switchTheme"))&&(n.switchThemePreset(e),T())}function ne(){const e=prompt(o("theme.prompt.enterThemePresetName"));if(e){const s=JSON.parse(JSON.stringify(l));s.bg=s.bg||"",s.lockbg=s.lockbg||"",s.appIcons=s.appIcons||{},s.fontColor=s.fontColor||"#1f1f1f",s.appLabelFontSize=s.appLabelFontSize||10,n.saveThemePreset(e,s),n.showToast(o("theme.toast.saveSuccess"))}}function ae(){n.showConfirm(o("theme.confirm.deleteThemePreset"),o("theme.confirm.deleteThemePresetMsg",{presetName:p.value}),()=>{const e=p.value;n.deleteThemePreset(e),p.value===e&&(p.value=o("theme.defaultTheme")),T()})}function le(e){n.switchCssPreset(e),u.value=d.value[e]||""}function ie(){const e=prompt(o("theme.prompt.enterCssPresetName"));if(e){const s=u.value.trim();s?s.includes("{")&&s.includes("}")?(n.saveCssPreset(e,s),n.showToast(o("theme.toast.saveSuccess"))):n.showToast(o("theme.toast.invalidCss"),"error"):n.showToast(o("theme.toast.enterCss"),"info")}}function re(){n.showConfirm(o("theme.confirm.deleteCssPreset"),o("theme.confirm.deleteCssPresetMsg",{presetName:m.value}),()=>{const e=m.value;n.deleteCssPreset(e),m.value===e&&(m.value=o("theme.defaultCss")),u.value=d.value[m.value]||""})}function ce(){const e=u.value.trim();e?e.includes("{")&&e.includes("}")?(n.applyCss(e),n.showToast(o("theme.toast.cssApplied"),"info")):n.showToast(o("theme.toast.invalidCss"),"error"):(n.applyCss(""),n.showToast(o("theme.toast.cssCleared"),"info"))}function pe(){const e={themePresets:f.value,currentThemePreset:p.value,fontPresets:S.value,currentFontPreset:b.value,cssPresets:d.value,currentCssPreset:m.value,exportDate:new Date().toISOString()},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),c=document.createElement("a");c.href=a,c.download=`ai_phone_theme_config_${new Date().toISOString().slice(0,10)}.json`,c.click(),URL.revokeObjectURL(a)}function me(){O.value.click()}function de(e){const s=e.target.files[0];if(!s)return;const a=new FileReader;a.onload=c=>{try{const r=JSON.parse(c.target.result);if(r.themePresets)for(const v in r.themePresets)f.value[v]=r.themePresets[v];if(r.fontPresets)for(const v in r.fontPresets)S.value[v]=r.fontPresets[v];if(r.cssPresets)for(const v in r.cssPresets)d.value[v]=r.cssPresets[v];confirm(o("theme.confirm.importSuccess"))&&(r.currentThemePreset&&n.switchThemePreset(r.currentThemePreset),r.currentFontPreset&&n.switchFontPreset(r.currentFontPreset),r.currentCssPreset&&n.switchCssPreset(r.currentCssPreset)),T(),n.showToast(o("theme.toast.importSuccess"),"success")}catch(r){n.showToast(o("theme.toast.importFailed"),"error"),console.error(r)}},a.readAsText(s),e.target.value=""}function ue(){const e={bg:l.bg||"",lockbg:l.lockbg||"",appIcons:l.appIcons||{},showFrame:l.showFrame!==!1,showStatusBar:l.showStatusBar!==!1,fontColor:l.fontColor||"#1f1f1f",appLabelFontSize:l.appLabelFontSize||10};n.saveThemePreset(p.value,e),n.saveCssPreset(m.value,u.value),n.initTheme(),n.showToast(o("theme.toast.saveSuccess"))}return(e,s)=>(C(),g("div",ke,[t("div",Pe,[t("div",{class:"back-btn",onClick:H},[...s[11]||(s[11]=[t("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])]),t("div",Se,i(e.$t("theme.title")),1),t("div",Te,[t("button",{class:"header-save-btn",onClick:ue},i(e.$t("save")),1)])]),t("div",Fe,[t("div",$e,[t("div",Ie,[t("div",Ne,[t("div",ze,[t("div",Oe,i(e.$t("theme.showFrame")),1),t("div",Ue,i(e.$t("theme.showFrameDesc")),1)]),t("div",{class:j(["toggle-switch",{active:l.showFrame!==!1}]),onClick:s[0]||(s[0]=a=>L("showFrame"))},null,2)]),t("div",Le,[t("div",xe,[t("div",Ae,i(e.$t("theme.showStatusBar")),1),t("div",Ve,i(e.$t("theme.showStatusBarDesc")),1)]),t("div",{class:j(["toggle-switch",{active:l.showStatusBar!==!1}]),onClick:s[1]||(s[1]=a=>L("showStatusBar"))},null,2)])])]),t("div",je,[t("div",Be,i(e.$t("theme.wallpaper")),1),t("div",De,[t("div",Je,[t("div",Me,[t("div",Re,i(e.$t("theme.homeScreen")),1),t("div",{class:"wallpaper-preview",style:B(l.bg?{backgroundImage:`url('${l.bg}')`}:{}),onClick:s[2]||(s[2]=a=>x("home"))},[l.bg?I("",!0):(C(),g("span",We,i(e.$t("theme.uploadHint")),1))],4)]),t("div",Ee,[t("div",He,i(e.$t("theme.lockScreen")),1),t("div",{class:"wallpaper-preview",style:B(l.lockbg?{backgroundImage:`url('${l.lockbg}')`}:{}),onClick:s[3]||(s[3]=a=>x("lock"))},[l.lockbg?I("",!0):(C(),g("span",qe,i(e.$t("theme.uploadHint")),1))],4)])])])]),t("div",Ge,[t("div",Qe,i(e.$t("theme.appIcons")),1),t("div",Xe,[t("div",Ye,[(C(!0),g(ge,null,_e(U.value,a=>(C(),g("div",{key:a.key,class:"app-icon-item",onClick:c=>q(a.key)},[t("div",Ke,[l.appIcons&&l.appIcons[a.key]?(C(),g("img",{key:0,src:l.appIcons[a.key]},null,8,et)):I("",!0)]),t("span",tt,i(a.name),1)],8,Ze))),128))])])]),t("div",st,[t("div",ot,i(e.$t("theme.fontSettings")),1),t("div",nt,[t("div",at,[t("div",lt,[F(N,{options:R.value,modelValue:_(b),"onUpdate:modelValue":X,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:Y},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:Z},i(e.$t("delete")),1)]),t("div",it,[D(t("input",{type:"text",class:"base-input",style:{flex:"1"},"onUpdate:modelValue":s[4]||(s[4]=a=>w.value=a),placeholder:_(o)("theme.fontUrlPlaceholder")},null,8,rt),[[J,w.value]]),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:K},i(e.$t("confirm")),1)]),t("div",ct,[t("input",{type:"color",class:"color-picker-input",value:l.fontColor,onInput:s[5]||(s[5]=a=>ee(a.target.value))},null,40,pt),t("input",{type:"text",class:"base-input",style:{flex:"1"},value:l.fontColor,onInput:s[6]||(s[6]=a=>te(a.target.value)),placeholder:_(o)("theme.fontColorPlaceholder")},null,40,mt),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:se},i(e.$t("confirm")),1)]),t("div",dt,[t("span",ut,i(e.$t("theme.appNameFontSize")),1),t("div",ht,[t("button",{onClick:s[7]||(s[7]=a=>A(-1))},"-"),t("span",null,i(l.appLabelFontSize||10)+"px",1),t("button",{onClick:s[8]||(s[8]=a=>A(1))},"+")])])])])]),t("div",vt,[t("div",ft,i(e.$t("theme.themePresets")),1),t("div",bt,[t("div",yt,[t("div",gt,[F(N,{options:W.value,modelValue:_(p),"onUpdate:modelValue":oe,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:ne},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:ae},i(e.$t("delete")),1)]),t("div",_t,[F(N,{options:E.value,modelValue:_(m),"onUpdate:modelValue":le,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:ie},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:re},i(e.$t("delete")),1)]),t("div",Ct,[t("div",wt,[t("span",kt,i(e.$t("theme.globalCss")),1),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:ce},i(e.$t("confirm")),1)]),D(t("textarea",{class:"base-input","onUpdate:modelValue":s[9]||(s[9]=a=>u.value=a),placeholder:_(o)("theme.cssPlaceholder")},null,8,Pt),[[J,u.value]])])])])]),t("div",St,[t("div",Tt,i(e.$t("theme.importExport")),1),t("div",Ft,[t("div",$t,[t("button",{class:"btn btn-secondary",onClick:pe},i(e.$t("theme.exportPresets")),1),t("button",{class:"btn btn-secondary",onClick:me},i(e.$t("theme.importPresets")),1),t("input",{type:"file",ref_key:"importInput",ref:O,class:"hidden-input",accept:".json",onChange:de},null,544)])])])]),F(Ce,{visible:k.value,"onUpdate:visible":s[10]||(s[10]=a=>k.value=a),title:h.title,bizType:h.bizType,type:"basic",onSendImage:Q},null,8,["visible","title","bizType"])]))}},Ut=he(It,[["__scopeId","data-v-7869f911"]]);export{Ut as default};

import{_ as _e,k as ye,q as ge,ce as we,P as Ce,$ as A,r as y,c as g,s as ke,a as w,e as t,f as P,z as i,n as j,C as B,b as N,y as f,F as Se,A as Pe,v as D,x as J,J as Te,i as Fe,o as C}from"./index-BLu8EIti.js";import{C as $}from"./CustomSelect-C_fqy3tZ.js";const $e={class:"app-screen active",id:"themeSettingsApp"},Ie={class:"app-header"},Ne={class:"title"},Oe={class:"action-btn"},Ue={class:"app-content theme-content"},ze={class:"card theme-section"},xe={class:"card-content"},Le={class:"theme-item no-icon"},Ve={class:"item-content"},Ae={class:"item-label",style:{"font-weight":"600"}},je={class:"item-value"},Be={class:"theme-item no-icon"},De={class:"item-content"},Je={class:"item-label",style:{"font-weight":"600"}},Me={class:"item-value"},Re={class:"card theme-section"},He={class:"card-title"},We={class:"card-content"},Ee={class:"theme-item no-icon"},qe={class:"item-content"},Ge={class:"wallpaper-container"},Qe={class:"wallpaper-col"},Xe={class:"section-title-center"},Ye={key:0,class:"upload-hint"},Ze={class:"wallpaper-col"},Ke={class:"section-title-center"},et={key:0,class:"upload-hint"},tt={class:"theme-item no-icon"},st={class:"item-content"},ot={class:"item-label"},nt={class:"card theme-section"},at={class:"card-title"},lt={class:"card-content"},it={class:"theme-item no-icon"},ct={class:"item-content"},rt={class:"app-icons-grid-new"},dt=["onClick"],mt={class:"app-icon-box"},pt=["src"],ht={class:"app-name"},ut={class:"card theme-section"},vt={class:"card-title"},ft={class:"card-content"},bt={class:"theme-item no-icon"},_t={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},yt={class:"theme-item no-icon"},gt={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},wt=["placeholder"],Ct={class:"theme-item no-icon"},kt={style:{display:"flex",gap:"5px","align-items":"center",flex:"1",width:"100%"}},St=["value"],Pt=["value","placeholder"],Tt={class:"theme-item no-icon"},Ft={class:"item-content"},$t={class:"item-label"},It={class:"number-input"},Nt={class:"card theme-section"},Ot={class:"card-title"},Ut={class:"card-content"},zt={class:"theme-item no-icon"},xt={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},Lt={class:"theme-item no-icon"},Vt={style:{display:"flex",gap:"10px","align-items":"center",flex:"1"}},At={class:"theme-item no-icon"},jt={class:"item-content",style:{"flex-direction":"column","align-items":"flex-start",gap:"5px",width:"100%"}},Bt={style:{display:"flex","justify-content":"space-between",width:"100%","align-items":"center"}},Dt={class:"item-label"},Jt=["placeholder"],Mt={class:"card theme-section"},Rt={class:"card-title"},Ht={class:"card-content"},Wt={class:"theme-item no-icon"},Et={class:"import-export-container",style:{flex:"1","justify-content":"space-around"}},qt={class:"card theme-section"},Gt={class:"card-content"},Qt={class:"theme-item no-icon"},Xt={class:"import-export-container",style:{flex:"1","justify-content":"space-around"}},Yt={__name:"Theme",setup(Zt){const{t:o}=ye(),I=Fe(),n=ge(),{sendNotification:M}=we(),{themePresets:b,currentThemePreset:d,fontPresets:T,currentFontPreset:_,cssPresets:p,currentCssPreset:m,homeScreen:R}=Ce(n),l=A({}),k=y(""),h=y(""),S=y(!1),u=A({title:"",bizType:"theme",onConfirm:null}),O=y(""),H=y(null),U=y(null),z=g(()=>[{key:"chat",name:o("homeScreen.apps.chat")},{key:"worldbook",name:o("homeScreen.apps.worldbook")},{key:"preset",name:o("homeScreen.apps.preset")},{key:"calendar",name:o("homeScreen.apps.calendar")},{key:"api",name:o("homeScreen.apps.apiSettings")},{key:"theme",name:o("homeScreen.apps.theme")},{key:"spy",name:o("homeScreen.apps.spy")},{key:"check",name:o("homeScreen.apps.check")}]);g(()=>{const e=O.value==="home"?o("theme.homeScreen"):o("theme.lockScreen");return o("theme.setWallpaper",{type:e})});const W=g(()=>Object.keys(T.value||{}).map(e=>({value:e,label:e}))),E=g(()=>Object.keys(b.value||{}).map(e=>({value:e,label:e}))),q=g(()=>Object.keys(p.value||{}).map(e=>({value:e,label:e}))),G=g(()=>[{value:1,label:"屏幕一"},{value:2,label:"屏幕二"}]);function Q(e){n.setHomeScreen(e)}ke(()=>{F()});function F(){const e=o("theme.defaultTheme"),s=o("theme.defaultCss");b.value||(b.value={[e]:{bg:"",lockbg:"",appIcons:{},showFrame:!0,fontColor:"#1f1f1f",appLabelFontSize:10}});const a=b.value[d.value];if(a)Object.assign(l,JSON.parse(JSON.stringify(a)));else{d.value=e;const r=b.value[e]||{};Object.assign(l,JSON.parse(JSON.stringify(r)))}l.appIcons||(l.appIcons={}),l.appLabelFontSize||(l.appLabelFontSize=10),p.value||(p.value={[s]:""}),h.value=p.value[m.value]||""}const X=()=>{I.options.history.state.back?I.back():I.push("/")};function x(e){const s=l[e]===!1;l[e]=s,(e==="showFrame"||e==="showStatusBar")&&n.updateThemeSetting(e,s)}function L(e){O.value=e;const s=o(e==="home"?"theme.homeScreen":"theme.lockScreen");u.title=o("theme.setWallpaper",{type:s}),u.onConfirm=a=>{const r=(a.type==="url",a.content);e==="home"?l.bg=r:e==="lock"&&(l.lockbg=r)},S.value=!0}function Y(e){var a;H.value=e;const s=((a=z.value.find(r=>r.key===e))==null?void 0:a.name)||"";u.title=o("theme.setAppIcon",{appName:s}),u.onConfirm=r=>{const c=(r.type==="url",r.content);Z(e,c)},S.value=!0}function Z(e,s){const a={...l.appIcons||{}};a[e]=s,l.appIcons=a}function K(e){u.onConfirm&&u.onConfirm(e),S.value=!1}function ee(e){n.switchFontPreset(e)}function te(){const e=prompt(o("theme.prompt.enterFontPresetName"));if(e){const s=k.value.trim();if(s)try{new URL(s),n.saveFontPreset(e,s),n.showToast(o("theme.toast.saveSuccess"))}catch{n.showToast(o("theme.toast.invalidUrl"),"error")}else n.showToast(o("theme.toast.enterUrl"),"info")}}function se(){n.showConfirm(o("theme.confirm.deleteFontPreset"),o("theme.confirm.deleteFontPresetMsg",{presetName:_.value}),()=>{const e=_.value;n.deleteFontPreset(e),_.value===e&&(_.value=o("theme.defaultTheme")),k.value=T.value[_.value]||""})}function oe(){const e=k.value.trim();if(e)try{new URL(e),n.applyFont(e),n.showToast(o("theme.toast.fontApplied"),"info")}catch{n.showToast(o("theme.toast.invalidUrl"),"error")}}function ne(e){/^#[0-9A-F]{6}$/i.test(e)&&(l.fontColor=e,n.applyFontColor(e))}function ae(e){(/^#([0-9A-F]{3}){1,2}$/i.test(e)||/^#([0-9A-F]{4}){1,2}$/i.test(e))&&(l.fontColor=e,n.applyFontColor(e))}function le(){n.applyFontColor(l.fontColor),n.showToast(o("theme.toast.colorApplied"),"info")}function V(e){let s=l.appLabelFontSize||10;s+=e,s<8&&(s=8),s>16&&(s=16),l.appLabelFontSize=s,n.applyAppLabelFontSize(s)}function ie(e){confirm(o("theme.confirm.switchTheme"))&&(n.switchThemePreset(e),F())}function ce(){const e=prompt(o("theme.prompt.enterThemePresetName"));if(e){const s=JSON.parse(JSON.stringify(l));s.bg=s.bg||"",s.lockbg=s.lockbg||"",s.appIcons=s.appIcons||{},s.fontColor=s.fontColor||"#1f1f1f",s.appLabelFontSize=s.appLabelFontSize||10,n.saveThemePreset(e,s),n.showToast(o("theme.toast.saveSuccess"))}}function re(){n.showConfirm(o("theme.confirm.deleteThemePreset"),o("theme.confirm.deleteThemePresetMsg",{presetName:d.value}),()=>{const e=d.value;n.deleteThemePreset(e),d.value===e&&(d.value=o("theme.defaultTheme")),F()})}function de(e){n.switchCssPreset(e),h.value=p.value[e]||""}function me(){const e=prompt(o("theme.prompt.enterCssPresetName"));if(e){const s=h.value.trim();s?s.includes("{")&&s.includes("}")?(n.saveCssPreset(e,s),n.showToast(o("theme.toast.saveSuccess"))):n.showToast(o("theme.toast.invalidCss"),"error"):n.showToast(o("theme.toast.enterCss"),"info")}}function pe(){n.showConfirm(o("theme.confirm.deleteCssPreset"),o("theme.confirm.deleteCssPresetMsg",{presetName:m.value}),()=>{const e=m.value;n.deleteCssPreset(e),m.value===e&&(m.value=o("theme.defaultCss")),h.value=p.value[m.value]||""})}function he(){const e=h.value.trim();e?e.includes("{")&&e.includes("}")?(n.applyCss(e),n.showToast(o("theme.toast.cssApplied"),"info")):n.showToast(o("theme.toast.invalidCss"),"error"):(n.applyCss(""),n.showToast(o("theme.toast.cssCleared"),"info"))}function ue(){const e={themePresets:b.value,currentThemePreset:d.value,fontPresets:T.value,currentFontPreset:_.value,cssPresets:p.value,currentCssPreset:m.value,exportDate:new Date().toISOString()},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=`ai_phone_theme_config_${new Date().toISOString().slice(0,10)}.json`,r.click(),URL.revokeObjectURL(a)}function ve(){U.value.click()}function fe(e){const s=e.target.files[0];if(!s)return;const a=new FileReader;a.onload=r=>{try{const c=JSON.parse(r.target.result);if(c.themePresets)for(const v in c.themePresets)b.value[v]=c.themePresets[v];if(c.fontPresets)for(const v in c.fontPresets)T.value[v]=c.fontPresets[v];if(c.cssPresets)for(const v in c.cssPresets)p.value[v]=c.cssPresets[v];confirm(o("theme.confirm.importSuccess"))&&(c.currentThemePreset&&n.switchThemePreset(c.currentThemePreset),c.currentFontPreset&&n.switchFontPreset(c.currentFontPreset),c.currentCssPreset&&n.switchCssPreset(c.currentCssPreset)),F(),n.showToast(o("theme.toast.importSuccess"),"success")}catch(c){n.showToast(o("theme.toast.importFailed"),"error"),console.error(c)}},a.readAsText(s),e.target.value=""}function be(){const e={bg:l.bg||"",lockbg:l.lockbg||"",appIcons:l.appIcons||{},showFrame:l.showFrame!==!1,showStatusBar:l.showStatusBar!==!1,fontColor:l.fontColor||"#1f1f1f",appLabelFontSize:l.appLabelFontSize||10};n.saveThemePreset(d.value,e),n.saveCssPreset(m.value,h.value),n.initTheme(),n.showToast(o("theme.toast.saveSuccess"))}return(e,s)=>(C(),w("div",$e,[t("div",Ie,[t("div",{class:"back-btn",onClick:X},[...s[12]||(s[12]=[t("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])]),t("div",Ne,i(e.$t("theme.title")),1),t("div",Oe,[t("button",{class:"header-save-btn",onClick:be},i(e.$t("save")),1)])]),t("div",Ue,[t("div",ze,[t("div",xe,[t("div",Le,[t("div",Ve,[t("div",Ae,i(e.$t("theme.showFrame")),1),t("div",je,i(e.$t("theme.showFrameDesc")),1)]),t("div",{class:j(["toggle-switch",{active:l.showFrame!==!1}]),onClick:s[0]||(s[0]=a=>x("showFrame"))},null,2)]),t("div",Be,[t("div",De,[t("div",Je,i(e.$t("theme.showStatusBar")),1),t("div",Me,i(e.$t("theme.showStatusBarDesc")),1)]),t("div",{class:j(["toggle-switch",{active:l.showStatusBar!==!1}]),onClick:s[1]||(s[1]=a=>x("showStatusBar"))},null,2)])])]),t("div",Re,[t("div",He,i(e.$t("theme.wallpaper")),1),t("div",We,[t("div",Ee,[t("div",qe,[t("div",Ge,[t("div",Qe,[t("div",Xe,i(e.$t("theme.homeScreen")),1),t("div",{class:"wallpaper-preview",style:B(l.bg?{backgroundImage:`url('${l.bg}')`}:{}),onClick:s[2]||(s[2]=a=>L("home"))},[l.bg?N("",!0):(C(),w("span",Ye,i(e.$t("theme.uploadHint")),1))],4)]),t("div",Ze,[t("div",Ke,i(e.$t("theme.lockScreen")),1),t("div",{class:"wallpaper-preview",style:B(l.lockbg?{backgroundImage:`url('${l.lockbg}')`}:{}),onClick:s[3]||(s[3]=a=>L("lock"))},[l.lockbg?N("",!0):(C(),w("span",et,i(e.$t("theme.uploadHint")),1))],4)])])])]),t("div",tt,[t("div",st,[t("div",ot,i(e.$t("theme.homeScreenStyle")),1)]),P($,{options:G.value,modelValue:f(R),"onUpdate:modelValue":Q,textAlign:"left"},null,8,["options","modelValue"])])])]),t("div",nt,[t("div",at,i(e.$t("theme.appIcons")),1),t("div",lt,[t("div",it,[t("div",ct,[t("div",rt,[(C(!0),w(Se,null,Pe(z.value,a=>(C(),w("div",{key:a.key,class:"app-icon-item",onClick:r=>Y(a.key)},[t("div",mt,[l.appIcons&&l.appIcons[a.key]?(C(),w("img",{key:0,src:l.appIcons[a.key]},null,8,pt)):N("",!0)]),t("span",ht,i(a.name),1)],8,dt))),128))])])])])]),t("div",ut,[t("div",vt,i(e.$t("theme.fontSettings")),1),t("div",ft,[t("div",bt,[t("div",_t,[P($,{options:W.value,modelValue:f(_),"onUpdate:modelValue":ee,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:te},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:se},i(e.$t("delete")),1)])]),t("div",yt,[t("div",gt,[D(t("input",{type:"text",class:"base-input",style:{flex:"1"},"onUpdate:modelValue":s[4]||(s[4]=a=>k.value=a),placeholder:f(o)("theme.fontUrlPlaceholder")},null,8,wt),[[J,k.value]]),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:oe},i(e.$t("confirm")),1)])]),t("div",Ct,[t("div",kt,[t("input",{type:"color",class:"color-picker-input",value:l.fontColor,onInput:s[5]||(s[5]=a=>ne(a.target.value))},null,40,St),t("input",{type:"text",class:"base-input",style:{flex:"1"},value:l.fontColor,onInput:s[6]||(s[6]=a=>ae(a.target.value)),placeholder:f(o)("theme.fontColorPlaceholder")},null,40,Pt),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:le},i(e.$t("confirm")),1)])]),t("div",Tt,[t("div",Ft,[t("div",$t,i(e.$t("theme.appNameFontSize")),1)]),t("div",It,[t("button",{onClick:s[7]||(s[7]=a=>V(-1))},"-"),t("span",null,i(l.appLabelFontSize||10)+"px",1),t("button",{onClick:s[8]||(s[8]=a=>V(1))},"+")])])])]),t("div",Nt,[t("div",Ot,i(e.$t("theme.themePresets")),1),t("div",Ut,[t("div",zt,[t("div",xt,[P($,{options:E.value,modelValue:f(d),"onUpdate:modelValue":ie,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:ce},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:re},i(e.$t("delete")),1)])]),t("div",Lt,[t("div",Vt,[P($,{options:q.value,modelValue:f(m),"onUpdate:modelValue":de,textAlign:"left",style:{flex:"1"}},null,8,["options","modelValue"]),t("button",{class:"btn btn-secondary btn-sm",onClick:me},i(e.$t("save")),1),t("button",{class:"btn btn-danger btn-sm",onClick:pe},i(e.$t("delete")),1)])]),t("div",At,[t("div",jt,[t("div",Bt,[t("div",Dt,i(e.$t("theme.globalCss")),1),t("button",{class:"btn btn-secondary btn-sm",style:{"white-space":"nowrap"},onClick:he},i(e.$t("confirm")),1)]),D(t("textarea",{class:"base-input","onUpdate:modelValue":s[9]||(s[9]=a=>h.value=a),placeholder:f(o)("theme.cssPlaceholder"),style:{width:"100%","margin-top":"10px"}},null,8,Jt),[[J,h.value]])])])])]),t("div",Mt,[t("div",Rt,i(e.$t("theme.importExport")),1),t("div",Ht,[t("div",Wt,[t("div",Et,[t("button",{class:"btn btn-secondary big-btn",onClick:ue},i(e.$t("theme.exportPresets")),1),t("button",{class:"btn btn-secondary big-btn",onClick:ve},i(e.$t("theme.importPresets")),1),t("input",{type:"file",ref_key:"importInput",ref:U,class:"hidden-input",accept:".json",onChange:fe},null,544)])])])]),t("div",qt,[s[13]||(s[13]=t("div",{class:"card-title"},"通知测试",-1)),t("div",Gt,[t("div",Qt,[t("div",Xt,[t("button",{class:"btn btn-secondary big-btn",onClick:s[10]||(s[10]=a=>f(M)("测试通知",{body:"这是一条测试通知。",tag:"test"}))},"发送测试通知")])])])])]),P(Te,{visible:S.value,"onUpdate:visible":s[11]||(s[11]=a=>S.value=a),title:u.title,bizType:u.bizType,type:"basic",onSendImage:K},null,8,["visible","title","bizType"])]))}},ts=_e(Yt,[["__scopeId","data-v-a0b2cf14"]]);export{ts as default};

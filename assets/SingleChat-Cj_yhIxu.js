import{t as Q,x as le,r as T,G as _,H as nt,I as ot,u as at,J as Se,L as lt,a as it,k as pe,_ as H,q as te,y as ve,b as M,o as k,l as J,e as N,f as q,d as e,T as ue,B as S,j as C,h as G,w as W,A as X,M as ie,c as L,F as j,C as oe,n as U,v as fe,E as ae,N as $e,i as Me,z as O,S as ne,O as we,D as K,P as rt,Q as ct,R as dt,U as ee,V as ut,W as vt,X as gt,Y as de,Z as mt}from"./index-DAffSskU.js";function ft(t){const m=Q(),s=le(),o=T(!1),r=T(new Set),g=T(!1),u=(n,f)=>{console.log("[useMessageSelection] enterSelectionMode triggered");let p=0,a=0;const c=document.querySelector(".message-list");f&&c&&(p=c.scrollTop,a=f.getBoundingClientRect().top),o.value=!0,r.value.clear(),n&&r.value.add(n),f&&c&&_(()=>{const $=document.querySelector(".selection-bar"),A=$?$.offsetHeight:0,B=f.getBoundingClientRect().top-a;c.scrollTop=p+B-A})},l=()=>{console.log("[useMessageSelection] exitSelectionMode triggered"),o.value=!1,r.value.clear()};return{isSelectionMode:o,selectedMessageIds:r,isForwarding:g,enterSelectionMode:u,exitSelectionMode:l,toggleMessageSelection:n=>{console.log(`[useMessageSelection] toggleMessageSelection for msgId: ${n}`),r.value.has(n)?r.value.delete(n):r.value.add(n)},handleBatchAction:n=>{if(console.log(`[useMessageSelection] handleBatchAction: ${n}`),r.value.size===0)return;const f=m.messages[t.value];n==="forward"?g.value=!0:n==="delete"?s.showConfirm("删除消息","确定删除选中的消息吗？",()=>{console.log("[useMessageSelection] Deleting selected messages"),m.messages[t.value]=f.filter(p=>!r.value.has(p.id)),m.saveData(),l()}):n==="favorite"&&(m.favorites||(m.favorites=[]),f.forEach(p=>{r.value.has(p.id)&&(m.favorites.some(a=>a.id===p.id)||m.favorites.push(p))}),m.saveData(),s.showToast("已收藏","success"),l())},handleConfirmForward:n=>{console.log("[useMessageSelection] handleConfirmForward triggered"),g.value=!1;const p=(m.messages[t.value]||[]).filter(a=>r.value.has(a.id));p.length!==0&&(n.forEach(a=>{m.messages[a]||(m.messages[a]=[]),p.forEach(c=>{const $={...c,id:Date.now().toString()+Math.random()};m.messages[a].push($)})}),m.saveData(),s.showToast(`已转发 ${p.length} 条消息`),l())}}}const pt=(t,m,s)=>{const o=m.map(g=>`${g.role==="user"?"用户":t.name}: ${g.content}`).join(`
`),r=s.toString().padStart(2,"0");return`
你正在扮演角色“${t.name}”，你需要根据以下设定和最近的对话，生成一段角色的实时“心声”。
心声由多个部分组成，请严格按照下面的JSON格式返回，不要添加任何额外的解释或文字。

**角色人设:**
${t.charPersona}

**最近对话:**
${o}

**你的任务:**
生成符合当前情境和角色性格的内心活动。
- **情绪 (emotion)**: 描述角色当前的主要情绪，应在一定时间内保持稳定，5字以内。
- **穿着 (outfit)**: 描述角色当前的穿着，应在一定时间内保持稳定，10字以内。
- **姿态 (posture)**: 描述角色当前的姿态或小动作，应在一定时间内保持稳定，15字以内。
- **内心独白 (innerVoice)**: 角色此刻具体的内心想法，50字以内。
- **没说出口的话 (unspokenWords)**: 一句角色想说但没说出口的话，风格可以多变（如阴暗、腹黑、酸涩、色情等），必须符合人设，15字以内。
- **标题 (title)**: 为这次心声生成一个简短的小标题，格式固定为“#${r} 标题内容”，例如“#${r} 初次见面”。

**输出格式 (必须是可被解析的JSON):**
{
  "emotion": "...",
  "outfit": "...",
  "posture": "...",
  "innerVoice": "...",
  "unspokenWords": "...",
  "title": "#${r} ..."
}
`};function ht(t,m){const s=Q(),o=nt(),r=ot(),g=at(),u=pe(),l=it(),d=T(!1),v=async()=>{console.log("[useAiResponder] triggerAiResponse triggered"),d.value=!0;try{const n=s.getCharacter(t.value),f=s.getPendingUserTransfers(t.value);console.log("[useAiResponder] Pending transfers to accept:",f.length);let p=await m.getChatCompletion(t.value);if(console.log("[useAiResponder] AI Response:",p),p){const a=/\[互动朋友圈：(.+?)\]/g;let c;for(;(c=a.exec(p))!==null;)try{const i=JSON.parse(c[1]),{action:y,response:P}=i,V=g.moments.filter(F=>F.userId==="user");if(V.length>0){const F=V[0];y==="like"?(g.likeMoment(F.id,t.value),console.log(`[useAiResponder] Liked user's latest moment: ${F.id}`)):y==="comment"&&P&&(g.likeMoment(F.id,t.value),g.addComment(F.id,{userId:t.value,content:P,time:Date.now()}),console.log(`[useAiResponder] Commented on user's latest moment: ${F.id}`))}}catch(i){console.error("[useAiResponder] Failed to parse moment interaction data:",i)}p=p.replace(a,"").trim();const $=/\[朋友圈：(.+?)\]/g;let A;for(;(A=$.exec(p))!==null;)try{const i=JSON.parse(A[1]),{text:y,imageDescription:P}=i,V=[];P&&V.push({content:P,isTextGenerated:!0}),(y||V.length>0)&&(g.addMoment({userId:t.value,content:y||"",images:V,time:Date.now()}),console.log(`[useAiResponder] Added new moment for ${t.value}`))}catch(i){console.error("[useAiResponder] Failed to parse moment data from AI response:",i)}p=p.replace($,"").trim();const R=/\[待办：(?:((?:\d{4}-\d{2}-\d{2}\s)?\d{1,2}:\d{2}|\d{4}-\d{2}-\d{2})\s)?(.+?)\]/g;let B;for(;(B=R.exec(p))!==null;){const i=B[1],y=B[2].trim();let P=new Date,V="";if(i)if(i.includes("-"))if(i.includes(":")){const[F,Z]=i.split(/\s+/);P=new Date(F),V=Z}else P=new Date(i),V="";else V=i;else V=new Date().toTimeString().slice(0,5);y&&(r.addEvent({type:"todo",title:y,content:y,date:Se(P,{representation:"date"}),done:!1,time:V}),console.log(`[useAiResponder] Added new todo: "${y}" at ${V} on ${Se(P,{representation:"date"})}`))}if(p=p.replace(R,"").trim(),!p){d.value=!1,b();return}s.messages[t.value]||(s.messages[t.value]=[]);const E=(n==null?void 0:n.isBlocked)||!1;let z=p.split("|||"),I=[];const h=/(\[(?:图片|表情包|语音|位置|转账)：.+?\])/g;z.forEach(i=>{const y=i.split(h).map(P=>P.trim()).filter(P=>P);I.push(...y)});for(let i=0;i<I.length;i++){const y=I[i];i>0&&await new Promise(Y=>setTimeout(Y,1e3+Math.random()*1e3));let{type:P,content:V}=lt(y),F={};if(P==="transfer_accepted"){await new Promise(Y=>setTimeout(Y,800+Math.random()*500)),s.autoAcceptPendingTransfers(t.value),console.log("[useAiResponder] Transfer acceptance message processed.");continue}if(P==="sticker"){const Y=V,se=s.stickers.find(re=>re.name===Y);se?(V=se.url,F.name=Y):(P="text",V=`[表情包：${Y}]`)}let Z=!1;P==="image"&&!V.startsWith("http")&&!V.startsWith("data:")&&(Z=!0),s.addMessage(t.value,{id:Date.now().toString()+i,sender:"char",type:P,content:V,isTextGenerated:Z,...F,time:Date.now(),blocked:E}),l.path!==`/chat/room/${t.value}`&&(s.incrementUnreadCount(t.value),o.triggerNotification(n.nickname||n.name,P==="text"?V:`[${P}]`,n.avatar,()=>{u.push(`/chat/room/${t.value}`)},3e3,P))}f.length>0&&s.getPendingUserTransfers(t.value).length>0&&(await new Promise(i=>setTimeout(i,800+Math.random()*500)),s.autoAcceptPendingTransfers(t.value),console.log("[useAiResponder] Fallback transfer acceptance executed at the end"))}}catch(n){console.error("[useAiResponder] triggerAiResponse failed:",n)}finally{d.value=!1,b()}},b=async()=>{try{const n=s.getCharacter(t.value);if(!n)return;const f=s.innerVoices[t.value]||[];let p=1;if(f.length>0){const A=f[0].title;if(A){const R=A.match(/#(\d+)/);R?p=parseInt(R[1],10)+1:p=f.length+1}else p=f.length+1}const a=s.getFormattedRecentMessages(t.value,10),c=pt(n,a,p),$=await m.getGenericCompletion([{role:"user",content:c}]);if($){const A=$.indexOf("{"),R=$.lastIndexOf("}");if(A!==-1&&R!==-1){const B=$.substring(A,R+1),E=JSON.parse(B);s.addInnerVoice(t.value,E),console.log("[useAiResponder] Inner voice generated and saved:",E)}else console.warn("[useAiResponder] Failed to find JSON in inner voice response.")}}catch(n){console.error("[useAiResponder] Failed to generate inner voice:",n)}};return{isTyping:d,triggerAiResponse:v}}function kt(t,m,s){const o=T(null);return{editingMessageId:o,handleEditMessage:l=>{console.log("[useMessageEditing] handleEditMessage for msgId:",l),o.value=l},handleSaveEdit:({msgId:l,newContent:d})=>{console.log("[useMessageEditing] handleSaveEdit for msgId:",l);const b=t.messages[m.value].find(n=>n.id===l);b&&(b.content=d,t.saveData()),o.value=null},updateInputText:l=>{console.log("[useMessageEditing] updateInputText called"),s&&(s.value=l,_(()=>{const d=document.querySelector(".chat-input");d&&d.focus()}))}}}function bt(t,m,s,o,r={}){const g=T(""),u=T(null),l=(a,c,$={})=>{console.log(`[useMessageSender] sendMsg called with type: ${a}`);const A={...$};u.value&&(A.quote={id:u.value.id,sender:u.value.sender,content:u.value.content}),t.addMessage(m.value,{id:Date.now().toString()+Math.random(),sender:"user",type:a,content:c,timestamp:Date.now(),...A}),o&&(o.value=null),u.value=null};return{inputText:g,quotingMessage:u,sendMessage:()=>{console.log("[useMessageSender] sendMessage triggered");const a=g.value.trim();a&&(l("text",a),g.value="")},sendMsg:l,sendSticker:a=>{console.log("[useMessageSender] sendSticker triggered"),l("sticker",a.url,{name:a.name})},sendVoiceMessage:a=>{console.log("[useMessageSender] sendVoiceMessage triggered"),a&&l("voice",a)},handleSendImage:a=>{console.log("[useMessageSender] handleSendImage triggered"),a.isTextGenerated?l("image",a.description,{isTextGenerated:!0}):(a.type==="base64"||a.type==="url")&&l("image",a.content)},confirmSendLocation:(a,c)=>{if(console.log("[useMessageSender] confirmSendLocation triggered"),!a){s.showToast("请输入位置名称","info");return}l("location",a,{detail:c})},sendTransfer:(a,c)=>{console.log("[useMessageSender] sendTransfer triggered",a,c),l("transfer",a,{note:c,status:"pending"})}}}function yt(t){const m=T(null),s=T(!1),o=T({x:0,y:0}),r=(v,b)=>{console.log("[useMessageInteraction] showMenu triggered"),v.preventDefault();const n=v.target.closest(".msg-bubble, .system-message-wrapper");n&&(t.value={visible:!0,messageId:b,targetEl:n})};return{startLongPress:(v,b)=>{console.log("[useMessageInteraction] startLongPress triggered"),v.stopPropagation(),s.value=!1,clearTimeout(m.value),v.type.startsWith("touch")&&(o.value={x:v.touches[0].clientX,y:v.touches[0].clientY}),m.value=setTimeout(()=>{s.value=!0,r(v,b)},400)},cancelLongPress:()=>{console.log("[useMessageInteraction] cancelLongPress triggered"),clearTimeout(m.value)},handleTouchMove:v=>{console.log("[useMessageInteraction] handleTouchMove triggered");const b=v.touches[0],n=Math.abs(b.clientX-o.value.x),f=Math.abs(b.clientY-o.value.y);(n>10||f>10)&&clearTimeout(m.value)},wasClickAfterLongPress:()=>s.value?(s.value=!1,!0):!1}}const St={class:"header-title-area"},$t={key:0,class:"chat-room-title"},Mt={key:1,class:"typing-indicator"},wt={class:"right-icons-group"},Ct={style:{display:"flex",gap:"10px","margin-bottom":"10px"}},Tt=["placeholder"],xt=["placeholder"],It={__name:"SingleChatHeader",props:{charId:{type:String,required:!0},charName:{type:String,default:""},charStatus:{type:Object,default:()=>({})},isTyping:{type:Boolean,default:!1}},emits:["trigger-ai","open-settings"],setup(t,{emit:m}){const s=t,{t:o}=te(),r=pe(),g=Q(),u=le(),l=T(!1),d=T(""),v=T(""),b=T(!1);ve(()=>{b.value=!0});const n=()=>{const a=s.charStatus||{};d.value=a.icon||"✨",v.value=a.text||"",l.value=!0},f=()=>{const a=d.value.trim()||"✨",c=v.value.trim(),$=g.getCharacter(s.charId);$&&(c?$.status={icon:a,text:c}:$.status=null,g.saveData(),u.showToast(o("saveSuccess"))),l.value=!1},p=()=>{r.push({name:"memory-bank",params:{charId:s.charId}})};return(a,c)=>(k(),M("div",null,[b.value?(k(),J(ue,{key:0,to:"#chatRoomLeftArea"},[e("div",{class:"btn-icon bell-btn",onClick:c[0]||(c[0]=$=>a.$emit("trigger-ai")),ref:"bellBtn"},[...c[6]||(c[6]=[e("svg",{class:"svg-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)])],512)])):N("",!0),b.value?(k(),J(ue,{key:1,to:"#chatRoomTitleArea"},[e("div",St,[t.isTyping?(k(),M("div",Mt,[e("span",null,S(C(o)("chat.singleChat.typing")),1),c[7]||(c[7]=e("span",{class:"dots"},[e("span",null,"."),e("span",null,"."),e("span",null,".")],-1))])):(k(),M("div",$t,S(t.charName),1))]),e("div",{class:"chat-room-status",onClick:n},[e("span",null,S(t.charStatus.icon||"✨"),1),e("span",null,S(t.charStatus.text||C(o)("chat.singleChat.addStatus")),1)])])):N("",!0),b.value?(k(),J(ue,{key:2,to:"#chatRoomActionArea"},[e("div",wt,[e("div",{class:"btn-icon memory-btn",onClick:p},[...c[8]||(c[8]=[e("svg",{class:"svg-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e("polyline",{points:"10 9 9 9 8 9"})],-1)])]),e("div",{class:"btn-icon more-btn",onClick:c[1]||(c[1]=$=>a.$emit("open-settings"))},[...c[9]||(c[9]=[e("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})],-1)])])])])):N("",!0),q(ie,{visible:l.value,"onUpdate:visible":c[5]||(c[5]=$=>l.value=$),title:C(o)("chat.singleChat.setStatus")},{footer:G(()=>[e("button",{class:"modal-btn cancel",onClick:c[4]||(c[4]=$=>l.value=!1)},S(C(o)("cancel")),1),e("button",{class:"modal-btn confirm",onClick:f},S(C(o)("confirm")),1)]),default:G(()=>[e("div",Ct,[W(e("input",{type:"text",class:"base-input","onUpdate:modelValue":c[2]||(c[2]=$=>d.value=$),placeholder:C(o)("chat.singleChat.statusIcon"),style:{width:"60px","text-align":"center"}},null,8,Tt),[[X,d.value]]),W(e("input",{type:"text",class:"base-input","onUpdate:modelValue":c[3]||(c[3]=$=>v.value=$),placeholder:C(o)("chat.singleChat.statusText"),style:{flex:"1"}},null,8,xt),[[X,v.value]])])]),_:1},8,["visible","title"])]))}},At=H(It,[["__scopeId","data-v-9265e8b0"]]),Pt={key:0,class:"chat-panel",id:"stickerPanel"},Rt={class:"sticker-panel-header"},Bt={class:"sticker-groups"},Vt=["onClick"],Lt={class:"sticker-panel-content"},Et=["onClick"],Dt=["src","alt"],Nt={class:"sticker-panel-footer"},qt={__name:"StickersPanel",props:{visible:Boolean},emits:["send-sticker","update:visible"],setup(t,{emit:m}){const s=m,o=Q(),r=le(),g=T("默认"),u=T(!1),l=T(new Set),d=T(!1),v=T(!1),b=T(""),n=L(()=>["默认",...new Set(o.stickers.map(h=>h.group).filter(Boolean).filter(h=>h!=="默认"))]),f=L(()=>o.stickers.filter(I=>I.group===g.value)),p=I=>{u.value?l.value.has(I.id)?l.value.delete(I.id):l.value.add(I.id):s("send-sticker",I)},a=({group:I,stickers:h})=>{const i=h.map(y=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),url:y.url,name:y.name,group:I}));o.stickers.push(...i),o.saveData(),r.showToast(`成功导入 ${i.length} 个表情包`,"success")},c=()=>{d.value=!0},$=()=>{l.value.size>0&&(v.value=!0)},A=()=>{u.value=!u.value,l.value.clear()},R=()=>{const I=f.value;I.every(i=>l.value.has(i.id))?I.forEach(i=>l.value.delete(i.id)):I.forEach(i=>l.value.add(i.id))},B=()=>{l.value.size!==0&&r.showConfirm("删除表情包","确定删除选中的表情包吗？",()=>{o.stickers=o.stickers.filter(I=>!l.value.has(I.id)),o.saveData(),l.value.clear()})},E=()=>{const I=b.value.trim();if(!I)return r.showToast("请输入目标分组","info");o.stickers.forEach(h=>{l.value.has(h.id)&&(h.group=I)}),o.saveData(),v.value=!1,b.value="",l.value.clear(),u.value=!1,g.value=I},z=()=>{if(l.value.size===0)return;const I=o.stickers.filter(P=>l.value.has(P.id)).map(P=>`${P.name} ${P.url}`).join(`
`),h=new Blob([I],{type:"text/plain"}),i=URL.createObjectURL(h),y=document.createElement("a");y.href=i,y.download=`stickers_export_${new Date().toISOString().slice(0,10)}.txt`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(i),l.value.clear(),u.value=!1};return(I,h)=>(k(),M("div",null,[t.visible?(k(),M("div",Pt,[e("div",Rt,[e("div",Bt,[(k(!0),M(j,null,oe(n.value,i=>(k(),M("div",{class:U(["sticker-group-tab",{active:g.value===i}]),key:i,onClick:y=>g.value=i},S(i),11,Vt))),128))])]),e("div",Lt,[(k(!0),M(j,null,oe(f.value,i=>(k(),M("div",{class:U(["sticker-item",{selected:l.value.has(i.id),"manage-mode":u.value}]),key:i.id,onClick:y=>p(i)},[e("img",{src:i.url,alt:i.name},null,8,Dt),e("span",null,S(i.name),1)],10,Et))),128))]),e("div",Nt,[W(e("div",{class:"sticker-add-btn",onClick:c},"＋",512),[[fe,!u.value]]),e("div",{class:"sticker-manage-btn",style:ae({color:u.value?"var(--danger-color)":"#576B95"}),onClick:A},S(u.value?"完成":"管理"),5)]),e("div",{class:U(["manage-bar",{active:u.value}])},[e("button",{class:"btn btn-secondary",onClick:c},"导入"),e("button",{class:"btn btn-secondary",onClick:R},"全选"),e("button",{class:"btn btn-secondary",onClick:$},"移动"),e("button",{class:"btn btn-secondary",onClick:z},"导出"),e("button",{class:"btn btn-danger",onClick:B},"删除")],2)])):N("",!0),q($e,{visible:d.value,"onUpdate:visible":h[0]||(h[0]=i=>d.value=i),type:"sticker-import",onImportSticker:a},null,8,["visible"]),q(ie,{visible:v.value,"onUpdate:visible":h[3]||(h[3]=i=>v.value=i),title:"移动到分组"},{footer:G(()=>[e("button",{class:"modal-btn cancel",onClick:h[2]||(h[2]=i=>v.value=!1)},"取消"),e("button",{class:"modal-btn confirm",onClick:E},"确定")]),default:G(()=>[W(e("input",{type:"text",class:"base-input","onUpdate:modelValue":h[1]||(h[1]=i=>b.value=i),placeholder:"输入目标分组名称"},null,512),[[X,b.value]])]),_:1},8,["visible"])]))}},Ut=H(qt,[["__scopeId","data-v-c6bef6fa"]]),zt={class:"chat-panel",id:"morePanel"},Ft={class:"more-panel-content"},Ot={class:"more-label"},Ht={class:"more-label"},jt={class:"more-label"},Wt={class:"more-label"},Gt={__name:"MorePanel",emits:["trigger-image-upload","start-video-call","send-location","send-transfer"],setup(t){const{t:m}=te();return(s,o)=>(k(),M("div",zt,[e("div",Ft,[e("div",{class:"more-item",onClick:o[0]||(o[0]=r=>s.$emit("trigger-image-upload"))},[o[4]||(o[4]=Me('<div class="more-icon" data-v-731b24d5><svg class="svg-icon" viewBox="0 0 24 24" data-v-731b24d5><rect x="3" y="3" width="18" height="18" rx="2" ry="2" data-v-731b24d5></rect><circle cx="8.5" cy="8.5" r="1.5" data-v-731b24d5></circle><polyline points="21 15 16 10 5 21" data-v-731b24d5></polyline></svg></div>',1)),e("span",Ot,S(C(m)("chat.morePanel.image")),1)]),e("div",{class:"more-item",onClick:o[1]||(o[1]=r=>s.$emit("start-video-call"))},[o[5]||(o[5]=e("div",{class:"more-icon"},[e("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[e("polygon",{points:"23 7 16 12 23 17 23 7"}),e("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})])],-1)),e("span",Ht,S(C(m)("chat.morePanel.videoCall")),1)]),e("div",{class:"more-item",onClick:o[2]||(o[2]=r=>s.$emit("send-location"))},[o[6]||(o[6]=e("div",{class:"more-icon"},[e("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})])],-1)),e("span",jt,S(C(m)("chat.morePanel.location")),1)]),e("div",{class:"more-item",onClick:o[3]||(o[3]=r=>s.$emit("send-transfer"))},[o[7]||(o[7]=e("div",{class:"more-icon"},[e("svg",{class:"svg-icon",viewBox:"0 0 24 24"},[e("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),e("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})])],-1)),e("span",Wt,S(C(m)("chat.morePanel.transfer")),1)])])]))}},Jt=H(Gt,[["__scopeId","data-v-731b24d5"]]),Yt={class:"chat-footer"},Kt={key:0,class:"quote-preview"},Qt={class:"quote-content"},Xt={class:"quote-sender"},Zt={class:"quote-text"},_t={class:"chat-input-row"},es={class:"chat-input-wrapper"},ts=["value","onKeydown"],ss={class:"svg-icon",viewBox:"0 0 24 24",style:{stroke:"white",width:"21px",height:"21px",position:"relative",top:"1px",left:"-1px"}},ns={__name:"ChatInputBar",props:{modelValue:{type:String,default:""},activePanel:{type:String,default:null},quotingMessage:{type:Object,default:null},charId:{type:String,required:!0}},emits:["update:modelValue","update:activePanel","cancel-quote","send-message","send-sticker","trigger-voice","trigger-image","trigger-video","trigger-location","trigger-transfer"],setup(t,{emit:m}){const{t:s}=te(),o=Q(),r=t,g=m,u=T(r.activePanel);O(()=>r.activePanel,n=>{u.value=n}),O(u,n=>{g("update:activePanel",n)});const l=L(()=>{if(!r.quotingMessage)return"";if(r.quotingMessage.sender==="user")return s("chat.self");{const n=o.getCharacter(r.charId);return(n==null?void 0:n.nickname)||(n==null?void 0:n.name)||s("chat.other")}}),d=n=>{u.value===n?u.value=null:u.value=n},v=()=>{r.modelValue.trim()&&g("send-message")},b=n=>{g("send-sticker",n),u.value=null};return(n,f)=>(k(),M("div",Yt,[t.quotingMessage?(k(),M("div",Kt,[e("div",Qt,[e("span",Xt,S(l.value)+": ",1),e("span",Zt,S(t.quotingMessage.content),1)]),e("div",{class:"quote-close",onClick:f[0]||(f[0]=p=>n.$emit("cancel-quote"))},[...f[9]||(f[9]=[e("div",{class:"quote-close-icon"},[e("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12"},[e("path",{d:"M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z",fill:"currentColor"})])],-1)])])])):N("",!0),e("div",_t,[e("div",{class:"chat-tool-btn",onClick:f[1]||(f[1]=p=>n.$emit("trigger-voice"))},[q(ne,{name:"voice-circle",class:"svg-icon"})]),e("div",es,[e("textarea",{class:"chat-input",value:t.modelValue,onInput:f[2]||(f[2]=p=>n.$emit("update:modelValue",p.target.value)),onKeydown:we(K(v,["exact","prevent"]),["enter"]),id:"messageInput",autocomplete:"off",rows:"1"},null,40,ts)]),e("div",{class:"chat-tool-btn",onClick:f[3]||(f[3]=p=>d("sticker"))},[q(ne,{name:"sticker",class:"svg-icon"})]),t.modelValue?(k(),M("div",{key:1,class:"send-btn-icon",onClick:v},[(k(),M("svg",ss,[...f[10]||(f[10]=[e("line",{x1:"22",y1:"2",x2:"11",y2:"13"},null,-1),e("polygon",{points:"22 2 15 22 11 13 2 9 22 2"},null,-1)])]))])):(k(),M("div",{key:0,class:"chat-tool-btn",onClick:f[4]||(f[4]=p=>d("more"))},[q(ne,{name:"plus-circle",class:"svg-icon"})]))]),q(Ut,{visible:u.value==="sticker",onSendSticker:b},null,8,["visible"]),u.value==="more"?(k(),J(Jt,{key:1,onTriggerImageUpload:f[5]||(f[5]=p=>n.$emit("trigger-image")),onStartVideoCall:f[6]||(f[6]=p=>n.$emit("trigger-video")),onSendLocation:f[7]||(f[7]=p=>n.$emit("trigger-location")),onSendTransfer:f[8]||(f[8]=p=>n.$emit("trigger-transfer"))})):N("",!0)]))}},os=H(ns,[["__scopeId","data-v-490ed303"]]),as={class:"menu-grid"},ls={__name:"MessageMenu",props:{visible:{type:Boolean,default:!1},targetEl:{type:Object,default:null},messageId:{type:String,default:null},charId:{type:String,required:!0}},emits:["close","enter-selection-mode","trigger-ai-response","quote-message","edit-message"],setup(t,{emit:m}){const s=t,o=m,r=rt("phoneScreenRef"),{t:g}=te(),u=Q(),l=le(),d=T(null),v=T({}),b=T(0),n=T("top");O(()=>s.visible,async a=>{a&&s.targetEl&&(await _(),f())});const f=()=>{const a=d.value;if(!a)return;const c=s.targetEl.getBoundingClientRect(),$=a.offsetWidth,A=a.offsetHeight,R=8,B=r.value,E=B?B.getBoundingClientRect():{top:0,left:0,width:window.innerWidth};n.value="top";let z=c.top-A-R;z<E.top+R&&(n.value="bottom",z=c.bottom+R);const I=c.left+c.width/2;let h=I-$/2;h<E.left+R&&(h=E.left+R),h+$>E.left+E.width-R&&(h=E.left+E.width-$-R);let i=I-h;const y=12,P=y/2+5,V=$-y/2-5;i=Math.max(P,Math.min(i,V)),v.value={top:`${z}px`,left:`${h}px`},b.value=i},p=a=>{const c=s.messageId;if(!c)return;const $=u.messages[s.charId],A=$.findIndex(E=>E.id===c),R=$[A],B={copy:()=>{R.content&&(navigator.clipboard.writeText(R.content),l.showToast(g("chat.messageMenu.toast.copied")))},favorite:()=>{u.favorites||(u.favorites=[]),u.favorites.some(E=>E.id===R.id)?l.showToast(g("chat.messageMenu.toast.alreadyFavorited")):(u.favorites.push(R),u.saveData(),l.showToast(g("chat.messageMenu.toast.favorited")))},delete:()=>{l.showConfirm(g("chat.messageMenu.confirmDelete"),g("chat.messageMenu.confirmDeleteMsg"),()=>{u.messages[s.charId].splice(A,1),u.saveData()})},revoke:()=>{R&&(R.type="revoked",u.saveData(),l.showToast(g("chat.messageMenu.toast.revoked")))},select:()=>o("enter-selection-mode",c,s.targetEl),quote:()=>o("quote-message",c),retry:()=>{R.sender!=="user"?u.messages[s.charId].splice(A,1):u.retryFromMessage(s.charId,c),u.saveData(),o("trigger-ai-response")},edit:()=>{R.type==="text"?o("edit-message",c):l.showToast(g("chat.messageMenu.toast.editTextOnly"),"info")}};B[a]&&B[a](),o("close")};return(a,c)=>t.visible?(k(),M("div",{key:0,ref_key:"menuRef",ref:d,class:U(["message-menu",{"menu-top":n.value==="top","menu-bottom":n.value==="bottom"}]),style:ae(v.value)},[e("div",as,[e("div",{class:"menu-item",onClick:c[0]||(c[0]=$=>p("copy"))},S(C(g)("copy")),1),e("div",{class:"menu-item",onClick:c[1]||(c[1]=$=>p("favorite"))},S(C(g)("favorite")),1),e("div",{class:"menu-item",onClick:c[2]||(c[2]=$=>p("delete"))},S(C(g)("delete")),1),e("div",{class:"menu-item",onClick:c[3]||(c[3]=$=>p("revoke"))},S(C(g)("revoke")),1),e("div",{class:"menu-item",onClick:c[4]||(c[4]=$=>p("select"))},S(C(g)("select")),1),e("div",{class:"menu-item",onClick:c[5]||(c[5]=$=>p("quote"))},S(C(g)("quote")),1),e("div",{class:"menu-item",onClick:c[6]||(c[6]=$=>p("retry"))},S(C(g)("retry")),1),e("div",{class:"menu-item",onClick:c[7]||(c[7]=$=>p("edit"))},S(C(g)("edit")),1)]),e("div",{class:"menu-arrow",style:ae({left:b.value+"px"})},null,4)],6)):N("",!0)}},is=H(ls,[["__scopeId","data-v-b8d63ff8"]]),rs={class:"chat-action-row"},cs={__name:"SelectionBar",emits:["action","cancel"],setup(t){const{t:m}=te();return(s,o)=>(k(),M("div",rs,[e("div",{class:"action-btn",onClick:o[0]||(o[0]=r=>s.$emit("action","favorite"))},[o[4]||(o[4]=e("div",{class:"action-btn-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[e("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})])],-1)),e("span",null,S(C(m)("favorite")),1)]),e("div",{class:"action-btn",onClick:o[1]||(o[1]=r=>s.$emit("action","forward"))},[o[5]||(o[5]=e("div",{class:"action-btn-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M18 8L22 12L18 16"}),e("path",{d:"M2 12H22"})])],-1)),e("span",null,S(C(m)("forward")),1)]),e("div",{class:"action-btn",onClick:o[2]||(o[2]=r=>s.$emit("action","delete"))},[o[6]||(o[6]=e("div",{class:"action-btn-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})])],-1)),e("span",null,S(C(m)("delete")),1)]),e("div",{class:"action-btn",onClick:o[3]||(o[3]=r=>s.$emit("cancel"))},[o[7]||(o[7]=e("div",{class:"action-btn-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})])],-1)),e("span",null,S(C(m)("done")),1)])]))}},ds=H(cs,[["__scopeId","data-v-be1a592f"]]),us=["src"],vs={class:"msg-content-wrapper"},gs={class:"msg-bubble-box"},ms={key:0,class:"quote-in-bubble"},fs={class:"quote-in-bubble-sender"},ps={class:"quote-in-bubble-text"},hs={key:1,class:"edit-view"},ks={key:0},bs={class:"description-placeholder"},ys=["src"],Ss={key:2,class:"sticker-msg"},$s=["src"],Ms={key:3,class:"voice-msg-wrapper"},ws={class:"voice-msg"},Cs={key:4,class:"location-msg"},Ts={class:"location-text"},xs={class:"msg-title"},Is={class:"transfer-content"},As={class:"transfer-icon"},Ps={key:0,viewBox:"0 0 24 24",fill:"currentColor"},Rs={key:1,viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Bs={class:"transfer-info"},Vs={class:"transfer-amount"},Ls={class:"transfer-desc"},Es={class:"transfer-footer"},Ds={key:6,class:"call-summary-msg"},Ns={key:0,class:"blocked-icon"},qs={__name:"MessageItem",props:{msg:{type:Object,required:!0},charName:{type:String,default:""},charAvatar:{type:String,default:""},userAvatar:{type:String,default:""},bubbleStyle:{type:Object,default:()=>({})},isSelectionMode:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},editingMessageId:{type:String,default:null}},emits:["save-edit","cancel-edit","toggle-selection","long-press","cancel-long-press","touch-move","click-msg","show-thought","accept-transfer"],setup(t,{emit:m}){const s=t,o=m,r=ct(),g=T(!1),u=T(!1),l=T(""),d=L(()=>s.editingMessageId===s.msg.id),v=L(()=>{const i=s.msg.type,y=i==="transfer"&&s.msg.status==="accepted";return{"no-style":["image","sticker","location","transfer"].includes(i),"has-location":i==="location","has-transfer":i==="transfer",accepted:y}}),b=L(()=>{if(s.msg.type!=="transfer")return{};const i=s.msg.status==="accepted",y=s.msg.sender==="user";return{"accepted-sender":i&&y,"accepted-receiver":i&&!y,pending:!i}}),n=L(()=>{if(s.msg.type!=="transfer")return"";const i=s.msg.sender==="user",y=s.msg.status==="accepted",P=s.msg.isReceived;return s.msg.note?s.msg.note:P?"已收款":y?"已被接收":i?"你发起了一笔转账":"请收款"}),f=L(()=>s.msg.type!=="transfer"?"":s.msg.isReceived?"已收款":s.msg.status==="accepted"?"已被接收":"微信转账");O(d,i=>{i&&(l.value=s.msg.content)});const p=i=>{o("long-press",i,s.msg.id)},a=()=>{o("cancel-long-press")},c=i=>{o("touch-move",i)},$=i=>{s.msg.type==="voice"&&R(),s.msg.type!=="image"&&o("click-msg",i,s.msg.id)},A=()=>{s.msg.sender!=="user"&&o("show-thought",s.msg.id)},R=()=>{g.value=!g.value},B=()=>{u.value=!u.value},E=()=>{l.value.trim()&&o("save-edit",{msgId:s.msg.id,newContent:l.value})},z=()=>{o("cancel-edit")},I=()=>s.msg.type==="notification"?s.msg.content:s.msg.type==="revoked"?`"${s.msg.sender==="user"?"你":s.charName}" 撤回了一条消息`:"",h=()=>{(s.msg.status==="pending"||s.msg.status===void 0)&&s.msg.sender!=="user"&&!s.isSelectionMode&&o("accept-transfer",s.msg.id)};return(i,y)=>(k(),M("div",{class:U(["message",{sent:t.msg.sender==="user",received:t.msg.sender!=="user",revoked:t.msg.type==="revoked"||t.msg.type==="notification","selection-mode-active":t.isSelectionMode}])},[t.msg.type==="revoked"||t.msg.type==="notification"?(k(),M(j,{key:0},[e("div",{class:U(["message-checkbox",{checked:t.isSelected,visible:t.isSelectionMode}]),onClick:y[0]||(y[0]=K(P=>i.$emit("toggle-selection",t.msg.id),["stop"]))},null,2),e("div",{class:"system-message-wrapper",onMousedown:p,onMouseup:a,onMouseleave:a,onTouchstart:p,onTouchend:a,onTouchmove:c,onClick:K($,["prevent"])},[e("div",{class:"system-message-text",onClick:y[1]||(y[1]=K(P=>!t.isSelectionMode&&B(),["stop"]))},S(I()),1),t.msg.type==="revoked"?W((k(),M("div",{key:0,class:"revoked-content"},S(t.msg.sender==="user"?"我":t.charName)+"："+S(t.msg.content),513)),[[fe,u.value]]):N("",!0)],32)],64)):(k(),M(j,{key:1},[e("div",{class:"msg-avatar",onClick:A},[(t.msg.sender==="user"?t.userAvatar:t.charAvatar)?(k(),M("img",{key:0,src:t.msg.sender==="user"?t.userAvatar:t.charAvatar,alt:"avatar"},null,8,us)):(k(),M("div",{key:1,class:U(["default-avatar",{user:t.msg.sender==="user"}])},null,2))]),e("div",vs,[e("div",gs,[e("div",{class:U(["msg-bubble",v.value]),style:ae(t.bubbleStyle),onMousedown:p,onMouseup:a,onMouseleave:a,onTouchstart:p,onTouchend:a,onTouchmove:c,onClick:K($,["prevent"])},[t.msg.quote?(k(),M("div",ms,[e("div",fs,S(t.msg.quote.sender==="user"?"你":t.charName)+":",1),e("div",ps,S(t.msg.quote.content),1)])):N("",!0),d.value?(k(),M("div",hs,[W(e("textarea",{"onUpdate:modelValue":y[2]||(y[2]=P=>l.value=P),class:"edit-textarea",rows:"3"},null,512),[[X,l.value]]),e("div",{class:"edit-actions"},[e("button",{onClick:z,class:"edit-btn cancel"},"取消"),e("button",{onClick:E,class:"edit-btn save"},"保存")])])):(k(),M(j,{key:2},[t.msg.type==="text"?(k(),M("div",ks,S(t.msg.content),1)):t.msg.type==="image"?(k(),M(j,{key:1},[t.msg.isTextGenerated||t.msg.sender!=="user"&&!t.msg.content.startsWith("http")&&!t.msg.content.startsWith("data:")?(k(),M("div",{key:0,class:"text-generated-image-container",onClick:y[3]||(y[3]=P=>C(r).preview(t.msg))},[e("div",bs,S(t.msg.content),1)])):(k(),M("div",{key:1,class:"image-msg",onClick:y[4]||(y[4]=P=>C(r).preview(t.msg))},[e("img",{src:t.msg.content,alt:"图片"},null,8,ys)]))],64)):t.msg.type==="sticker"?(k(),M("div",Ss,[e("img",{src:t.msg.content,alt:"表情包"},null,8,$s)])):t.msg.type==="voice"?(k(),M("div",Ms,[e("div",ws,[q(ne,{name:"voice-wave",class:U(["voice-icon-svg",{playing:g.value}])},null,8,["class"]),e("span",null,S(Math.min(60,Math.ceil(t.msg.content.length/2)))+'"',1)])])):t.msg.type==="location"?(k(),M("div",Cs,[e("div",Ts,[e("div",xs,S(t.msg.content||"位置信息"),1),y[6]||(y[6]=e("div",{class:"msg-desc"},"详细地址",-1))]),y[7]||(y[7]=Me('<div class="location-map" data-v-0cd05c16><img src="https://files.catbox.moe/uryae6.png" alt="地图" data-v-0cd05c16><div class="location-pin" data-v-0cd05c16><svg viewBox="0 0 24 24" fill="currentColor" data-v-0cd05c16><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" data-v-0cd05c16></path></svg></div></div>',1))])):t.msg.type==="transfer"?(k(),M("div",{key:5,class:U(["transfer-msg",b.value]),onClick:K(h,["stop"])},[e("div",Is,[e("div",As,[t.msg.status==="accepted"||t.msg.isReceived?(k(),M("svg",Ps,[...y[8]||(y[8]=[e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)])])):(k(),M("svg",Rs,[...y[9]||(y[9]=[e("path",{d:"M8 5 L4 9 H20 M16 19 L20 15 H4"},null,-1)])]))]),e("div",Bs,[e("div",Vs,"¥"+S(t.msg.content),1),e("div",Ls,S(n.value),1)])]),e("div",Es,S(f.value),1)],2)):t.msg.type==="call_summary"?(k(),M("div",Ds,[y[10]||(y[10]=e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08a.956.956 0 0 1 0-1.35c2.93-2.94 6.86-4.73 11.21-4.73s8.28 1.79 11.21 4.73c.38.38.38 1.02 0 1.4l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28a11.27 11.27 0 0 0-2.66-1.85.995.995 0 0 1-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"})],-1)),e("span",null,S(t.msg.content),1)])):N("",!0)],64))],38),t.msg.blocked&&t.msg.sender!=="user"?(k(),M("div",Ns,[...y[11]||(y[11]=[e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})],-1)])])):N("",!0)]),t.msg.type==="voice"?W((k(),M("div",{key:0,class:"voice-text"},S(t.msg.content),513)),[[fe,g.value]]):N("",!0)]),e("div",{class:U(["message-checkbox",{checked:t.isSelected,visible:t.isSelectionMode}]),onClick:y[5]||(y[5]=K(P=>i.$emit("toggle-selection",t.msg.id),["stop"]))},null,2)],64))],2))}},Us=H(qs,[["__scopeId","data-v-0cd05c16"]]),zs={key:0,class:"empty-message"},Fs={key:0,class:"timestamp"},Os={key:0,class:"blocked-overlay"},Hs={class:"blocked-content"},js=5*60*1e3,Ws={__name:"MessageList",props:{messages:{type:Array,default:()=>[]},charName:String,charAvatar:String,userAvatar:String,bubbleStyle:Object,isSelectionMode:Boolean,selectedMessageIds:Set,isBlocked:Boolean,editingMessageId:String,activePanel:String},emits:["save-edit","cancel-edit","toggle-selection","long-press","cancel-long-press","touch-move","click-msg","unblock","show-text-content","show-thought","accept-transfer"],setup(t,{expose:m}){const s=t,o=T(null),r=l=>{if(l===0)return!0;const d=s.messages[l],v=s.messages[l-1];if(!d.timestamp||!v.timestamp)return!1;const b=new Date(d.timestamp).getTime(),n=new Date(v.timestamp).getTime();return b-n>js},g=l=>{if(!l)return"";const d=new Date(l),v=new Date,b=new Date(v.getFullYear(),v.getMonth(),v.getDate()),n=new Date(b.getTime()-864e5),f=v.getDay()===0?7:v.getDay(),p=new Date(b.getTime()-(f-1)*864e5),a=d.getHours().toString().padStart(2,"0"),c=d.getMinutes().toString().padStart(2,"0"),$=`${a}:${c}`;if(d.getTime()>=b.getTime())return $;if(d.getTime()>=n.getTime())return`昨天 ${$}`;if(d.getTime()>=p.getTime())return`${["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][d.getDay()]} ${$}`;{const A=d.getFullYear(),R=(d.getMonth()+1).toString(),B=d.getDate().toString();return A===v.getFullYear()?`${R}月${B}日 ${$}`:`${A}年${R}月${B}日 ${$}`}},u=()=>{o.value&&(o.value.scrollTop=o.value.scrollHeight)};return O(()=>s.messages,()=>{_(()=>{u()})},{deep:!0}),O(()=>s.activePanel,l=>{l&&_(()=>{u()})}),ve(()=>{u()}),m({scrollToBottom:u}),(l,d)=>(k(),M(j,null,[e("div",{class:"chat-messages",ref_key:"messagesContainer",ref:o},[t.messages.length===0?(k(),M("div",zs," 开始和 "+S(t.charName)+" 聊天吧~ ",1)):N("",!0),(k(!0),M(j,null,oe(t.messages,(v,b)=>(k(),M(j,{key:v.id},[r(b)?(k(),M("div",Fs,S(g(v.timestamp)),1)):N("",!0),q(Us,{msg:v,charName:t.charName,charAvatar:t.charAvatar,userAvatar:t.userAvatar,bubbleStyle:t.bubbleStyle,isSelectionMode:t.isSelectionMode,isSelected:t.selectedMessageIds.has(v.id),editingMessageId:t.editingMessageId,onSaveEdit:d[0]||(d[0]=n=>l.$emit("save-edit",n)),onCancelEdit:d[1]||(d[1]=n=>l.$emit("cancel-edit")),onToggleSelection:d[2]||(d[2]=n=>l.$emit("toggle-selection",n)),onLongPress:d[3]||(d[3]=(n,f)=>l.$emit("long-press",n,f)),onCancelLongPress:d[4]||(d[4]=n=>l.$emit("cancel-long-press")),onTouchMove:d[5]||(d[5]=n=>l.$emit("touch-move",n)),onClickMsg:d[6]||(d[6]=(n,f)=>l.$emit("click-msg",n,f)),onShowTextContent:d[7]||(d[7]=n=>l.$emit("show-text-content",n)),onShowThought:d[8]||(d[8]=n=>l.$emit("show-thought",n)),onAcceptTransfer:d[9]||(d[9]=n=>l.$emit("accept-transfer",n))},null,8,["msg","charName","charAvatar","userAvatar","bubbleStyle","isSelectionMode","isSelected","editingMessageId"])],64))),128))],512),t.isBlocked?(k(),M("div",Os,[e("div",Hs,[d[11]||(d[11]=e("div",{class:"blocked-text"},"对方已被你拉黑",-1)),e("button",{class:"blocked-btn",onClick:d[10]||(d[10]=v=>l.$emit("unblock"))},"解除拉黑")])])):N("",!0)],64))}},Gs=H(Ws,[["__scopeId","data-v-deb1a117"]]),Js={__name:"VoiceInput",props:{visible:{type:Boolean,required:!0}},emits:["update:visible","confirm"],setup(t,{emit:m}){const s=t,o=m,r=L({get:()=>s.visible,set:l=>o("update:visible",l)}),g=T("");O(()=>s.visible,l=>{l&&(g.value="")});const u=()=>{const l=g.value.trim();o("confirm",l),r.value=!1};return(l,d)=>(k(),J(ie,{visible:r.value,"onUpdate:visible":d[2]||(d[2]=v=>r.value=v),title:"发送语音"},{footer:G(()=>[e("button",{class:"modal-btn cancel",onClick:d[1]||(d[1]=v=>r.value=!1)},"取消"),e("button",{class:"modal-btn confirm",onClick:u},"发送")]),default:G(()=>[W(e("input",{type:"text",class:"base-input","onUpdate:modelValue":d[0]||(d[0]=v=>g.value=v),placeholder:"输入语音内容..."},null,512),[[X,g.value]])]),_:1},8,["visible"]))}},Ys={__name:"LocationInput",props:{visible:{type:Boolean,required:!0}},emits:["update:visible","confirm"],setup(t,{emit:m}){const s=t,o=m,r=L({get:()=>s.visible,set:d=>o("update:visible",d)}),g=T(""),u=T("");O(()=>s.visible,d=>{d&&(g.value="",u.value="")});const l=()=>{const d=g.value.trim(),v=u.value.trim();d&&(o("confirm",{name:d,detail:v}),r.value=!1)};return(d,v)=>(k(),J(ie,{visible:r.value,"onUpdate:visible":v[3]||(v[3]=b=>r.value=b),title:"发送位置"},{footer:G(()=>[e("button",{class:"modal-btn cancel",onClick:v[2]||(v[2]=K(b=>r.value=!1,["stop"]))},"取消"),e("button",{class:"modal-btn confirm",onClick:l},"发送")]),default:G(()=>[W(e("input",{type:"text",class:"base-input","onUpdate:modelValue":v[0]||(v[0]=b=>g.value=b),placeholder:"位置名称 (如: 广州塔)",autocomplete:"new-password"},null,512),[[X,g.value]]),W(e("input",{type:"text",class:"base-input","onUpdate:modelValue":v[1]||(v[1]=b=>u.value=b),placeholder:"详细地址 (可选)",style:{"margin-top":"10px"},autocomplete:"new-password"},null,512),[[X,u.value]])]),_:1},8,["visible"]))}},Ks={class:"chat-list-container"},Qs=["onClick"],Xs=["src"],Zs={class:"chat-info"},_s={class:"chat-name"},en=["disabled"],tn={__name:"ForwardSelection",props:{visible:{type:Boolean,default:!1}},emits:["close","confirm"],setup(t,{emit:m}){const s=t,o=m,r=Q(),g=T(s.visible),u=T(new Set),l=L(()=>r.characters);O(()=>s.visible,b=>{g.value=b,b||u.value.clear()});const d=b=>{u.value.has(b)?u.value.delete(b):u.value.add(b)},v=()=>{u.value.size>0&&o("confirm",Array.from(u.value))};return(b,n)=>(k(),J(ie,{visible:g.value,"onUpdate:visible":n[1]||(n[1]=f=>g.value=f),title:"选择聊天",onClose:n[2]||(n[2]=f=>b.$emit("close"))},{footer:G(()=>[e("button",{class:"modal-btn cancel",onClick:n[0]||(n[0]=f=>b.$emit("close"))},"取消"),e("button",{class:"modal-btn confirm",disabled:u.value.size===0,onClick:v}," 确定 ("+S(u.value.size)+") ",9,en)]),default:G(()=>[e("div",Ks,[(k(!0),M(j,null,oe(l.value,f=>(k(),M("div",{key:f.id,class:"chat-item",onClick:p=>d(f.id)},[e("img",{src:f.avatar,alt:"avatar",class:"avatar"},null,8,Xs),e("div",Zs,[e("div",_s,S(f.name),1)]),e("div",{class:U(["checkbox",{selected:u.value.has(f.id)}])},null,2)],8,Qs))),128))])]),_:1},8,["visible"]))}},sn=H(tn,[["__scopeId","data-v-00bcf675"]]),nn={class:"note-container"},on={key:0,class:"content-wrapper"},an={class:"note-header current-header"},ln=["src"],rn={key:1,class:"avatar-placeholder"},cn={class:"character-name"},dn={class:"status-section"},un={class:"status-row"},vn={class:"status-value"},gn={class:"status-row"},mn={class:"status-value"},fn={class:"status-row"},pn={class:"status-value"},hn={class:"inner-voice-section"},kn={class:"inner-voice-box"},bn={class:"unspoken-section"},yn={class:"unspoken-text"},Sn={key:1,class:"content-wrapper history-wrapper"},$n={class:"scroll-container"},Mn={class:"item-header"},wn={class:"item-date"},Cn={class:"prop-row"},Tn={class:"prop-row"},xn={class:"prop-row"},In={class:"prop-row"},An={class:"prop-row"},Pn={__name:"SingleCharStatus",props:{visible:{type:Boolean,default:!1},name:{type:String,default:""},avatar:{type:String,default:""},charId:{type:String,required:!0}},emits:["close"],setup(t,{emit:m}){const s=t,o=Q(),{currentInnerVoice:r,innerVoices:g}=dt(o),u=L(()=>r.value[s.charId]||{emotion:"",outfit:"",posture:"",innerVoice:"",unspokenWords:""}),l=L(()=>g.value[s.charId]||[]),d=p=>p?new Date(p).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"."):"",v=m,b=T(!1),n=()=>{b.value=!b.value};O(()=>s.visible,p=>{p?(document.body.style.overflow="hidden",b.value=!1):document.body.style.overflow=""});const f=()=>{v("close")};return(p,a)=>t.visible?(k(),M("div",{key:0,class:"note-modal-mask",onClick:K(f,["self"])},[e("div",nn,[e("div",{class:"tape-button",onClick:n}),e("div",{class:U(["note",{"history-mode":b.value}])},[a[11]||(a[11]=e("div",{class:"paper-texture"},null,-1)),b.value?(k(),M("div",Sn,[e("div",{class:"note-header history-header"},[a[5]||(a[5]=e("div",{class:"header-title"},"历史心声",-1)),e("button",{class:"close-btn",onClick:f},"✕")]),e("div",$n,[(k(!0),M(j,null,oe(l.value,c=>(k(),M("div",{key:c.id,class:"history-item"},[e("div",Mn,[e("span",null,S(c.title),1),e("span",wn,S(d(c.timestamp)),1)]),e("div",Cn,[a[6]||(a[6]=e("span",{class:"prop-label"},"情绪：",-1)),ee(S(c.emotion),1)]),e("div",Tn,[a[7]||(a[7]=e("span",{class:"prop-label"},"穿着：",-1)),ee(S(c.outfit),1)]),e("div",xn,[a[8]||(a[8]=e("span",{class:"prop-label"},"姿态：",-1)),ee(S(c.posture),1)]),e("div",In,[a[9]||(a[9]=e("span",{class:"prop-label"},"内心独白：",-1)),ee(S(c.innerVoice),1)]),e("div",An,[a[10]||(a[10]=e("span",{class:"prop-label"},"没说出口的话：",-1)),ee(S(c.unspokenWords),1)])]))),128))])])):(k(),M("div",on,[e("div",an,[t.avatar?(k(),M("img",{key:0,src:t.avatar,class:"avatar-img",alt:"avatar"},null,8,ln)):(k(),M("div",rn,S(t.name?t.name.charAt(0):"?"),1)),e("div",cn,S(t.name),1),e("button",{class:"close-btn",onClick:f},"✕")]),e("div",dn,[e("div",un,[a[0]||(a[0]=e("span",{class:"status-label"},"情绪",-1)),e("span",vn,S(u.value.emotion||"无"),1)]),e("div",gn,[a[1]||(a[1]=e("span",{class:"status-label"},"穿着",-1)),e("span",mn,S(u.value.outfit||"无"),1)]),e("div",fn,[a[2]||(a[2]=e("span",{class:"status-label"},"姿态",-1)),e("span",pn,S(u.value.posture||"无"),1)])]),e("div",hn,[a[3]||(a[3]=e("div",{class:"section-title"},"Inner Voice",-1)),e("div",kn,[e("p",null,S(u.value.innerVoice||"（没有内心独白）"),1)])]),e("div",bn,[a[4]||(a[4]=e("div",{class:"unspoken-title"},"没说出口的话",-1)),e("div",yn,S(u.value.unspokenWords||"（没有想说的话）"),1)])])),a[12]||(a[12]=e("div",{class:"torn-edge"},null,-1))],2)])])):N("",!0)}},Rn=H(Pn,[["__scopeId","data-v-8274f6c4"]]),Bn={key:0,class:"transfer-modal"},Vn={class:"app-header transfer-header"},Ln={class:"target-section"},En={class:"target-info"},Dn={class:"target-text"},Nn={class:"transfer-to"},qn=["src"],Un={key:1,class:"target-avatar-placeholder"},zn={class:"amount-card"},Fn={class:"amount-input-wrapper"},On={key:0,class:"cursor"},Hn={class:"note-section"},jn={key:1,class:"note-input-row"},Wn={class:"number-keyboard"},Gn={class:"keyboard-grid"},Jn={__name:"MoneyPacket",props:{visible:{type:Boolean,default:!1},targetName:{type:String,default:""},targetAvatar:{type:String,default:""}},emits:["update:visible","confirm"],setup(t,{emit:m}){const s=t,o=m,r=T(""),g=T(""),u=T(!1),l=T(null),d=T(!0),v=T(!1),b=T(null),n=L(()=>!!l.value),f=L(()=>r.value),p=()=>(l.value=document.querySelector("#phone-screen-container"),!!l.value);ve(()=>{_(()=>{p()&&(u.value=!0)})}),ut(()=>{u.value=!1});const a=L(()=>{const I=parseFloat(r.value);return!isNaN(I)&&I>0});O(()=>s.visible,I=>{I&&(r.value="",g.value="",d.value=!0)});const c=()=>{o("update:visible",!1)},$=()=>{d.value=!0},A=()=>{v.value=!0,_(()=>{b.value&&b.value.focus()})},R=()=>{v.value=!1},B=I=>{if(I==="."){if(r.value.includes("."))return;if(r.value===""){r.value="0.";return}}if(r.value.includes(".")){const h=r.value.split(".");if(h[1]&&h[1].length>=2)return}if(!(!r.value.includes(".")&&I!=="."&&r.value.length>=8)){if(r.value==="0"&&I!=="."){r.value=I;return}r.value+=I}},E=()=>{r.value.length>0&&(r.value=r.value.slice(0,-1))},z=()=>{a.value&&(o("confirm",{amount:parseFloat(r.value).toFixed(2),note:g.value}),c())};return(I,h)=>u.value&&n.value?(k(),J(ue,{key:0,to:"#phone-screen-container"},[q(vt,{name:"slide-up"},{default:G(()=>[t.visible?(k(),M("div",Bn,[e("div",Vn,[e("div",{class:"back-btn",onClick:c},[q(ne,{name:"back-btn"})]),h[12]||(h[12]=e("div",{class:"title"},null,-1)),h[13]||(h[13]=e("div",{class:"action-btn"},null,-1))]),e("div",Ln,[e("div",En,[e("div",Dn,[e("div",Nn,"转账给 "+S(t.targetName),1)])]),t.targetAvatar?(k(),M("img",{key:0,src:t.targetAvatar,class:"target-avatar"},null,8,qn)):(k(),M("div",Un,[...h[14]||(h[14]=[e("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[e("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",fill:"#999"})],-1)])]))]),e("div",zn,[h[16]||(h[16]=e("div",{class:"amount-label"},"转账金额",-1)),e("div",Fn,[h[15]||(h[15]=e("span",{class:"currency-symbol"},"¥",-1)),e("div",{class:"amount-display",onClick:$},[ee(S(f.value||"")+" ",1),d.value?(k(),M("span",On,"|")):N("",!0)])]),h[17]||(h[17]=e("div",{class:"amount-divider"},null,-1)),e("div",Hn,[v.value?(k(),M("div",jn,[W(e("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=i=>g.value=i),class:"base-input note-input",placeholder:"添加转账说明",maxlength:"20",ref_key:"noteInputRef",ref:b,onBlur:R,onKeyup:we(R,["enter"])},null,544),[[X,g.value]])])):(k(),M("div",{key:0,class:"note-label-row",onClick:A},[e("span",{class:U(["note-text",{"has-note":g.value}])},S(g.value||"添加转账说明"),3)]))])]),e("div",Wn,[e("div",Gn,[e("div",{class:"key-btn",onClick:h[1]||(h[1]=i=>B("1"))},"1"),e("div",{class:"key-btn",onClick:h[2]||(h[2]=i=>B("2"))},"2"),e("div",{class:"key-btn",onClick:h[3]||(h[3]=i=>B("3"))},"3"),e("div",{class:"key-btn delete-btn",onClick:E},[...h[18]||(h[18]=[e("svg",{viewBox:"0 0 24 24",width:"22",height:"22"},[e("path",{d:"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z",fill:"#333"})],-1)])]),e("div",{class:"key-btn",onClick:h[4]||(h[4]=i=>B("4"))},"4"),e("div",{class:"key-btn",onClick:h[5]||(h[5]=i=>B("5"))},"5"),e("div",{class:"key-btn",onClick:h[6]||(h[6]=i=>B("6"))},"6"),e("div",{class:U(["key-btn transfer-key",{disabled:!a.value}]),onClick:z}," 转账 ",2),e("div",{class:"key-btn",onClick:h[7]||(h[7]=i=>B("7"))},"7"),e("div",{class:"key-btn",onClick:h[8]||(h[8]=i=>B("8"))},"8"),e("div",{class:"key-btn",onClick:h[9]||(h[9]=i=>B("9"))},"9"),e("div",{class:"key-btn zero-btn",onClick:h[10]||(h[10]=i=>B("0"))},"0"),e("div",{class:"key-btn",onClick:h[11]||(h[11]=i=>B("."))},".")])])])):N("",!0)]),_:1})])):N("",!0)}},Yn=H(Jn,[["__scopeId","data-v-aeb4e21f"]]),Kn={__name:"SingleChat",props:{charId:{type:String,required:!0}},setup(t){const m=t,s=pe(),{t:o}=te(),r=Q(),g=le(),u=gt(),l=T(null),d=T(null),v=T(null),b=T(!1),n=T({visible:!1,messageId:null,targetEl:null}),f=T(!1),p=T(!1),a=T(!1),c=T(!1);T("");const $=T(!1),A=L(()=>r.getCharacter(m.charId)),R=L(()=>{var w;return((w=A.value)==null?void 0:w.isBlocked)||!1}),B=L(()=>{var w,x;return((w=A.value)==null?void 0:w.nickname)||((x=A.value)==null?void 0:x.name)||o("chat.unknownCharacter")}),E=L(()=>{var w;return((w=A.value)==null?void 0:w.name)||o("chat.unknownCharacter")}),z=L(()=>{var w;return(w=A.value)==null?void 0:w.avatar}),I=L(()=>{var w;return((w=A.value)==null?void 0:w.status)||{}}),h=L(()=>{var w;return((w=A.value)==null?void 0:w.chatBackground)||""}),i=L(()=>{const w=A.value;if(!w||!w.userPersona)return"";const x=r.userPersonas.find(D=>D.id===w.userPersona);return(x==null?void 0:x.avatar)||""}),y=L(()=>r.messages[m.charId]||[]),P=L(()=>{var w;return((w=A.value)==null?void 0:w.bubbleSettings)||{}}),{isSelectionMode:V,selectedMessageIds:F,isForwarding:Z,enterSelectionMode:Y,exitSelectionMode:se,toggleMessageSelection:re,handleBatchAction:Ce,handleConfirmForward:Te}=ft(de(m,"charId")),{isTyping:xe,triggerAiResponse:he}=ht(de(m,"charId"),u),{inputText:ce,quotingMessage:ge,sendMessage:Ie,sendSticker:Ae,sendVoiceMessage:Pe,handleSendImage:Re,confirmSendLocation:Be,sendTransfer:Ve}=bt(r,de(m,"charId"),g,v),{editingMessageId:ke,handleEditMessage:Le,handleSaveEdit:Ee,updateInputText:De}=kt(r,de(m,"charId"),ce),{startLongPress:Ne,cancelLongPress:qe,handleTouchMove:Ue,wasClickAfterLongPress:ze}=yt(n),Fe=L(()=>{const w=P.value,x={fontSize:w.fontSize?`${w.fontSize}px`:"14px"};if(w.css){const D={};return w.css.split(";").forEach(st=>{const me=st.split(":");if(me.length>=2){const be=me[0].trim(),ye=me.slice(1).join(":").trim();be&&ye&&(D[be]=ye)}}),{...x,...D}}return x});O(b,w=>{w&&(s.push({name:"single-chat-settings",params:{id:m.charId}}),b.value=!1)}),O(()=>{var w;return(w=r.messages[m.charId])==null?void 0:w.length},()=>{r.clearUnreadCount(m.charId)}),ve(()=>{r.clearUnreadCount(m.charId)});const Oe=()=>{A.value&&(A.value.isBlocked=!1,r.messages[m.charId]&&r.messages[m.charId].forEach(w=>{w.blocked&&(w.blocked=!1)}),r.saveData(),g.showToast(o("chat.toast.unblocked")))},He=w=>{const x=w.target;x.closest(".modal-overlay.active")||(v.value&&!x.closest(".chat-footer")&&(v.value=null),V.value&&!x.closest(".message")&&!x.closest(".chat-action-row")&&!x.closest(".message-checkbox")&&!x.closest(".message-menu")&&se(),n.value.visible&&!x.closest(".message-menu")&&(n.value.visible=!1))},je=(w,x)=>{if(ze()){w.preventDefault(),w.stopPropagation();return}V.value&&re(x)},We=w=>{const x=y.value.find(D=>D.id===w);x&&(ge.value=x)},Ge=()=>{p.value=!0},Je=w=>{Pe(w),p.value=!1},Ye=()=>{v.value=null,f.value=!0},Ke=()=>{a.value=!0},Qe=({name:w,detail:x})=>{Be(w,x),a.value=!1},Xe=()=>{r.startVideoCall(m.charId,"user")},Ze=()=>{c.value=!0},_e=()=>{$.value=!0},et=({amount:w,note:x})=>{Ve(w,x),$.value=!1},tt=w=>{r.acceptTransfer(m.charId,w)};return(w,x)=>(k(),M("div",{class:U(["chat-room active",{"selection-mode":C(V)}]),onClick:He,ref_key:"chatRoomRef",ref:d},[e("div",{class:"chat-bg",style:ae(h.value?{backgroundImage:`url(${h.value})`}:{})},null,4),q(At,{charId:m.charId,charName:B.value,charStatus:I.value,isTyping:C(xe),onTriggerAi:C(he),onOpenSettings:x[0]||(x[0]=D=>b.value=!0)},null,8,["charId","charName","charStatus","isTyping","onTriggerAi"]),q(Gs,{ref_key:"messageListRef",ref:l,messages:y.value,charName:B.value,charAvatar:z.value,userAvatar:i.value,bubbleStyle:Fe.value,isSelectionMode:C(V),selectedMessageIds:C(F),isBlocked:R.value,editingMessageId:C(ke),activePanel:v.value,onSaveEdit:C(Ee),onCancelEdit:x[1]||(x[1]=D=>ke.value=null),onToggleSelection:C(re),onLongPress:C(Ne),onCancelLongPress:C(qe),onTouchMove:C(Ue),onClickMsg:je,onUnblock:Oe,onShowThought:Ze,onAcceptTransfer:tt},null,8,["messages","charName","charAvatar","userAvatar","bubbleStyle","isSelectionMode","selectedMessageIds","isBlocked","editingMessageId","activePanel","onSaveEdit","onToggleSelection","onLongPress","onCancelLongPress","onTouchMove"]),C(V)?N("",!0):(k(),J(os,{key:0,modelValue:C(ce),"onUpdate:modelValue":x[2]||(x[2]=D=>mt(ce)?ce.value=D:null),activePanel:v.value,"onUpdate:activePanel":x[3]||(x[3]=D=>v.value=D),charId:m.charId,quotingMessage:C(ge),onCancelQuote:x[4]||(x[4]=D=>ge.value=null),onSendMessage:C(Ie),onSendSticker:C(Ae),onTriggerVoice:Ge,onTriggerImage:Ye,onTriggerVideo:Xe,onTriggerLocation:Ke,onTriggerTransfer:_e},null,8,["modelValue","activePanel","charId","quotingMessage","onSendMessage","onSendSticker"])),C(V)?(k(),J(ds,{key:1,onAction:C(Ce),onCancel:C(se)},null,8,["onAction","onCancel"])):N("",!0),q(Js,{visible:p.value,"onUpdate:visible":x[5]||(x[5]=D=>p.value=D),onConfirm:Je},null,8,["visible"]),q($e,{visible:f.value,"onUpdate:visible":x[6]||(x[6]=D=>f.value=D),onSendImage:C(Re)},null,8,["visible","onSendImage"]),q(Ys,{visible:a.value,"onUpdate:visible":x[7]||(x[7]=D=>a.value=D),onConfirm:Qe},null,8,["visible"]),q(is,{visible:n.value.visible,targetEl:n.value.targetEl,messageId:n.value.messageId,charId:m.charId,isSelectionMode:C(V),selectedMessageIds:C(F),onClose:x[8]||(x[8]=D=>n.value.visible=!1),onEnterSelectionMode:C(Y),onTriggerAiResponse:C(he),"onUpdate:inputText":C(De),onQuoteMessage:We,onEditMessage:C(Le)},null,8,["visible","targetEl","messageId","charId","isSelectionMode","selectedMessageIds","onEnterSelectionMode","onTriggerAiResponse","onUpdate:inputText","onEditMessage"]),q(sn,{visible:C(Z),onClose:x[9]||(x[9]=D=>Z.value=!1),onConfirm:C(Te)},null,8,["visible","onConfirm"]),q(Rn,{visible:c.value,name:E.value,avatar:z.value,charId:m.charId,onClose:x[10]||(x[10]=D=>c.value=!1)},null,8,["visible","name","avatar","charId"]),q(Yn,{visible:$.value,"onUpdate:visible":x[11]||(x[11]=D=>$.value=D),targetName:B.value,targetAvatar:z.value,onConfirm:et},null,8,["visible","targetName","targetAvatar"])],2))}},Xn=H(Kn,[["__scopeId","data-v-3292bae6"]]);export{Xn as default};

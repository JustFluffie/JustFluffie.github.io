import{_ as x,k as I,c as d,m as S,C as A,b as D,w as _,e as F,x as P,o as a,i as s,n as V,g as r,h as B,t as n,p as v,d as l,G as p,H as u,c5 as h,f as G,S as H}from"./index-BFhJBr4-.js";import{u as M}from"./doubanStore-gGxP_vsh.js";const U={class:"group-page"},N={class:"header-content"},Z={class:"group-main-info"},L=["src"],R={class:"group-meta"},X={class:"group-name"},j={class:"group-members"},W={key:0,class:"group-description"},$={class:"controls-bar"},q={class:"post-controls"},z={class:"control-group"},E=["value"],J={class:"control-group"},K=["value"],T={class:"post-list"},O={key:0,class:"empty-state"},Q={key:1,class:"empty-state"},Y=["onClick"],ss={class:"post-stats"},es={class:"comment-count"},ts={class:"post-details"},os={class:"post-title"},as={class:"post-summary"},rs={class:"post-meta"},ns={class:"avatar"},is={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ls=["fill"],cs=["fill"],ds={class:"timestamp"},ps={__name:"GroupDetail",setup(us){const g=S(),C=P(),o=M(),m=I(),b=d(()=>m.characters),f=d(()=>m.userPersonas),k={"同学，我有一个朋友...":{description:"...想问一下。懂的都懂，你的“朋友”就是我朋友。校内秘闻一手速报，选课攻略到恋爱抓马，没有本组员不知道的。",avatar:"https://i.ibb.co/kgMW0jrx/1-1-1-1.png",members:"1,203,312 成员",color:"#A5C8A5"},"我今天就要离职！(明天再说)":{description:"从甲方槽点到办公室秘闻，专治各种职场内伤。今日摸鱼，明日再议离职。",avatar:"https://i.ibb.co/GvJDfFDK/2-1-1.png",members:"892,136 成员",color:"#F0A5A5"},野生瓜田种植与品鉴:{description:"友情提示：入组先学会黑话。不造谣，不传谣，我们只用放大镜看明星的每一步，这里的瓜保熟。",avatar:"https://i.ibb.co/x8srgXRV/1-1.png",members:"3,433,564 成员",color:"#F0DDAA"},恋爱细节放大镜小组:{description:"一个标点符号都要开会讨论，一个“哦”字就能分析三天。在这里，我们都是爱情里的显微镜学家。",avatar:"https://i.ibb.co/gZHjgXq7/1-1-1-1.png",members:"565,931 成员",color:"#A5B8C8"},深夜食堂:{description:"今晚，你吃了吗？这里是性的游乐场，尊重差异，谢绝说教。",avatar:"https://i.ibb.co/hxZN0XGb/1-2-1-1.png",members:"5,254,748 成员",color:"#C8A5C8"}},i=d(()=>{const c=g.params.groupName||"",e=k[c]||{description:"",avatar:"",members:"",color:"#FFFFFF"};return{title:c,description:e.description,avatar:e.avatar,members:e.members,color:e.color}}),y=()=>{if(!o.selectedCharacterId||!o.selectedUserPersonaId){console.log("Waiting for character and persona selection...");return}o.setPosts([]),o.fetchAndSetPosts(i.value.title,o.selectedCharacterId,o.selectedUserPersonaId)},w=c=>{C.push({name:"douban-post-detail",params:{postId:c}})};return A(()=>{}),(c,e)=>(a(),D(F,{title:"","no-padding":"","no-header-border":"","transparent-header":""},{action:_(()=>[G(H,{name:"refresh",onClick:y,class:"icon-refresh"})]),default:_(()=>[s("div",U,[s("header",{class:"group-header",style:V({backgroundColor:i.value.color})},[s("div",N,[s("div",Z,[s("img",{src:i.value.avatar,alt:"Group Avatar",class:"group-avatar"},null,8,L),s("div",R,[s("h1",X,n(i.value.title),1),s("p",j,n(i.value.members),1)])]),i.value.description?(a(),r("p",W,"小组简介："+n(i.value.description),1)):B("",!0)])],4),s("div",$,[s("div",q,[s("div",z,[v(s("select",{id:"character-select","onUpdate:modelValue":e[0]||(e[0]=t=>l(o).selectedCharacterId=t)},[e[2]||(e[2]=s("option",{value:null,disabled:""},"角色",-1)),(a(!0),r(p,null,u(b.value,t=>(a(),r("option",{key:t.id,value:t.id},n(t.name),9,E))),128))],512),[[h,l(o).selectedCharacterId]])]),s("div",J,[v(s("select",{id:"persona-select","onUpdate:modelValue":e[1]||(e[1]=t=>l(o).selectedUserPersonaId=t)},[e[3]||(e[3]=s("option",{value:null,disabled:""},"用户",-1)),(a(!0),r(p,null,u(f.value,t=>(a(),r("option",{key:t.id,value:t.id},n(t.name),9,K))),128))],512),[[h,l(o).selectedUserPersonaId]])])])]),s("main",T,[l(o).isLoading?(a(),r("div",O,[...e[4]||(e[4]=[s("p",null,"正在刷新帖子...",-1)])])):l(o).posts.length===0?(a(),r("div",Q,[...e[5]||(e[5]=[s("p",null,"选择角色和人设后，点击右上角刷新",-1)])])):(a(!0),r(p,{key:2},u(l(o).posts,t=>(a(),r("article",{key:t.id,class:"post-item",onClick:ms=>w(t.id)},[s("div",ss,[e[6]||(e[6]=s("svg",{class:"comment-icon",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M10 20H7.22472C6.08033 20 5.50814 20 5.05439 19.7822C4.64931 19.5892 4.31983 19.2908 4.10191 18.9056C3.85714 18.4719 3.85714 17.9257 3.85714 16.8333V10.1667C3.85714 9.07431 3.85714 8.52812 4.10191 8.09444C4.31983 7.70917 4.64931 7.41081 5.05439 7.21781C5.50814 7 6.08033 7 7.22472 7H16.7753C17.9197 7 18.4919 7 18.9456 7.21781C19.3507 7.41081 19.6802 7.70917 19.8981 8.09444C20.1429 8.52812 20.1429 9.07431 20.1429 10.1667V16.8333C20.1429 17.9257 20.1429 18.4719 19.8981 18.9056C19.6802 19.2908 19.3507 19.5892 18.9456 19.7822C18.4919 20 17.9197 20 16.7753 20H14L10 24V20Z"})],-1)),s("span",es,n(t.comments),1)]),s("div",ts,[s("h2",os,n(t.title),1),s("p",as,n(t.summary),1),s("div",rs,[s("div",ns,[(a(),r("svg",is,[s("circle",{cx:"12",cy:"8",r:"4",fill:t.avatarColor},null,8,ls),s("path",{d:"M12 14C8.68629 14 6 16.6863 6 20H18C18 16.6863 15.3137 14 12 14Z",fill:t.avatarColor},null,8,cs)]))]),e[7]||(e[7]=s("span",{class:"username"},"匿名豆友",-1)),s("span",ds,n(t.timestamp),1)])])],8,Y))),128))])])]),_:1}))}},hs=x(ps,[["__scopeId","data-v-30f35fdf"]]);export{hs as default};
